!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e){return null!=e&&(Array.isArray(e)||ArrayBuffer.isView(e))}function o(e){return null!=e&&"function"==typeof e.Dispose}n.r(t);function i(e,t,n){return e.has(t)?[!0,e.get(t)]:[!1,n]}function s(e,t){let n=e.toString(10);for(;n.length<t;)n="0"+n;return n}function u(e){const t=e;return"number"==typeof t.offset?t.offset:1===e.kind?0:-6e4*e.getTimezoneOffset()}class c{static id(e){return c.idMap.has(e)||c.idMap.set(e,++c.count),c.idMap.get(e)}}function a(e){let t=0,n=5381;const r=e.length;for(;t<r;)n=33*n^e.charCodeAt(t++);return n}function f(e){return 2654435761*e|0}function l(e){return 0===e.length?0:e.reduce((e,t)=>(e<<5)+e^t)}function h(e){if(null==e)return 0;switch(typeof e){case"boolean":return e?1:0;case"number":return f(e);case"string":return a(e);default:if(function(e){return null!=e&&"function"==typeof e.GetHashCode}(e))return e.GetHashCode();if(r(e)){const t=e.length,n=new Array(t);for(let r=0;r<t;r++)n[r]=h(e[r]);return l(n)}return a(String(e))}}function w(e,t,n){if(null==e)return null==t;if(null==t)return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function d(e,t){return w(e,t,g)}function g(e,t){return e===t||(null==e?null==t:null!=t&&("object"==typeof e&&(function(e){return null!=e&&"function"==typeof e.Equals}(e)?e.Equals(t):r(e)?r(t)&&d(e,t):e instanceof Date&&(t instanceof Date&&0===p(e,t)))))}function p(e,t){let n,r;return"offset"in e&&"offset"in t?(n=e.getTime(),r=t.getTime()):(n=e.getTime()+u(e),r=t.getTime()+u(t)),n===r?0:n<r?-1:1}function m(e,t){return e===t?0:e<t?-1:1}function y(e,t,n){if(null==e)return null==t?0:1;if(null==t)return-1;if(e.length!==t.length)return e.length<t.length?-1:1;for(let r=0,o=0;r<e.length;r++)if(o=n(e[r],t[r]),0!==o)return o;return 0}function S(e,t){return y(e,t,M)}function M(e,t){return e===t?0:null==e?null==t?0:-1:null==t?1:"object"!=typeof e?e<t?-1:1:function(e){return null!=e&&"function"==typeof e.CompareTo}(e)?e.CompareTo(t):r(e)&&r(t)?S(e,t):e instanceof Date&&t instanceof Date?p(e,t):1}function v(e,t,n){return e(t,n)<0?t:n}function P(e,t,n){return e(t,n)>0?t:n}function b(e){let t=e;return e=>void 0===e?t:void(t=e)}c.idMap=new WeakMap,c.count=0;function T(e,t){if(null==t)return null;if(t.length>1)return t;let n;switch(e){case 2:n=(e,n)=>t(e)(n);break;case 3:n=(e,n,r)=>t(e)(n)(r);break;case 4:n=(e,n,r,o)=>t(e)(n)(r)(o);break;case 5:n=(e,n,r,o,i)=>t(e)(n)(r)(o)(i);break;case 6:n=(e,n,r,o,i,s)=>t(e)(n)(r)(o)(i)(s);break;case 7:n=(e,n,r,o,i,s,u)=>t(e)(n)(r)(o)(i)(s)(u);break;case 8:n=(e,n,r,o,i,s,u,c)=>t(e)(n)(r)(o)(i)(s)(u)(c);break;default:throw new Error("Uncurrying to more than 8-arity is not supported: "+e)}return n.__CURRIED__=t,n}function C(e,t){if(null!=t){if("__CURRIED__"in t)return t.__CURRIED__;switch(e){case 2:return e=>n=>t(e,n);case 3:return e=>n=>r=>t(e,n,r);case 4:return e=>n=>r=>o=>t(e,n,r,o);case 5:return e=>n=>r=>o=>i=>t(e,n,r,o,i);case 6:return e=>n=>r=>o=>i=>s=>t(e,n,r,o,i,s);case 7:return e=>n=>r=>o=>i=>s=>u=>t(e,n,r,o,i,s,u);case 8:return e=>n=>r=>o=>i=>s=>u=>c=>t(e,n,r,o,i,s,u,c);default:throw new Error("Currying to more than 8-arity is not supported: "+e)}}}function N(e,t,n){if(null==t)return null;if("__CURRIED__"in t){t=t.__CURRIED__;for(let e=0;e<n.length;e++)t=t(n[e]);return t}switch(e){case 1:return e=>t.apply(null,n.concat([e]));case 2:return e=>r=>t.apply(null,n.concat([e,r]));case 3:return e=>r=>o=>t.apply(null,n.concat([e,r,o]));case 4:return e=>r=>o=>i=>t.apply(null,n.concat([e,r,o,i]));case 5:return e=>r=>o=>i=>s=>t.apply(null,n.concat([e,r,o,i,s]));case 6:return e=>r=>o=>i=>s=>u=>t.apply(null,n.concat([e,r,o,i,s,u]));case 7:return e=>r=>o=>i=>s=>u=>c=>t.apply(null,n.concat([e,r,o,i,s,u,c]));case 8:return e=>r=>o=>i=>s=>u=>c=>a=>t.apply(null,n.concat([e,r,o,i,s,u,c,a]));default:throw new Error("Partially applying to more than 8-arity is not supported: "+e)}}function G(e,t){if(e.has(t))return e.get(t);throw new Error(`The given key '${t}' was not present in the dictionary.`)}function I(e,t){return null!=t&&Object.getPrototypeOf(e).constructor===Object.getPrototypeOf(t).constructor}function k(e,t){return function(e,t){e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}(e,t||E),e}function E(){}function x(e,t){if(e===t)return 0;if(null==t)return-1;for(;null!=e.tail;){if(null==t.tail)return 1;const n=M(e.head,t.head);if(0!==n)return n;e=e.tail,t=t.tail}return null==t.tail?0:-1}function D(e,t){this.head=e,this.tail=t}function O(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}function A(e,t){const n={},r=null==t?Object.keys(e):t(e);for(let t=0;t<r.length;t++)n[r[t]]=e[r[t]];return n}function R(e,t,n){if(e===t)return!0;if(I(e,t)){const r=null==n?Object.keys(e):n(e);for(let n=0;n<r.length;n++)if(!g(e[r[n]],t[r[n]]))return!1;return!0}return!1}function L(e,t,n){if(e===t)return 0;if(I(e,t)){const r=null==n?Object.keys(e):n(e);for(let n=0;n<r.length;n++){const o=M(e[r[n]],t[r[n]]);if(0!==o)return o}return 0}return-1}function z(){}E.prototype.toString=function(){return"{"+Object.keys(this).map(e=>e+" = "+String(this[e])).join(";\n ")+"}"},E.prototype.GetHashCode=function(){return function(e){if(null==e)return 0;switch(typeof e){case"boolean":return e?1:0;case"number":return f(e);case"string":return a(e);default:return f(c.id(e))}}(this)},E.prototype.Equals=function(e){return this===e},D.prototype.toString=function(){return"["+Array.from(this).map(e=>String(e)).join("; ")+"]"},D.prototype.toJSON=function(){return Array.from(this)},D.prototype[Symbol.iterator]=function(){let e=this;return{next:()=>{const t=e;return e=e.tail,{done:null==t.tail,value:t.head}}}},D.prototype.GetHashCode=function(){return l(Array.from(this).map(h))},D.prototype.Equals=function(e){return 0===x(this,e)},D.prototype.CompareTo=function(e){return x(this,e)},O.prototype.toString=function(){const e=this.fields.length;return 0===e?this.name:1===e?this.name+" "+String(this.fields[0]):this.name+" ("+this.fields.map(e=>String(e)).join(",")+")"},O.prototype.toJSON=function(){return 0===this.fields.length?this.name:[this.name].concat(this.fields)},O.prototype.GetHashCode=function(){const e=this.fields.map(e=>h(e));return e.splice(0,0,f(this.tag)),l(e)},O.prototype.Equals=function(e){return this===e||I(this,e)&&this.tag===e.tag&&d(this.fields,e.fields)},O.prototype.CompareTo=function(e){return this===e?0:I(this,e)?this.tag===e.tag?S(this.fields,e.fields):this.tag<e.tag?-1:1:-1},z.prototype.toString=function(){return"{"+Object.keys(this).map(e=>e+" = "+String(this[e])).join(";\n ")+"}"},z.prototype.toJSON=function(){return A(this)},z.prototype.GetHashCode=function(){return l(Object.keys(this).map(e=>h(this[e])))},z.prototype.Equals=function(e){return R(this,e)},z.prototype.CompareTo=function(e){return L(this,e)};const F=k((function(e){this.contents=e}),z),B=k((function(e){this.stack=Error().stack,this.message=e}),E);function H(e){return Object.keys(e).filter(e=>"message"!==e&&"stack"!==e)}const W=k((function(){B.call(this)}),B);W.prototype.toString=function(){const e=H(this),t=e.length;return 0===t?this.message:1===t?this.message+" "+String(this[e[0]]):this.message+" ("+e.map(e=>String(this[e])).join(",")+")"},W.prototype.toJSON=function(){return A(this,H)},W.prototype.GetHashCode=function(){return l(H(this).map(e=>h(this[e])))},W.prototype.Equals=function(e){return R(this,e,H)},W.prototype.CompareTo=function(e){return L(this,e,H)};k((function(e,t,n){this.arg1=e,this.arg2=0|t,this.arg3=0|n,this.message="The match cases were incomplete"}),W),k((function(){}),E);class U{constructor(e,t,n,r,o,i){this.fullname=e,this.generics=t,this.constructor=n,this.fields=r,this.cases=o,this.enumCases=i}toString(){return function e(t){const n=null==t.generics||q(t)?[]:t.generics;return n.length>0?t.fullname+"["+n.map(t=>e(t)).join(",")+"]":t.fullname}(this)}Equals(e){return _(this,e)}CompareTo(e){return K(this,e)}}function j(e){return null!=e.generics?e.generics:[]}function _(e,t){return""===e.fullname?""===t.fullname&&w(J(e),J(t),([e,t],[n,r])=>e===n&&_(t,r)):e.fullname===t.fullname&&w(j(e),j(t),_)}function K(e,t){return e.fullname!==t.fullname?e.fullname<t.fullname?-1:1:y(j(e),j(t),K)}new U("System.Object"),new U("Microsoft.FSharp.Core.Unit"),new U("System.Char"),new U("System.String"),new U("System.Boolean"),new U("System.SByte"),new U("System.Byte"),new U("System.Int16"),new U("System.UInt16"),new U("System.Int32"),new U("System.UInt32"),new U("System.Single"),new U("System.Double"),new U("System.Decimal");function q(e){return e.fullname.endsWith("[]")}function J(e){if(null!=e.fields)return e.fields();throw new Error(`${e.fullname} is not an F# record type`)}const X=k((function(e,t,...n){O.call(this,e,t,...n)}),O);const Y=k((function(e,t){this.JustDown=e,this.Held=t}),z);const Z=new Y(!1,!1);class V{constructor(e){this.value=e}toString(){return String(this.value)}toJSON(){return this.value}GetHashCode(){return h(this.value)}Equals(e){return null!=e&&g(this.value,e instanceof V?e.value:e)}CompareTo(e){return null==e?1:M(this.value,e instanceof V?e.value:e)}}function $(e){return null==(e=void 0===e?null:e)||e instanceof V?new V(e):e}function Q(e,t){if(null==e){if(!t)throw new Error("Option has no value");return null}return e instanceof V?e.value:e}k((function(e,t,n){O.call(this,e,t,n)}),O);const ee=k((function(e,t,n){O.call(this,e,t,n)}),O);var te={GetHashCode(){return l([this.s,this.e].concat(this.c))},Equals(e){return!this.cmp(e)},CompareTo(e){return this.cmp(e)}},ne="[big.js] ",re=ne+"Invalid ",oe=re+"decimal places",ie=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function se(e,t){var n,r,o;if(0===t&&1/t<0)t="-0";else if(!ie.test(t+=""))throw Error(re+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),o=t.length,r=0;r<n&&r<o&&"0"==t.charAt(r);)++r;if(r==o)e.c=[e.e=0];else for(e.e=n-r-1,e.c=[],n=0;r<o;)e.c[n++]=+t.charAt(r++);return e=ue(e,ae.DP,ae.RM)}function ue(e,t,n,r){var o=e.c,i=e.e+t+1;if(i<o.length){if(1===n)r=o[i]>=5;else if(2===n)r=o[i]>5||5==o[i]&&(r||i<0||void 0!==o[i+1]||1&o[i-1]);else if(3===n)r=r||!!o[0];else if(r=!1,0!==n)throw Error("[big.js] Invalid rounding mode");if(i<1)o.length=1,r?(e.e=-t,o[0]=1):o[0]=e.e=0;else{if(o.length=i--,r)for(;++o[i]>9;)o[i]=0,i--||(++e.e,o.unshift(1));for(i=o.length;!o[--i];)o.pop()}}else if(n<0||n>3||n!==~~n)throw Error("[big.js] Invalid rounding mode");return e}function ce(e,t,n,r){var o,i,s=e.constructor,u=!e.c[0];if(void 0!==n){if(n!==~~n||n<(3==t)||n>1e6)throw Error(3==t?re+"precision":oe);for(n=r-(e=new s(e)).e,e.c.length>++r&&ue(e,n,s.RM),2==t&&(r=e.e+n+1);e.c.length<r;)e.c.push(0)}if(o=e.e,n=(i=e.c.join("")).length,2!=t&&(1==t||3==t&&r<=o||o<=s.NE||o>=s.PE))i=i.charAt(0)+(n>1?"."+i.slice(1):"")+(o<0?"e":"e+")+o;else if(o<0){for(;++o;)i="0"+i;i="0."+i}else if(o>0)if(++o>n)for(o-=n;o--;)i+="0";else o<n&&(i=i.slice(0,o)+"."+i.slice(o));else n>1&&(i=i.charAt(0)+"."+i.slice(1));return e.s<0&&(!u||4==t)?"-"+i:i}te.abs=function(){var e=new this.constructor(this);return e.s=1,e},te.cmp=function(e){var t,n=this.constructor,r=new n(this),o=(e=new n(e),r.c),i=e.c,s=r.s,u=e.s,c=r.e,a=e.e;if(!o[0]||!i[0])return o[0]?s:i[0]?-u:0;if(s!=u)return s;if(t=s<0,c!=a)return c>a^t?1:-1;for(u=Math.max(o.length,i.length),s=0;s<u;s++)if((c=s<o.length?o[s]:0)!=(a=s<i.length?i[s]:0))return c>a^t?1:-1;return 0},te.div=function(e){var t=this.constructor,n=new t(this),r=(e=new t(e),n.c),o=e.c,i=n.s==e.s?1:-1,s=t.DP;if(s!==~~s||s<0||s>1e6)throw Error(oe);if(!o[0])throw Error("[big.js] Division by zero");if(!r[0])return new t(0*i);var u,c,a,f,l,h=o.slice(),w=u=o.length,d=r.length,g=r.slice(0,u),p=g.length,m=e,y=m.c=[],S=0,M=s+(m.e=n.e-e.e)+1;for(m.s=i,i=M<0?0:M,h.unshift(0);p++<u;)g.push(0);do{for(a=0;a<10;a++){if(u!=(p=g.length))f=u>p?1:-1;else for(l=-1,f=0;++l<u;)if(o[l]!=g[l]){f=o[l]>g[l]?1:-1;break}if(!(f<0))break;for(c=p==u?o:h;p;){if(g[--p]<c[p]){for(l=p;l&&!g[--l];)g[l]=9;--g[l],g[p]+=10}g[p]-=c[p]}for(;!g[0];)g.shift()}y[S++]=f?a:++a,g[0]&&f?g[p]=r[w]||0:g=[r[w]]}while((w++<d||void 0!==g[0])&&i--);return y[0]||1==S||(y.shift(),m.e--),S>M&&ue(m,s,t.RM,void 0!==g[0]),m},te.eq=function(e){return!this.cmp(e)},te.gt=function(e){return this.cmp(e)>0},te.gte=function(e){return this.cmp(e)>-1},te.lt=function(e){return this.cmp(e)<0},te.lte=function(e){return this.cmp(e)<1},te.minus=te.sub=function(e){var t,n,r,o,i=this.constructor,s=new i(this),u=(e=new i(e),s.s),c=e.s;if(u!=c)return e.s=-c,s.plus(e);var a=s.c.slice(),f=s.e,l=e.c,h=e.e;if(!a[0]||!l[0])return l[0]?(e.s=-c,e):new i(a[0]?s:0);if(u=f-h){for((o=u<0)?(u=-u,r=a):(h=f,r=l),r.reverse(),c=u;c--;)r.push(0);r.reverse()}else for(n=((o=a.length<l.length)?a:l).length,u=c=0;c<n;c++)if(a[c]!=l[c]){o=a[c]<l[c];break}if(o&&(r=a,a=l,l=r,e.s=-e.s),(c=(n=l.length)-(t=a.length))>0)for(;c--;)a[t++]=0;for(c=t;n>u;){if(a[--n]<l[n]){for(t=n;t&&!a[--t];)a[t]=9;--a[t],a[n]+=10}a[n]-=l[n]}for(;0===a[--c];)a.pop();for(;0===a[0];)a.shift(),--h;return a[0]||(e.s=1,a=[h=0]),e.c=a,e.e=h,e},te.mod=function(e){var t,n=this.constructor,r=new n(this),o=(e=new n(e),r.s),i=e.s;if(!e.c[0])throw Error("[big.js] Division by zero");return r.s=e.s=1,t=1==e.cmp(r),r.s=o,e.s=i,t?new n(r):(o=n.DP,i=n.RM,n.DP=n.RM=0,r=r.div(e),n.DP=o,n.RM=i,this.minus(r.times(e)))},te.plus=te.add=function(e){var t,n=this.constructor,r=new n(this),o=(e=new n(e),r.s),i=e.s;if(o!=i)return e.s=-i,r.minus(e);var s=r.e,u=r.c,c=e.e,a=e.c;if(!u[0]||!a[0])return a[0]?e:new n(u[0]?r:0*o);if(u=u.slice(),o=s-c){for(o>0?(c=s,t=a):(o=-o,t=u),t.reverse();o--;)t.push(0);t.reverse()}for(u.length-a.length<0&&(t=a,a=u,u=t),o=a.length,i=0;o;u[o]%=10)i=(u[--o]=u[o]+a[o]+i)/10|0;for(i&&(u.unshift(i),++c),o=u.length;0===u[--o];)u.pop();return e.c=u,e.e=c,e},te.pow=function(e){var t=this.constructor,n=new t(this),r=new t(1),o=new t(1),i=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(re+"exponent");for(i&&(e=-e);1&e&&(r=r.times(n)),e>>=1;)n=n.times(n);return i?o.div(r):r},te.round=function(e,t){var n=this.constructor;if(void 0===e)e=0;else if(e!==~~e||e<-1e6||e>1e6)throw Error(oe);return ue(new n(this),e,void 0===t?n.RM:t)},te.sqrt=function(){var e,t,n,r=this.constructor,o=new r(this),i=o.s,s=o.e,u=new r(.5);if(!o.c[0])return new r(o);if(i<0)throw Error(ne+"No square root");0===(i=Math.sqrt(o+""))||i===1/0?((t=o.c.join("")).length+s&1||(t+="0"),s=((s+1)/2|0)-(s<0||1&s),e=new r(((i=Math.sqrt(t))==1/0?"1e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+s)):e=new r(i),s=e.e+(r.DP+=4);do{n=e,e=u.times(n.plus(o.div(n)))}while(n.c.slice(0,s).join("")!==e.c.slice(0,s).join(""));return ue(e,r.DP-=4,r.RM)},te.times=te.mul=function(e){var t,n=this.constructor,r=new n(this),o=(e=new n(e),r.c),i=e.c,s=o.length,u=i.length,c=r.e,a=e.e;if(e.s=r.s==e.s?1:-1,!o[0]||!i[0])return new n(0*e.s);for(e.e=c+a,s<u&&(t=o,o=i,i=t,a=s,s=u,u=a),t=new Array(a=s+u);a--;)t[a]=0;for(c=u;c--;){for(u=0,a=s+c;a>c;)u=t[a]+i[c]*o[a-c-1]+u,t[a--]=u%10,u=u/10|0;t[a]=(t[a]+u)%10}for(u?++e.e:t.shift(),c=t.length;!t[--c];)t.pop();return e.c=t,e},te.toExponential=function(e){return ce(this,1,e,e)},te.toFixed=function(e){return ce(this,2,e,this.e+e)},te.toPrecision=function(e){return ce(this,3,e,e-1)},te.toString=function(){return ce(this)},te.valueOf=te.toJSON=function(){return ce(this,4)};var ae=function e(){function t(n){var r=this;if(!(r instanceof t))return void 0===n?e():new t(n);n instanceof t?(r.s=n.s,r.e=n.e,r.c=n.c.slice(),function(e){if((e=ue(e,28,0)).c.length>1&&!e.c[0]){let t=e.c.findIndex(e=>e);e.c=e.c.slice(t),e.e=e.e-t}}(r)):se(r,n),r.constructor=t}return t.prototype=te,t.DP=28,t.RM=1,t.NE=-29,t.PE=29,t.version="5.2.2",t}(),fe=ae,le=fe;new fe(0),new fe(1),new fe(-1),new fe("79228162514264337593543950335"),new fe("-79228162514264337593543950335");var he;function we(e){return-2147483648===e?e:-e}!function(e){e[e.AllowHexSpecifier=512]="AllowHexSpecifier"}(he||(he={}));var de=null;try{de=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function ge(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function pe(e){return!0===(e&&e.__isLong__)}ge.prototype.GetHashCode=function(){let e=this.unsigned?1:0;return e=(e<<5)+e^this.high,e=(e<<5)+e^this.low,e},ge.prototype.Equals=function(e){return je(this,e)},ge.prototype.CompareTo=function(e){return Je(this,e)},ge.prototype.toString=function(e){return Be(this,e)},ge.prototype.toJSON=function(){return Be(this)},ge.prototype.__isLong__,Object.defineProperty(ge.prototype,"__isLong__",{value:!0});var me={},ye={};function Se(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=ye[e])?r:(n=ve(e,(0|e)<0?-1:0,!0),o&&(ye[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=me[e])?r:(n=ve(e,e<0?-1:0,!1),o&&(me[e]=n),n)}function Me(e,t){if(isNaN(e))return t?Ee:ke;if(t){if(e<0)return Ee;if(e>=Ne)return Re}else{if(e<=-Ge)return Le;if(e+1>=Ge)return Ae}return e<0?Xe(Me(-e,t)):ve(e%Ce|0,e/Ce|0,t)}function ve(e,t,n){return new ge(e,t,n)}var Pe=Math.pow;function be(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return ke;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r=e.indexOf("-");if(r>0)throw Error("interior hyphen");if(0===r)return Xe(be(e.substring(1),t,n));for(var o=Me(Pe(n,8)),i=ke,s=0;s<e.length;s+=8){var u=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+u),n);if(u<8)i=Ye(Ve(i,Me(Pe(n,u))),Me(c));else i=Ye(i=Ve(i,o),Me(c))}return i.unsigned=t,i}function Te(e,t){return"number"==typeof e?Me(e,t):"string"==typeof e?be(e,t):ve(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}var Ce=4294967296,Ne=Ce*Ce,Ge=Ne/2,Ie=Se(1<<24),ke=Se(0),Ee=Se(0,!0),xe=Se(1),De=Se(1,!0),Oe=Se(-1),Ae=ve(-1,2147483647,!1),Re=ve(-1,-1,!0),Le=ve(0,-2147483648,!1);function ze(e){return e.unsigned?e.low>>>0:e.low}function Fe(e){return e.unsigned?(e.high>>>0)*Ce+(e.low>>>0):e.high*Ce+(e.low>>>0)}function Be(e,t){if((t=t||10)<2||36<t)throw RangeError("radix");if(He(e))return"0";if(We(e)){if(je(e,Le)){var n=Me(t),r=$e(e,n),o=Ze(Ve(r,n),e);return Be(r,t)+ze(o).toString(t)}return"-"+Be(Xe(e),t)}for(var i=Me(Pe(t,6),e.unsigned),s=e,u="";;){var c=$e(s,i),a=(ze(Ze(s,Ve(c,i)))>>>0).toString(t);if(He(s=c))return a+u;for(;a.length<6;)a="0"+a;u=""+a+u}}function He(e){return 0===e.high&&0===e.low}function We(e){return!e.unsigned&&e.high<0}function Ue(e){return 1==(1&e.low)}function je(e,t){return pe(t)||(t=Te(t)),(e.unsigned===t.unsigned||e.high>>>31!=1||t.high>>>31!=1)&&(e.high===t.high&&e.low===t.low)}function _e(e,t){return Je(e,t)<0}function Ke(e,t){return Je(e,t)>0}function qe(e,t){return Je(e,t)>=0}function Je(e,t){if(pe(t)||(t=Te(t)),je(e,t))return 0;var n=We(e),r=We(t);return n&&!r?-1:!n&&r?1:e.unsigned?t.high>>>0>e.high>>>0||t.high===e.high&&t.low>>>0>e.low>>>0?-1:1:We(Ze(e,t))?-1:1}function Xe(e){return!e.unsigned&&je(e,Le)?Le:Ye(Qe(e),xe)}function Ye(e,t){pe(t)||(t=Te(t));var n=e.high>>>16,r=65535&e.high,o=e.low>>>16,i=65535&e.low,s=t.high>>>16,u=65535&t.high,c=t.low>>>16,a=0,f=0,l=0,h=0;return l+=(h+=i+(65535&t.low))>>>16,f+=(l+=o+c)>>>16,a+=(f+=r+u)>>>16,a+=n+s,ve((l&=65535)<<16|(h&=65535),(a&=65535)<<16|(f&=65535),e.unsigned)}function Ze(e,t){return pe(t)||(t=Te(t)),Ye(e,Xe(t))}function Ve(e,t){if(He(e))return e.unsigned?Ee:ke;if(pe(t)||(t=Te(t)),de)return ve(de.mul(e.low,e.high,t.low,t.high),de.get_high(),e.unsigned);if(He(t))return e.unsigned?Ee:ke;if(je(e,Le))return Ue(t)?Le:ke;if(je(t,Le))return Ue(e)?Le:ke;if(We(e))return We(t)?Ve(Xe(e),Xe(t)):Xe(Ve(Xe(e),t));if(We(t))return Xe(Ve(e,Xe(t)));if(_e(e,Ie)&&_e(t,Ie))return Me(Fe(e)*Fe(t),e.unsigned);var n=e.high>>>16,r=65535&e.high,o=e.low>>>16,i=65535&e.low,s=t.high>>>16,u=65535&t.high,c=t.low>>>16,a=65535&t.low,f=0,l=0,h=0,w=0;return h+=(w+=i*a)>>>16,l+=(h+=o*a)>>>16,h&=65535,l+=(h+=i*c)>>>16,f+=(l+=r*a)>>>16,l&=65535,f+=(l+=o*c)>>>16,l&=65535,f+=(l+=i*u)>>>16,f+=n*a+r*c+o*u+i*s,ve((h&=65535)<<16|(w&=65535),(f&=65535)<<16|(l&=65535),e.unsigned)}function $e(e,t){if(pe(t)||(t=Te(t)),He(t))throw Error("division by zero");var n,r,o;if(de)return e.unsigned||-2147483648!==e.high||-1!==t.low||-1!==t.high?ve((e.unsigned?de.div_u:de.div_s)(e.low,e.high,t.low,t.high),de.get_high(),e.unsigned):e;if(He(e))return e.unsigned?Ee:ke;if(e.unsigned){if(t.unsigned||(t=function(e){return e.unsigned?e:ve(e.low,e.high,!0)}(t)),Ke(t,e))return Ee;if(Ke(t,nt(e,1)))return De;o=Ee}else{if(je(e,Le))return je(t,xe)||je(t,Oe)?Le:je(t,Le)?xe:je(n=et($e(tt(e,1),t),1),ke)?We(t)?xe:Oe:o=Ye(n,$e(r=Ze(e,Ve(t,n)),t));if(je(t,Le))return e.unsigned?Ee:ke;if(We(e))return We(t)?$e(Xe(e),Xe(t)):Xe($e(Xe(e),t));if(We(t))return Xe($e(e,Xe(t)));o=ke}for(r=e;qe(r,t);){n=Math.max(1,Math.floor(Fe(r)/Fe(t)));for(var i=Math.ceil(Math.log(n)/Math.LN2),s=i<=48?1:Pe(2,i-48),u=Me(n),c=Ve(u,t);We(c)||Ke(c,r);)c=Ve(u=Me(n-=s,e.unsigned),t);He(u)&&(u=xe),o=Ye(o,u),r=Ze(r,c)}return o}function Qe(e){return ve(~e.low,~e.high,e.unsigned)}function et(e,t){return pe(t)&&(t=ze(t)),0==(t&=63)?e:t<32?ve(e.low<<t,e.high<<t|e.low>>>32-t,e.unsigned):ve(0,e.low<<t-32,e.unsigned)}function tt(e,t){return pe(t)&&(t=ze(t)),0==(t&=63)?e:t<32?ve(e.low>>>t|e.high<<32-t,e.high>>t,e.unsigned):ve(e.high>>t-32,e.high>=0?0:-1,e.unsigned)}function nt(e,t){if(pe(t)&&(t=ze(t)),0===(t&=63))return e;var n=e.high;return t<32?ve(e.low>>>t|n<<32-t,n>>>t,e.unsigned):ve(32===t?n:n>>>t-32,0,e.unsigned)}var rt=ge;const ot=Ve,it=Je,st=function(e,t,n){return n?function(e,t){return new ge(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)}(e,t):function(e,t){return new ge(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}(e,t)},ut=function(e,t){return t?function(e){var t=e.high,n=e.low;return[255&n,n>>>8&255,n>>>16&255,n>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]}(e):function(e){var t=e.high,n=e.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,n>>>24,n>>>16&255,n>>>8&255,255&n]}(e)},ct=Be;class at{constructor(e){this.iter=e}MoveNext(){const e=this.iter.next();return this.current=e.value,!e.done}get Current(){return this.current}Reset(){throw new Error("JS iterators cannot be reset")}Dispose(){}}function ft(e){return new at(e[Symbol.iterator]())}function lt(e){return{next:()=>e.MoveNext()?{done:!1,value:e.Current}:{done:!0,value:null}}}function ht(e){return dt(()=>{const t=e[Symbol.iterator]();let n={value:null};return vt(e=>{let r=!1;for(;!r;)if(null==e){const n=t.next();n.done?r=!0:e=n.value[Symbol.iterator]()}else{const t=e.next();t.done?e=null:(n={value:t.value},r=!0)}return null!=e&&null!=n?[n.value,e]:null},null)})}function wt(e,t){return ht(yt(e,t))}function dt(e){return{[Symbol.iterator]:()=>e()[Symbol.iterator]()}}function gt(e,t,n){if(Array.isArray(n)||ArrayBuffer.isView(n))return n.reduce(e,t);{let r;for(let o=0,i=n[Symbol.iterator]();r=i.next(),!r.done;o++)t=e(t,r.value,o);return t}}function pt(e,t){gt((t,n)=>(e(n),null),null,t)}function mt(e,t){gt((t,n,r)=>(e(null!=r?r:0,n),null),null,t)}function yt(e,t){return dt(()=>vt(t=>{const n=t.next();return n.done?null:[e(n.value),t]},t[Symbol.iterator]()))}function St(e,t,n){if(0===t)throw new Error("Step cannot be 0");return dt(()=>vt(e=>t>0&&e<=n||t<0&&e>=n?[e,e+t]:null,e))}function Mt(e,t,n){return gt((t,r)=>n.Add(t,e(r)),n.GetZero(),t)}function vt(e,t){return{[Symbol.iterator]:()=>{let n=t;return{next:()=>{const t=e(n);if(null!=t){const e=Q(t);if(null!=e)return n=e[1],{done:!1,value:e[0]}}return{done:!0,value:void 0}}}}}}function Pt(e){const t=e<0,n=(e=Math.abs(e))%36e5/6e4;return(t?"-":"+")+s(~~(e/36e5),2)+":"+s(n,2)}function bt(e,t){const n=e.toISOString();return"first"===t?n.substring(0,n.indexOf("T")):n.substring(n.indexOf("T")+1,n.length-1)}function Tt(e,t,n){return t.replace(/(\w)\1*/g,t=>{let r=Number.NaN;switch(t.substring(0,1)){case"y":const o=n?e.getUTCFullYear():e.getFullYear();r=t.length<4?o%100:o;break;case"M":r=(n?e.getUTCMonth():e.getMonth())+1;break;case"d":r=n?e.getUTCDate():e.getDate();break;case"H":r=n?e.getUTCHours():e.getHours();break;case"h":const i=n?e.getUTCHours():e.getHours();r=i>12?i%12:i;break;case"m":r=n?e.getUTCMinutes():e.getMinutes();break;case"s":r=n?e.getUTCSeconds():e.getSeconds();break;case"f":r=n?e.getUTCMilliseconds():e.getMilliseconds()}return Number.isNaN(r)?t:r<10&&t.length>1?"0"+r:""+r})}function Ct(e,t){var n,r,o;const i=new Date(e.getTime()+(null!=(n=e.offset)?n:0));if("string"!=typeof t)return i.toISOString().replace(/\.\d+/,"").replace(/[A-Z]|\.\d+/g," ")+Pt(null!=(r=e.offset)?r:0);if(1!==t.length)return Tt(i,t,!0);switch(t){case"D":case"d":return bt(i,"first");case"T":case"t":return bt(i,"second");case"O":case"o":return function(e,t){const n=e.toISOString();return n.substring(0,n.length-1)+Pt(t)}(i,null!=(o=e.offset)?o:0);default:throw new Error("Unrecognized Date print format")}}function Nt(e,t){const n=1===e.kind;if("string"!=typeof t)return n?e.toUTCString():e.toLocaleString();if(1!==t.length)return Tt(e,t,n);switch(t){case"D":case"d":return n?bt(e,"first"):e.toLocaleDateString();case"T":case"t":return n?bt(e,"second"):e.toLocaleTimeString();case"O":case"o":return function(e,t){if(t)return e.toISOString();{const t=null==e.kind||2===e.kind;return s(e.getFullYear(),4)+"-"+s(e.getMonth()+1,2)+"-"+s(e.getDate(),2)+"T"+s(e.getHours(),2)+":"+s(e.getMinutes(),2)+":"+s(e.getSeconds(),2)+"."+s(e.getMilliseconds(),3)+(t?Pt(-6e4*e.getTimezoneOffset()):"")}}(e,n);default:throw new Error("Unrecognized Date print format")}}const Gt=/(^|[^%])%([0+\- ]*)(\d+)?(?:\.(\d+))?(\w)/,It=/\{(\d+)(,-?\d+)?(?:\:([a-zA-Z])(\d{0,2})|\:(.+?))?\}/g;function kt(e){return"number"==typeof e||e instanceof rt||e instanceof le}function Et(e,t){return e instanceof rt?it(e,t)<0:e instanceof le?e.cmp(t)<0:e<t}function xt(e,t){return e instanceof rt?ot(e,t):e instanceof le?e.mul(t):e*t}function Dt(e,t){return e instanceof rt?String(e)+(0).toFixed(t).substr(1):e.toFixed(t)}function Ot(e,t){return e instanceof rt?String(e)+(0).toPrecision(t).substr(1):e.toPrecision(t)}function At(e,t){return e instanceof rt?String(e)+(0).toExponential(t).substr(1):e.toExponential(t)}function Rt(e){return e instanceof rt?ct(e.unsigned?e:st(ut(e),!0),16):(Number(e)>>>0).toString(16)}function Lt(e){return{input:e,cont:(t=e,e=>Gt.test(t)?function e(t,n){return(...r)=>{let o=t;for(const e of r)o=Ft(o,e);return Gt.test(o)?e(o,n):n(o.replace(/%%/g,"%"))}}(t,e):e(t))};var t}function zt(e){return e.cont(e=>e)}function Ft(e,t){return e.replace(Gt,(e,n,r,o,i,s)=>{let u="";if(kt(t))switch("x"!==s.toLowerCase()&&(Et(t,0)?(t=xt(t,-1),u="-"):r.indexOf(" ")>=0?u=" ":r.indexOf("+")>=0&&(u="+")),i=null==i?null:parseInt(i,10),s){case"f":case"F":t=Dt(t,i=null!=i?i:6);break;case"g":case"G":t=null!=i?Ot(t,i):Ot(t);break;case"e":case"E":t=null!=i?At(t,i):At(t);break;case"x":t=Rt(t);break;case"X":t=Rt(t).toUpperCase();break;default:t=String(t)}if(o=parseInt(o,10),isNaN(o))t=u+t;else{const e=r.indexOf("0")>=0,n=r.indexOf("-")>=0,i=n||!e?" ":"0";t="0"===i?u+(t=Ut(t,o-u.length,i,n)):Ut(u+t,o,i,n)}return(n+t).replace(/%/g,"%%")})}function Bt(e,...t){return"object"==typeof e&&t.length>0&&(e=t[0],t.shift()),e.replace(It,(e,n,r,o,i,s)=>{let u=t[n];if(kt(u))switch(i=null==i?null:parseInt(i,10),o){case"f":case"F":u=Dt(u,i=null!=i?i:2);break;case"g":case"G":u=null!=i?Ot(u,i):Ot(u);break;case"e":case"E":u=null!=i?At(u,i):At(u);break;case"p":case"P":i=null!=i?i:2,u=Dt(xt(u,100),i)+" %";break;case"d":case"D":u=null!=i?Ut(String(u),i,"0"):String(u);break;case"x":case"X":u=null!=i?Ut(Rt(u),i,"0"):Rt(u),"X"===o&&(u=u.toUpperCase());break;default:if(s){let e="";u=s.replace(/(0+)(\.0+)?/,(t,n,r)=>(Et(u,0)&&(u=xt(u,-1),e="-"),u=Dt(u,null!=r?r.length-1:0),Ut(u,(n||"").length-e.length+(null!=r?r.length:0),"0"))),u=e+u}}else u instanceof Date&&(u=function(e,t){return null!=e.offset?Ct(e,t):Nt(e,t)}(u,s||o));return r=parseInt((r||" ").substring(1),10),isNaN(r)||(u=Ut(String(u),Math.abs(r)," ",r<0)),u})}function Ht(e,t){if(e<0)throw new Error("String length must be non-negative");const n=new Array(e);for(let r=0;r<e;r++)n[r]=t(r);return n.join("")}function Wt(e,t){return Array.isArray(t)?t.join(e):Array.from(t).join(e)}function Ut(e,t,n,r){n=n||" ",t-=e.length;for(let o=0;o<t;o++)e=r?e+n:n+e;return e}function jt(e,t,n){if(t+(n||0)>e.length)throw new Error("Invalid startIndex and/or length");return null!=n?e.substr(t,n):e.substr(t)}const _t=k((function(e,t){const n=new F(null);this.comparer=t,n.contents=this,this.hashMap=new Map([]),this["init@20-1"]=1,pt((function(e){Yt(n.contents,e[0],e[1])}),e)}));function Kt(e,t){const n=0|e.comparer.GetHashCode(t),r=i(e.hashMap,n,null);return r[0]?[!0,n,r[1].findIndex((function(n){return e.comparer.Equals(t,n[0])}))]:[!1,n,-1]}function qt(e,t){const n=Kt(e,t);switch(n[0]&&n[2]>-1?0:1){case 0:return G(e.hashMap,n[1])[n[2]];case 1:return null}}function Jt(e){e.hashMap.clear()}function Xt(e){return 0|Mt((function(e){return e.length}),e.hashMap.values(),{GetZero:()=>0,Add:(e,t)=>e+t})}function Yt(e,t,n){const r=Kt(e,t);switch(r[0]&&r[2]>-1?0:1){case 0:{let e;throw e=zt(Lt("An item with the same key has already been added. Key: %A"))(t),new Error(e)}case 1:if(r[0]){Rn([t,n],G(e.hashMap,r[1]))}else e.hashMap.set(r[1],[[t,n]])}}function Zt(e,t){const n=Kt(e,t);switch(n[0]&&n[2]>-1?0:1){case 0:return G(e.hashMap,n[1]).splice(n[2],1),!0;case 1:return!1}}_t.prototype[Symbol.iterator]=function(){const e=this;return lt(ft(dt((function(){return wt((function(e){return yt((function(e){return e}),e)}),e.hashMap.values())}))))},_t.prototype.Add=function(e){Yt(this,e[0],e[1])},_t.prototype.Clear=function(){Jt(this)},_t.prototype.Contains=function(e){const t=qt(this,e[0]);switch(null!=t&&g(t[1],e[1])?0:1){case 0:return!0;case 1:return!1}},_t.prototype.CopyTo=function(e,t){mt((function(n,r){e[t+n]=r}),this)},Object.defineProperty(_t.prototype,"Count",{get:function(){return 0|Xt(this)}}),Object.defineProperty(_t.prototype,"IsReadOnly",{get:function(){return!1}}),_t.prototype.Remove=function(e){const t=this,n=qt(t,e[0]);if(null!=n){if(g(n[1],e[1])){Zt(t,e[0])}return!0}return!1},Object.defineProperty(_t.prototype,"size",{get:function(){return 0|Xt(this)}}),_t.prototype.clear=function(){Jt(this)},_t.prototype.delete=function(e){return Zt(this,e)},_t.prototype.entries=function(){return yt((function(e){return e}),this)},_t.prototype.get=function(e){return function(e,t){const n=qt(e,t);if(null!=n){return n[1]}throw new Error("The item was not found in collection")}(this,e)},_t.prototype.has=function(e){return function(e,t){const n=Kt(e,t);switch(n[0]&&n[2]>-1?0:1){case 0:return!0;case 1:return!1}}(this,e)},_t.prototype.keys=function(){return yt((function(e){return e[0]}),this)},_t.prototype.set=function(e,t){return function(e,t,n){const r=Kt(e,t);switch(r[0]&&r[2]>-1?0:1){case 0:G(e.hashMap,r[1])[r[2]]=[t,n];break;case 1:if(r[0]){Rn([t,n],G(e.hashMap,r[1]))}else e.hashMap.set(r[1],[[t,n]])}}(this,e,t),this},_t.prototype.values=function(){return yt((function(e){return e[1]}),this)};const Vt=k((function(e,t,...n){O.call(this,e,t,...n)}),O);function $t(e){return function e(t,n){e:for(;;){const r=t,o=n;switch(o.tag){case 1:return r+1|0;case 2:t=e(r+1,o.fields[2]),n=o.fields[3];continue e;default:return 0|r}break}}(0,e)}function Qt(e,t,n){e:for(;;){const r=e,o=t,i=n;switch(i.tag){case 1:if(0===(0|r.Compare(o,i.fields[0])))return i.fields[1];throw new Error("key not found");case 2:{const s=0|r.Compare(o,i.fields[0]);if(s<0){e=r,t=o,n=i.fields[2];continue e}if(0===s)return i.fields[1];e=r,t=o,n=i.fields[3];continue e}default:throw new Error("key not found")}break}}function en(e,t,n){e:for(;;){const r=e,o=t,i=n;switch(i.tag){case 1:return 0===r.Compare(o,i.fields[0]);case 2:{const s=0|r.Compare(o,i.fields[0]);if(s<0){e=r,t=o,n=i.fields[2];continue e}if(0===s)return!0;e=r,t=o,n=i.fields[3];continue e}default:return!1}break}}const tn=k((function(e,t){this.stack=e,this.started=t}),z);function nn(e){for(;;){const t=e;if(null==t.tail)return new D;if(1===t.head.tag)return t;2!==t.head.tag?e=t.tail:e=new D(t.head.fields[2],new D(new Vt(1,"MapOne",t.head.fields[0],t.head.fields[1]),new D(t.head.fields[3],t.tail)))}}function rn(e){return new tn(nn(new D(e,new D)),!1)}function on(e){if(e.started){const t=e.stack;if(null==t.tail)return function(){throw new Error("enumeration already finished")}();if(1===t.head.tag)return[t.head.fields[0],t.head.fields[1]];throw new Error("Please report error: Map iterator, unexpected stack for current")}return function(){throw new Error("enumeration not started")}()}const sn=k((function(e){this.s=e,this.i=rn(this.s)}));function un(e){return function(e){return this instanceof sn?sn.call(this,e):new sn(e)}(e)}function cn(e){return vt((function(e){return e.MoveNext()?[e.Current,e]:null}),un(e))}Object.defineProperty(sn.prototype,"Current",{get:function(){return on(this.i)}}),sn.prototype.MoveNext=function(){return function(e){if(e.started){const t=e.stack;if(null==t.tail)return!1;if(1===t.head.tag)return e.stack=nn(t.tail),!(null==e.stack.tail);throw new Error("Please report error: Map iterator, unexpected stack for moveNext")}return e.started=!0,!(null==e.stack.tail)}(this.i)},sn.prototype.Reset=function(){this.i=rn(this.s)},sn.prototype.Dispose=function(){};const an=k((function(e,t){this.comparer=e,this.tree=t}));function fn(e){return e.tree}function ln(e,t){return Qt(e.comparer,t,e.tree)}function hn(e){return $t(e.tree)}function wn(e,t){return en(e.comparer,t,e.tree)}an.prototype.toString=function(){return"map ["+Wt("; ",yt((function(e){return zt(Lt("(%A, %A)"))(e[0])(e[1])}),this))+"]"},an.prototype.GetHashCode=function(){const e=function(e,t){return(e<<1)+t+631};let t=0;const n=un(fn(this));for(;n.MoveNext();){const r=n.Current;t=e(t,h(r[0])),t=e(t,h(r[1]))}return 0|Math.abs(t)},an.prototype.Equals=function(e){return 0===this.CompareTo(e)},an.prototype[Symbol.iterator]=function(){return lt(un(this.tree))},an.prototype.CompareTo=function(e){const t=this;let n=0,r=!1;const i=un(fn(t));try{const s=un(fn(e));try{for(;!r&&0===n;){const e=[i.MoveNext(),s.MoveNext()];if(e[0])if(e[1]){const e=i.Current,r=s.Current,o=0|t.comparer.Compare(e[0],r[0]);n=0!==o?o:M(e[1],r[1])}else n=1;else e[1]?n=-1:r=!0}return 0|n}finally{o(s)&&s.Dispose()}}finally{o(i)&&i.Dispose()}},Object.defineProperty(an.prototype,"size",{get:function(){return 0|hn(this)}}),an.prototype.clear=function(){throw new Error("Map cannot be mutated")},an.prototype.delete=function(e){throw new Error("Map cannot be mutated")},an.prototype.entries=function(){return cn(fn(this))},an.prototype.get=function(e){return ln(this,e)},an.prototype.has=function(e){return wn(this,e)},an.prototype.keys=function(){return yt((function(e){return e[0]}),cn(fn(this)))},an.prototype.set=function(e,t){throw new Error("Map cannot be mutated")},an.prototype.values=function(){return yt((function(e){return e[1]}),cn(fn(this)))};const dn=k((function(e,t){const n=new F(null);this.comparer=t,n.contents=this,this.hashMap=new Map([]),this["init@21-2"]=1,pt((function(e){yn(n.contents,e)}),e)}));function gn(e,t){const n=0|e.comparer.GetHashCode(t),r=i(e.hashMap,n,null);return r[0]?[!0,n,r[1].findIndex((function(n){return e.comparer.Equals(t,n)}))]:[!1,n,-1]}function pn(e){e.hashMap.clear()}function mn(e){return 0|Mt((function(e){return e.length}),e.hashMap.values(),{GetZero:()=>0,Add:(e,t)=>e+t})}function yn(e,t){const n=gn(e,t);switch(n[0]&&n[2]>-1?0:1){case 0:return!1;case 1:if(n[0]){Rn(t,G(e.hashMap,n[1]));return!0}return e.hashMap.set(n[1],[t]),!0}}function Sn(e,t){const n=gn(e,t);switch(n[0]&&n[2]>-1?0:1){case 0:return!0;case 1:return!1}}function Mn(e,t){const n=gn(e,t);switch(n[0]&&n[2]>-1?0:1){case 0:return G(e.hashMap,n[1]).splice(n[2],1),!0;case 1:return!1}}dn.prototype[Symbol.iterator]=function(){const e=this;return lt(ft(dt((function(){return wt((function(e){return yt((function(e){return e}),e)}),e.hashMap.values())}))))},dn.prototype.Add=function(e){yn(this,e)},dn.prototype.Clear=function(){pn(this)},dn.prototype.Contains=function(e){return Sn(this,e)},dn.prototype.CopyTo=function(e,t){mt((function(n,r){e[t+n]=r}),this)},Object.defineProperty(dn.prototype,"Count",{get:function(){return 0|mn(this)}}),Object.defineProperty(dn.prototype,"IsReadOnly",{get:function(){return!1}}),dn.prototype.Remove=function(e){return Mn(this,e)},Object.defineProperty(dn.prototype,"size",{get:function(){return 0|mn(this)}}),dn.prototype.add=function(e){yn(this,e);return this},dn.prototype.add_=function(e){return yn(this,e)},dn.prototype.clear=function(){pn(this)},dn.prototype.delete=function(e){return Mn(this,e)},dn.prototype.has=function(e){return Sn(this,e)},dn.prototype.keys=function(){return yt((function(e){return e}),this)},dn.prototype.values=function(){return yt((function(e){return e}),this)},dn.prototype.entries=function(){return yt((function(e){return[e,e]}),this)};const vn=k((function(e,t,...n){O.call(this,e,t,...n)}),O);function Pn(e){return new vn(2,"SetOne",e)}function bn(e,t,n,r){return new vn(1,"SetNode",e,t,n,r)}const Tn=k((function(e,t){this.stack=e,this.started=t}),z);function Cn(e){for(;;){const t=e;if(null==t.tail)return new D;if(2===t.head.tag)return t;1!==t.head.tag?e=t.tail:e=new D(t.head.fields[1],new D(Pn(t.head.fields[0]),new D(t.head.fields[2],t.tail)))}}function Nn(e){return new Tn(Cn(new D(e,new D)),!1)}function Gn(e){if(e.started){const t=e.stack;if(null==t.tail)return function(){throw new Error("Enumeration already started")}();if(2===t.head.tag)return t.head.fields[0];throw new Error("Please report error: Set iterator, unexpected stack for current")}return function(){throw new Error("Enumeration not started")}()}const In=k((function(e){this.s=e,this.i=Nn(this.s)}));function kn(e){return function(e){return this instanceof In?In.call(this,e):new In(e)}(e)}function En(e,t,n){return 0===t.tag?0===n.tag?0:-1:0===n.tag?1:0|function(e,t,n){e:for(;;){const H=e,W=t,U=n;var r,o,i,s,u,c,a,f,l,h,w,d,g,p,m,y,S,M,v,P,b,T,C,N,G,I,k,E,x,O,A,R,L,z,F,B;switch(null!=W.tail?null!=U.tail?2===U.head.tag?2===W.head.tag?(r=4,s=W.head.fields[0],u=U.head.fields[0],c=W.tail,a=U.tail):1===W.head.tag?0===W.head.fields[1].tag?(r=6,g=W.head.fields[1],p=W.head.fields[0],m=W.head.fields[2],y=U.head.fields[0],S=W.tail,M=U.tail):(r=9,k=W.head.fields[0],E=W.head.fields[1],x=W.head.fields[2],O=W.tail):(r=10,A=U.head.fields[0],R=U.tail):1===U.head.tag?0===U.head.fields[1].tag?2===W.head.tag?(r=5,f=W.head.fields[0],l=U.head.fields[0],h=U.head.fields[2],w=W.tail,d=U.tail):1===W.head.tag?0===W.head.fields[1].tag?(r=7,v=W.head.fields[0],P=W.head.fields[2],b=U.head.fields[0],T=U.head.fields[2],C=W.tail,N=U.tail):(r=9,k=W.head.fields[0],E=W.head.fields[1],x=W.head.fields[2],O=W.tail):(r=11,L=U.head.fields[0],z=U.head.fields[1],F=U.head.fields[2],B=U.tail):2===W.head.tag?(r=8,G=W.head.fields[0],I=W.tail):1===W.head.tag?(r=9,k=W.head.fields[0],E=W.head.fields[1],x=W.head.fields[2],O=W.tail):(r=11,L=U.head.fields[0],z=U.head.fields[1],F=U.head.fields[2],B=U.tail):2===W.head.tag?(r=8,G=W.head.fields[0],I=W.tail):1===W.head.tag?(r=9,k=W.head.fields[0],E=W.head.fields[1],x=W.head.fields[2],O=W.tail):(r=3,o=W.tail,i=U.tail):r=2:r=null!=U.tail?1:0,r){case 0:return 0;case 1:return-1;case 2:return 1;case 3:e=H,t=o,n=i;continue e;case 4:{const r=0|H.Compare(s,u);if(0!==r)return 0|r;e=H,t=c,n=a;continue e}case 5:{const r=0|H.Compare(f,l);if(0!==r)return 0|r;e=H,t=new D(new vn(0,"SetEmpty"),w),n=new D(h,d);continue e}case 6:{const r=0|H.Compare(p,y);if(0!==r)return 0|r;e=H,t=new D(m,S),n=new D(g,M);continue e}case 7:{const r=0|H.Compare(v,b);if(0!==r)return 0|r;e=H,t=new D(P,C),n=new D(T,N);continue e}case 8:e=H,t=new D(new vn(0,"SetEmpty"),new D(Pn(G),I)),n=U;continue e;case 9:e=H,t=new D(E,new D(bn(k,new vn(0,"SetEmpty"),x,0),O)),n=U;continue e;case 10:e=H,t=W,n=new D(new vn(0,"SetEmpty"),new D(Pn(A),R));continue e;case 11:e=H,t=W,n=new D(z,new D(bn(L,new vn(0,"SetEmpty"),F,0),B));continue e}break}}(e,new D(t,new D),new D(n,new D))}Object.defineProperty(In.prototype,"Current",{get:function(){return Gn(this.i)}}),In.prototype.MoveNext=function(){return function(e){if(e.started){const t=e.stack;if(null==t.tail)return!1;if(2===t.head.tag)return e.stack=Cn(t.tail),!(null==e.stack.tail);throw new Error("Please report error: Set iterator, unexpected stack for moveNext")}return e.started=!0,!(null==e.stack.tail)}(this.i)},In.prototype.Reset=function(){this.i=Nn(this.s)},In.prototype.Dispose=function(){};const xn=k((function(e,t){this.comparer=e,this.tree=t}));function Dn(e){return e.comparer}function On(e){return e.tree}xn.prototype.toString=function(){return"set ["+Wt("; ",yt((function(e){return String(e)}),this))+"]"},xn.prototype.GetHashCode=function(){let e=0;const t=kn(On(this));for(;t.MoveNext();){e=((0|e)<<1)+(0|h(t.Current))+631}return 0|Math.abs(e)},xn.prototype.Equals=function(e){return 0===En(Dn(this),On(this),On(e))},xn.prototype.CompareTo=function(e){return 0|En(Dn(this),On(this),On(e))},xn.prototype[Symbol.iterator]=function(){return lt(kn(On(this)))};function An(e,t,n,r){return e.fill(r,t,t+n),e}function Rn(e,t){t.push(e)}function Ln(e,t){return t.from(e)}function zn(e,t,n){return function(e,t,n,r){for(;;){const o=e,i=t,s=n,u=r;if(null==u.tail)return s;e=o,t=i+1,n=o(i,s,u.head),r=u.tail}}(e,0,t,n)}function Fn(e,t,n){for(;;){const r=e,o=t,i=n;if(null==i.tail)return o;e=r,t=r(o,i.head),n=i.tail}}function Bn(e){return Fn((function(e,t){return new D(t,e)}),new D,e)}function Hn(e){return Bn(gt((function(e,t){return new D(t,e)}),new D,e))}function Wn(e){return Fn((function(e,t){return e+1}),0,e)}function Un(e,t){return Bn(Fn((function(t,n){return new D(e(n),t)}),new D,t))}function jn(e,t){return Bn(zn((function(t,n,r){return new D(e(t,r),n)}),new D,t))}function _n(e,t){Fn((function(t,n){e(n)}),null,t)}function Kn(e,t){zn((function(t,n,r){e(t,r)}),null,t)}function qn(e){let t=new D;for(let n=function(e){if(r(e))return e.length;{let t=0;for(const n of e)t++;return t}}(e)-1;n>=0;n--)t=new D(e[n],t);return t}function Jn(e,t){return function(e,t,n){e:for(;;){const r=e,o=t,i=n;if(null!=i.tail){const s=r(o,i.head);if(null==s){e=r,t=o+1,n=i.tail;continue e}return s}return null}}(e,0,t)}function Xn(e,t){return Jn((function(t,n){return e(t,n)?$(n):null}),t)}function Yn(e,t){return Jn((function(t,n){return e(n)?$(n):null}),t)}function Zn(e,t){const n=Xn(e,t);if(null!=n){return Q(n)}throw new Error("List did not contain any matching elements")}function Vn(e,t){return Zn((function(t,n){return e===t}),t)}function $n(e,t){if(null!=t.tail)return Fn(e,t.head,t.tail);throw new Error("List was empty")}function Qn(e,t){return Fn((function(t,n){return!!t&&e(n)}),!0,t)}function er(e,t){for(;;){const n=e,r=t;if(null==r.tail)return!1;if(n(r.head))return!0;e=n,t=r.tail}}function tr(e,t,n){let r;const o=Ln(t,Array);return o.sort((function(t,r){return-1*n.Compare(e(t),e(r))})),r=o,qn(r)}const nr=k((function(e,t,...n){O.call(this,e,t,...n)}),O);const rr=k((function(e,t,n,r){this.ImageFileName=e,this.ImageTransparency=t,this.ImageWidth=n,this.ImageHeight=r}),z);const or=k((function(e,t,...n){O.call(this,e,t,...n)}),O);const ir=k((function(e,t,...n){O.call(this,e,t,...n)}),O);const sr=k((function(e,t){this.ImageMetadata=e,this.HostImageRef=t}),z);const ur=k((function(e,t){this.FontImageMetadata=e,this.FontCharWidth=0|t}),z);const cr=k((function(e,t,...n){O.call(this,e,t,...n)}),O);const ar=k((function(e,t,n,r,o,i,s){this.FontImage=e,this.MagnifyX=0|t,this.MagnifyY=0|n,this.SrcCharWidth=0|r,this.SrcCharHeight=0|o,this.CharWidth=0|i,this.CharHeight=0|s}),z);const fr=k((function(e,t,...n){O.call(this,e,t,...n)}),O);const lr=k((function(e,t,...n){O.call(this,e,t,...n)}),O);const hr=k((function(e){this.SoundFileName=e}),z);const wr=k((function(e,t,...n){O.call(this,e,t,...n)}),O);const dr=k((function(e,t,...n){O.call(this,e,t,...n)}),O);const gr=k((function(e,t){this.SoundMetadata=e,this.HostSoundRef=t}),z);const pr=k((function(e,t,...n){O.call(this,e,t,...n)}),O);function mr(e,t,n,r){return new rr(t,e,n,r)}const yr=new D((Sr="PacmanFont.png",Mr=296,vr=8,Pr=8,new ur(mr(new nr(1,"MagentaColourKeyImage"),Sr,Mr,Pr),vr)),new D);var Sr,Mr,vr,Pr;const br=qn([mr(new nr(0,"OpaqueImage"),"PacmanBackground.png",320,256),mr(new nr(1,"MagentaColourKeyImage"),"PacmanLevel1.png",544,16),mr(new nr(0,"OpaqueImage"),"PacmanBackground2.png",320,256),mr(new nr(0,"OpaqueImage"),"PacmanBackground3.png",320,256)]),Tr=qn([new hr("pellet.ogg"),new hr("pill.ogg"),new hr("321.ogg"),new hr("game-over.ogg"),new hr("go.ogg"),new hr("gulp.ogg"),new hr("oww.ogg"),new hr("victory.ogg"),new hr("life.ogg")]),Cr=k((function(e,t){this.NewPlayerName=e,this.NewPlayerScore=t}),z);const Nr=k((function(e,t,n){this.PlayerName=e,this.PlayerScore=t,this.PlayerScoreString=n}),z);function Gr(e){return e.PlayerScore}function Ir(e){let t;var n,r;return n=Gr,r={Compare:m},t=$n((function(e,t){return r.Compare(n(t),n(e))>0?t:e}),e),Gr(t)}function kr(e,t){if(g(e,new D))return!1;{let o,i;return n=Gr,r={Compare:m},i=$n((function(e,t){return r.Compare(n(t),n(e))>0?e:t}),e),o=Gr(i),t>=o}var n,r}function Er(e,t){if(kr(t,e.NewPlayerScore)){let n,r;return r=function(e,t,n){let r;const o=Ln(t,Array);return o.sort((function(t,r){return n.Compare(e(t),e(r))})),r=o,qn(r)}(Gr,new D(new Nr(e.NewPlayerName.trim(),e.NewPlayerScore,e.NewPlayerScore.toString()),t),{Compare:m}),n=function(e){if(null!=e.tail)return e.tail;throw new Error("List was empty")}(r),tr(Gr,n,{Compare:m})}return t}function xr(e,t){return Un((function(t){return function(e,t,n){const r=(0|e.length)+(0|t.length)+2|0;return r>n?"":e+" "+Ht(n-r|0,(function(e){return"."}))+" "+t}(t.PlayerName,t.PlayerScoreString,e)}),t)}const Dr=k((function(e,t){this.Score=e,this.HiScore=t}),z);const Or=k((function(e,t,n,r){this.Name=e,this.SelectorIndex=0|t,this.MaxNameLength=0|n,this.Complete=r}),z);const Ar=k((function(e,t,...n){O.call(this,e,t,...n)}),O);const Rr="ABCDEFGHIJKLMNOPQRSTUVWXYZ .X ";function Lr(e,t){const n=Rr.length-1|0,r=n-1|0;switch(e.tag){case 1:{const e=0|(t.SelectorIndex===n?0:t.SelectorIndex+1);return new Or(t.Name,e,t.MaxNameLength,t.Complete)}case 2:{const e=t.Name.length===t.MaxNameLength,n=e?t.Name:t.SelectorIndex===r?0===t.Name.length?t.Name:jt(t.Name,0,t.Name.length-1):t.Name+Rr[t.SelectorIndex];return new Or(n,t.SelectorIndex,t.MaxNameLength,e)}default:{const e=0|(0===t.SelectorIndex?n:t.SelectorIndex-1);return new Or(t.Name,e,t.MaxNameLength,t.Complete)}}}function zr(e,t){const n=0|e.length,r=t-(0|~~(n/2))|0,o=0|(r<0?r+n:r);return jt(e,o)+jt(e,0,o)}function Fr(e){return qn(["ENTER YOUR NAME","","",(t=e.Name,n=e.MaxNameLength,r=".",Ut(t,n,r,!0)),"",""," V",zr(Rr,e.SelectorIndex)]);var t,n,r}const Br=k((function(e,t){this.ptx=e,this.pty=t}),z);const Hr=k((function(e,t){this.modx=e,this.mody=t}),z);const Wr=k((function(e,t,n,r){this.Left=e,this.Top=t,this.Right=n,this.Bottom=r}),z);k((function(e,t){this.dimx=e,this.dimy=t}),z);function Ur(e,t){return!(M(e.Left,t.Right)>=0||M(e.Right,t.Left)<=0||M(e.Top,t.Bottom)>=0||M(e.Bottom,t.Top)<=0)}const jr=k((function(e,t,...n){O.call(this,e,t,...n)}),O);const _r=new jr(0,"MazeByte",0),Kr=new jr(0,"MazeByte",8),qr=new jr(0,"MazeByte",4),Jr=new jr(0,"MazeByte",2),Xr=new jr(0,"MazeByte",1),Yr=new jr(0,"MazeByte",16);function Zr(e,t){if(null!=t.tail){const n=0|Wn(t),r=0|t.head.length;return r>0&&Qn((function(e){return e.length===r}),t)?e(r,n):null}return null}function Vr(e,t,n,r,o){if(e>0&&t>0){const i=An(new Array(e*t),0,e*t,o);return function(e,t,n,r){var o,i,s,u;if(t>0&&n>0){const c=n-1|0,a=t-1|0,f=function(t,n,r){const o=[t<0?a:t>a?0:t,n<0?c:n>c?0:n];return e(o[0],o[1])?r:_r};let l;const h=Kr.fields[0]|Jr.fields[0];let w;l=new jr(0,"MazeByte",h);const d=qr.fields[0]|Xr.fields[0];w=new jr(0,"MazeByte",d);for(let t=0;t<=c;t++)for(let n=0;n<=a;n++)if(e(n,t)){const h=f(n-1,t,Kr),d=f(n,t-1,qr),p=f(n+1,t,Jr),m=f(n,t+1,Xr);let y;let S;let M;let v;let P,b,T;y=0===n&&g((o=d.fields[0]|m.fields[0],new jr(0,"MazeByte",o)),w)?_r:h,S=0===t&&g((i=h.fields[0]|p.fields[0],new jr(0,"MazeByte",i)),l)?_r:d,M=n===a&&g((s=d.fields[0]|m.fields[0],new jr(0,"MazeByte",s)),w)?_r:p,v=t===c&&g((u=h.fields[0]|p.fields[0],new jr(0,"MazeByte",u)),l)?_r:m;const C=v.fields[0]|S.fields[0];T=new jr(0,"MazeByte",C);const N=y.fields[0]|T.fields[0];b=new jr(0,"MazeByte",N);const G=M.fields[0]|b.fields[0];P=new jr(0,"MazeByte",G),r(n,t,g(P,_r)&&e(n,t)?Yr:P)}else r(n,t,_r)}}(n,e,t,(function(t,n,o){i[n*e+t]=r(o)})),i}return null}function $r(e,t,n,r){return Zr((function(o,i){return Vr(o,i,(function(t,n){return e(Vn(n,r)[t])}),t,n)}),r)}const Qr=k((function(e,t,...n){O.call(this,e,t,...n)}),O);function eo(e){switch(e.tag){case 2:return Jr;case 1:return qr;case 3:return Xr;default:return Kr}}function to(e){switch(e.tag){case 1:return 1;case 2:return 2;case 3:return 3;default:return 0}}function no(e){return 2===e.tag?new Hr(1,0):1===e.tag?new Hr(0,we(1)):3===e.tag?new Hr(0,1):new Hr(we(1),0)}const ro=k((function(e,t,n,r,o,i,s,u,c,a,f,l,h){this.Description=e,this.Turn90=0|t,this.Back90=0|n,this.Onward180=0|r,this.Back180=0|o,this.OnwardT=0|i,this.TurnAwayT=0|s,this.BackT=0|u,this.TurnIntoT=0|c,this.TurnBackT=0|a,this.Onward4=0|f,this.Turn4=0|l,this.Back4=0|h}),z);const oo=k((function(e,t,...n){O.call(this,e,t,...n)}),O);const io=k((function(e,t,n,r){this.PCLeft=e,this.PCUp=t,this.PCRight=n,this.PCDown=r}),z);const so=k((function(e,t,...n){O.call(this,e,t,...n)}),O);function uo(e,t){const n=0|(1===t.tag||2===t.tag?1:3===t.tag?e.Turn90:4===t.tag?e.Back90:5===t.tag?e.Onward180:6===t.tag?e.Back180:7===t.tag?e.OnwardT:8===t.tag?e.TurnAwayT:9===t.tag?e.BackT:10===t.tag?e.TurnIntoT:11===t.tag?e.TurnBackT:12===t.tag?e.Onward4:13===t.tag?e.Turn4:14===t.tag?e.Back4:0),r=255&n;if(~~r!==n)throw new Error("Out of range probability value -- must fit a byte");return new so(0,"DirectionProbability",r)}const co=k((function(e,t,n,r){this.ProbLeft=e,this.ProbUp=t,this.ProbRight=n,this.ProbDown=r}),z);const ao=new co(new so(0,"DirectionProbability",1),new so(0,"DirectionProbability",0),new so(0,"DirectionProbability",0),new so(0,"DirectionProbability",0)),fo=new co(new so(0,"DirectionProbability",0),new so(0,"DirectionProbability",1),new so(0,"DirectionProbability",0),new so(0,"DirectionProbability",0)),lo=new co(new so(0,"DirectionProbability",0),new so(0,"DirectionProbability",0),new so(0,"DirectionProbability",1),new so(0,"DirectionProbability",0)),ho=new co(new so(0,"DirectionProbability",0),new so(0,"DirectionProbability",0),new so(0,"DirectionProbability",0),new so(0,"DirectionProbability",1));function wo(e){return new co(new so(0,"DirectionProbability",0===e.ProbLeft.fields[0]?0:P(m,~~(e.ProbLeft.fields[0]/4),1)),e.ProbUp,e.ProbRight,e.ProbDown)}function go(e){const t=new so(0,"DirectionProbability",0===e.ProbUp.fields[0]?0:P(m,~~(e.ProbUp.fields[0]/4),1));return new co(e.ProbLeft,t,e.ProbRight,e.ProbDown)}function po(e){const t=new so(0,"DirectionProbability",0===e.ProbRight.fields[0]?0:P(m,~~(e.ProbRight.fields[0]/4),1));return new co(e.ProbLeft,e.ProbUp,t,e.ProbDown)}function mo(e){const t=new so(0,"DirectionProbability",0===e.ProbDown.fields[0]?0:P(m,~~(e.ProbDown.fields[0]/4),1));return new co(e.ProbLeft,e.ProbUp,e.ProbRight,t)}const yo=k((function(e,t,...n){O.call(this,e,t,...n)}),O);function So(e,t,n,r){return 0==(1&~~(r*e+Math.fround(.5)))?t:n}function Mo(e,t){return 0==(1&~~(t*e+Math.fround(.5)))}k((function(e,t,...n){O.call(this,e,t,...n)}),O);const vo=k((function(e,t,...n){O.call(this,e,t,...n)}),O);const Po=k((function(e,t){this.ScoreAndHiScore=e,this.Lives=t}),z);const bo=Math.fround(12),To=Math.fround(4),Co=Math.fround(12),No=Math.fround(6),Go=Math.fround(5),Io=Math.fround(8),ko=Math.fround(2),Eo=Math.fround(32),xo=(Math.fround(3),Math.fround(3)),Do=Math.fround(4),Oo=Math.fround(3),Ao=Math.fround(6),Ro=Math.fround(5),Lo=Math.fround(8),zo=Math.fround(2);const Fo=k((function(e,t,...n){O.call(this,e,t,...n)}),O);function Bo(e,t){return function(e){switch(e){case 0:return new Fo(0,"ZeroAngle");case 1:return new Fo(1,"ClockwiseTurn90");case 2:return new Fo(2,"AboutTurn180");case 3:return new Fo(3,"AntiClockwiseTurn90");default:throw new Error("Invalid integer value for conversion to type Angle")}}(3&(to(e)-to(t)|0)|0)}const Ho=k((function(e,t,...n){O.call(this,e,t,...n)}),O);const Wo=k((function(e,t,...n){O.call(this,e,t,...n)}),O);const Uo=k((function(e,t,n,r){this.PacMode=e,this.PacFacingDirection=t,this.LivesLeft=n,this.PacStartPosition=r}),z);const jo=k((function(e,t){this.PacState2=e,this.PacPosition=t}),z);const _o=k((function(e,t,...n){O.call(this,e,t,...n)}),O);const Ko=k((function(e,t,n,r,o){this.GhostTag=e,this.GhostBasePosition=t,this.GhostFacingDirection=n,this.GhostMode=r,this.GhostAITable=o}),z);const qo=k((function(e,t){this.GhostState2=e,this.GhostPosition=t}),z);function Jo(e,t,n,r,o,i){if(o>0){let s;if(18===o){s=So(Math.fround(10),18,19,i)}else s=o;e(new vo(3,"DrawSubImageStretchedToTarget",16*(s-1),0,16,16,0|n,0|r,16,16,t))}}const Xo=k((function(e,t,...n){O.call(this,e,t,...n)}),O);function Yo(e,t,n,r,o,i){const s=0|(2===r.tag?20:1===r.tag?22:3===r.tag?23:21);let u;const c=function(e){return 0|So(Lo*e,s,s+4|0,i)};switch(o.tag){case 1:u=c(Math.fround(2));break;case 2:u=s;break;default:u=c(Math.fround(1))}Jo(e,t,n.ptx,n.pty,u,i)}function Zo(e,t,n,r,o,i){let s;const u=r.fields[0]+28|0;switch(o.tag){case 1:s=o.fields[0]-i<To?So(Co,u,35,i):So(No,34,35,i);break;case 2:s=35;break;case 3:s=So(Io,35,u,i);break;default:s=u}let c;Jo(e,t,n.ptx,n.pty,s,i),c=So(zo*(r.fields[0]+1),32,33,i),Jo(e,t,n.ptx,n.pty,c,i)}Math.fround(320),Math.fround(256);const Vo=new cr(0,"FontID",0),$o=new or(0,"ImageID",0),Qo=new or(0,"ImageID",1),ei=new or(0,"ImageID",2),ti=new or(0,"ImageID",3),ni=new wr(0,"SoundID",0),ri=new wr(0,"SoundID",1),oi=new wr(0,"SoundID",2),ii=new wr(0,"SoundID",3),si=new wr(0,"SoundID",4),ui=new wr(0,"SoundID",5),ci=new wr(0,"SoundID",6),ai=new wr(0,"SoundID",7),fi=new wr(0,"SoundID",8),li=k((function(e,t){this.pos=e,this.direction=t}),z);const hi=k((function(e,t){this.pos=e,this.number=t}),z);function wi(e,t,n,r){Yo(e,t,r.pos,r.direction,new Xo(0,"DrawPacNormal"),n)}function di(e,t,n,r){Zo(e,t,r.pos,r.number,new _o(0,"GhostNormal"),n)}function gi(e,t,n){let r,o;r=~~(320*t/100),o=~~(256*n/100);return new li(new Br(r-8,o-8),e)}function pi(e,t,n){let r,o;r=~~(320*t/100),o=~~(256*n/100);return new hi(new Br(r-8,o-8),e)}const mi=k((function(){}));function yi(){return this instanceof mi?mi.call(this):new mi}const Si=k((function(e,t,n,r){yi.call(this),this["Model@"]=e,this["DrawFunc@"]=t,this["FrameFunc@"]=n,this["SoundEffectCommands@"]=r}),mi);function Mi(e,t,n,r){return this instanceof Si?Si.call(this,e,t,n,r):new Si(e,t,n,r)}function vi(e){return e["Model@"]}function Pi(e){return C(3,e["DrawFunc@"])}function bi(e){return C(4,e["FrameFunc@"])}function Ti(e){return e["SoundEffectCommands@"]}function Ci(e){return null==Ti(e).tail?e:Mi(vi(e),T(3,Pi(e)),T(4,bi(e)),new D)}function Ni(e,t,n,r){return Ci(e)}function Gi(e,t){return Mi(null,(function(e,n,r){t.Draw(e,r)}),(function(e,n,r,o){return t.Frame(n,r,o)}),e)}Si.prototype.Draw=function(e,t){Pi(this)(e)(vi(this))(t)},Si.prototype.Frame=function(e,t,n){return bi(this)(this)(e)(t)(n)},Si.prototype.Sounds=function(){return Ti(this)};const Ii=b([]),ki=b([]),Ei=b([]);function xi(e,t,n,r){return e(new vo(0,"DrawImageWithTopLeftAtInt",t,n,r))}function Di(e,t,n,r,o){const i=~~r*o.SrcCharWidth|0;return e(new vo(3,"DrawSubImageStretchedToTarget",i,0,o.SrcCharWidth,o.SrcCharHeight,t,n,o.CharWidth,o.CharHeight,o.FontImage))}function Oi(e,t,n,r,o,i,s){!function(e,t,n,r,o,i,s,u){const c=function(e){return e.length*t};let a=0|(1===s.tag?r-~~(c(i)/2):2===s.tag?r-c(i):r);const f=0|(1===u.tag?o-~~(n/2):2===u.tag?o-n:o);pt((function(n){const r=function(t){e(t,a,f)};n>="0"&&n<="9"?r(n.charCodeAt(0)-48):n>="A"&&n<="Z"?r(n.charCodeAt(0)-55):n>="a"&&n<="z"?r(n.charCodeAt(0)-87):"."===n&&r(36),a+=t}),i.split(""))}((function(n,r,o){Di(e,r,o,n>>>0,t)}),t.CharWidth,t.CharHeight,o,i,s,n,r)}function Ai(e,t,n,r,o,i,s){Oi(e,ki()[t.fields[0]],n,r,o,i,s)}function Ri(e,t,n,r,o,i,s,u){!function(e,t,n,r,o,i,s,u){if(null==u.tail);else{let c;c=t.CharHeight;const a=0|P(m,c,s),f=(Wn(u)-1)*a+c|0,l=0|(1===r.tag?i-~~(f/2):2===r.tag?i-f:i);Kn((function(r,i){const s=l+a*r|0;Oi(e,t,n,new lr(0,"TopAlign"),o,s,i)}),u)}}(e,ki()[t.fields[0]],n,r,o,i,s,u)}const Li=new X(0,"WebBrowserKeyCode",38),zi=new X(0,"WebBrowserKeyCode",40),Fi=new X(0,"WebBrowserKeyCode",37),Bi=new X(0,"WebBrowserKeyCode",39),Hi=new X(0,"WebBrowserKeyCode",90),Wi=k((function(e,t,n,r,o,i){this.Scoreboard=e,this.ScoreAndHiScore=t,this.EnterYourNameModel=n,this.MemoizedText=r,this.PacMemo=o,this.WhereToAfterCtor=i}),z);function Ui(e,t,n){let r,o;r=Ii()[$o.fields[0]],xi(e,0,0,r),o=Ii()[Qo.fields[0]],wi(e,o,n,t.PacMemo),Ri(e,Vo,new fr(1,"CentreAlign"),new lr(1,"MiddleAlign"),160,100,10,t.MemoizedText)}function ji(e,t,n,r){const o=vi(e),i=function(e,t){const n=t(Hi),r=t(Fi),o=t(Bi);return n.JustDown?Lr(new Ar(2,"SelectLetter"),e):r.JustDown?Lr(new Ar(0,"RotateLeft"),e):o.JustDown?Lr(new Ar(1,"RotateRight"),e):null}(o.EnterYourNameModel,t);if(null!=i){const t=i;if(t.Complete){let e;s=t,u=o.ScoreAndHiScore.Score,c=o.Scoreboard,e=Er(new Cr(s.Name,u),c);const r=o.WhereToAfterCtor(e,n);return Gi(new D(new pr(0,"PlaySoundEffect",Ei()[ai.fields[0]]),new D),r)}{const n=new Wi(o.Scoreboard,o.ScoreAndHiScore,t,Fr(t),o.PacMemo,o.WhereToAfterCtor),r=new D(new pr(0,"PlaySoundEffect",Ei()[ni.fields[0]]),new D),i=bi(e);return Mi(n,T(3,Pi(e)),T(4,i),r)}}return Ci(e);var s,u,c}function _i(e,t,n,r){if(kr(t,e.Score)){const r=new Or("",0,10,!1);let o,i;return i=Fr(r),o=new Wi(t,e,r,i,gi(new Qr(2,"FacingRight"),50,15),n),Mi(o,Ui,ji,new D)}return n(t,r)}const Ki=k((function(e,t,n,r,o){this.BackgroundImage=e,this.Font=t,this.MessageText=n,this.ScreenWidthInt=r,this.ScreenHeightInt=o}),z);function qi(e,t,n){xi(e,0,0,t.BackgroundImage),Oi(e,t.Font,new fr(1,"CentreAlign"),new lr(1,"MiddleAlign"),~~(t.ScreenWidthInt/2),~~(t.ScreenHeightInt/2),t.MessageText)}function Ji(e,t,n,r,o){return Mi(new Ki(e,t,n,r,o),qi,Ni,new D)}const Xi=k((function(e,t,n,r){this.FrozenGameState=e,this.TimeFiddler=t,this.UnfreezeGameTime=n,this.PostFreezeCtor=r}),z);function Yi(e,t,n){const r=t.TimeFiddler(n);t.FrozenGameState.Draw(e,r)}function Zi(e,t,n,r){const o=vi(e);return n<o.UnfreezeGameTime?Ci(e):o.PostFreezeCtor((i=o.FrozenGameState,Mi(null,(function(e,t,n){i.Draw(e,n)}),Ni,new D)),n);var i}function Vi(e){return function(t){return function(t){return e(t)}}}function $i(e,t,n,r){return Mi(new Xi(r,(function(e){return t}),t+e,n),Yi,Zi,new D)}function Qi(e,t,n,r){return Mi(new Xi(r,(function(e){return e}),t+e,n),Yi,Zi,new D)}const es=k((function(e,t,n,r,o,i,s,u,c){this.ScoreAndHiScore=e,this.ScoreText=t,this.HiScoreText=n,this.PacLeftMemo=r,this.PacRightMemo=o,this.Ghost0Memo=i,this.Ghost1Memo=s,this.Ghost2Memo=u,this.Ghost3Memo=c}),z);function ts(e,t,n){let r;r=Ii()[ti.fields[0]],xi(e,0,0,r);const o=function(t,n){Ai(e,Vo,new fr(1,"CentreAlign"),new lr(1,"MiddleAlign"),160,~~(256*t/100),n)};let i;i=Ii()[Qo.fields[0]];const s=function(t){wi(e,i,n,t)},u=function(t){di(e,i,n,t)};o(20,"PAC MAN"),o(30,"GAME OVER"),o(45,t.ScoreText),o(55,t.HiScoreText),s(t.PacRightMemo),s(t.PacLeftMemo),u(t.Ghost0Memo),u(t.Ghost1Memo),u(t.Ghost2Memo),u(t.Ghost3Memo)}const ns=k((function(e,t,...n){O.call(this,e,t,...n)}),O);function rs(e){const t=(e.fields[0]^e.fields[0]<<13>>>0)>>>0,n=(t^t>>>17)>>>0;return new ns(0,"XorShift32State",(n^n<<5>>>0)>>>0)}const os=k((function(e,t,...n){O.call(this,e,t,...n)}),O);function is(e,t,n,r,o){const i=(n.ptx-t.ptx)/o,s=(n.pty-t.pty)/o;return function(n){const u=n-r;if(u>=Math.fround(0)){if(u<=o){const n=e(u,o),r=t.ptx+i*n,c=t.pty+s*n;return new os(1,"MOMVisibleAtPosition",new Br(r,c))}return new os(2,"MOMDisappeared")}return new os(0,"MOMYetToAppear")}}k((function(e,t,n,r){this.PositionGetter=e,this.StartPosition=t,this.FinalPosition=n,this.EndGameTime=r}),z);function ss(e,t){return function(n){return t(1===n.tag?new vo(1,"DrawFilledRectangle",n.fields[0]+e.ptx,n.fields[1]+e.pty,n.fields[2],n.fields[3],n.fields[4]):2===n.tag?new vo(2,"DrawStretchedImageWithTopLeftAt",e.ptx+(0|~~(n.fields[0]+Math.fround(.5)))|0,e.pty+(0|~~(n.fields[1]+Math.fround(.5)))|0,n.fields[2],n.fields[3],n.fields[4]):3===n.tag?new vo(3,"DrawSubImageStretchedToTarget",n.fields[0],n.fields[1],n.fields[2],n.fields[3],e.ptx+(0|~~(n.fields[4]+Math.fround(.5)))|0,e.pty+(0|~~(n.fields[5]+Math.fround(.5)))|0,n.fields[6],n.fields[7],n.fields[8]):new vo(0,"DrawImageWithTopLeftAtInt",n.fields[0]+e.ptx,n.fields[1]+e.pty,n.fields[2]))}}const us=k((function(e,t,...n){O.call(this,e,t,...n)}),O);const cs=k((function(e,t){this.SecondScreenRelativePosition=e,this.PositionFunction=t}),z);const as=k((function(e,t,n){this.SlideTransitionModel2=e,this.FromScreenState=t,this.ToScreenState=n}),z);function fs(e,t,n){const r=t.SlideTransitionModel2.PositionFunction(n);switch(r.tag){case 1:{let o;const i=function(e){let t;return t=~~(e+Math.fround(.5)),0|t};let s,u,c;o=new Br(i(r.fields[0].ptx),i(r.fields[0].pty)),s=ss(o,e),t.FromScreenState.Draw(s,n),c=new Br(o.ptx+t.SlideTransitionModel2.SecondScreenRelativePosition.ptx,o.pty+t.SlideTransitionModel2.SecondScreenRelativePosition.pty),u=ss(c,e),t.ToScreenState.Draw(u,n);break}}}function ls(e,t,n,r){const o=vi(e);if(2===o.SlideTransitionModel2.PositionFunction(n).tag)return o.ToScreenState;{let i,s;i=o.FromScreenState.Frame(t,n,r),s=o.ToScreenState.Frame(t,n,r);const u=new as(o.SlideTransitionModel2,i,s),c=bi(e);return Mi(u,T(3,Pi(e)),T(4,c),new D)}}function hs(e,t,n,r,o,i,s,u){const c=function(e,t,n){switch(e.tag){case 1:return new Br(0,n);case 2:return new Br(we(t),0);case 3:return new Br(t,0);default:return new Br(0,we(n))}}(n,r,o),a=new Br(Math.fround(0),Math.fround(0));let f,l;l=new Br(we(c.ptx),we(c.pty));f=new Br(l.ptx,l.pty);const h=new cs(c,is(i,a,f,u,s));return Mi(new as(h,e,t),fs,ls,new D)}function ws(){return Mi(null,(function(e,t,n){!function(e,t,n){const r=[160,85];Ai(e,Vo,new fr(1,"CentreAlign"),new lr(1,"MiddleAlign"),r[0],r[1],"GET READY")}(e)}),Ni,new D)}const ds=k((function(e,t,n){this.GameTimeLie=e,this.FrozenGameState=t,this.Overlay=n}),z);function gs(e,t,n){t.FrozenGameState.Draw(e,t.GameTimeLie),t.Overlay.Draw(e,n)}function ps(e,t,n,r){const o=vi(e);let i;i=o.Overlay.Frame(t,n,r);const s=new ds(o.GameTimeLie,o.FrozenGameState,i),u=bi(e);return Mi(s,T(3,Pi(e)),T(4,u),new D)}function ms(e,t,n,r){let o;return o=$i(n,r,(function(t,n){const r=e(n);return Gi(new D(new pr(0,"PlaySoundEffect",Ei()[si.fields[0]]),new D),r)}),Mi(new ds(r,e(r),t),gs,ps,new D)),Gi(new D(new pr(0,"PlaySoundEffect",Ei()[oi.fields[0]]),new D),o)}const ys=k((function(e,t,...n){O.call(this,e,t,...n)}),O);const Ss=k((function(e,t,n,r,o){this.MazeTilesCountX=0|e,this.MazeTilesCountY=0|t,this.MazeTiles=n,this.MazeGhostRails=r,this.MazePlayersRails=o}),z);const Ms=[qn(["####################","#@................@#","#.####.######.####.#","#.####.######.####.#","#..................#","#.##.##.####.##.##.#","#.##.##.:12:.##.##.#","#.......:34:.......#","#.##.##.:  :.##.##.#","#.##.##.####.##.##.#","#..................#","#.##.##########.##.#","#.##.##########.##.#","#@....0...........@#","####################"]),qn(["#####.########.#####","#@................@#","#.###.##.##.##.###.#","#.###.##.##.##.###.#","#.##.....##.....##.#","#....##.####.##....#","#.##.##.:12:.##.##.#","#.##....:34:....##.#","#.##.##.:  :.##.##.#","#....##.####.##....#","#.##.....##.....##.#","#.###.##.##.##.###.#","#.###.##.##.##.###.#","#@......0.........@#","#####.########.#####"]),qn(["#########  #########","#@......####......@#","#.##.##......##.##.#","#.##.##.####.##.##.#","#..................#","###.#.#.####.#.##.##","###.#.#.#12:.#.##.##","........#34:........","###.#.#.#  :.#.##.##","###.#.#.####.#.##.##","#...0..............#","#.##.##.####.##.##.#","#.##.##......##.##.#","##......####......@#","#########  #########"]),qn(["#####.##.#####.#####","....................","#.###.###.#.##.#.#.#","#@###.###.#.##.#@#.#","#.###.#......#...#.#","#.###.#.####...###.#","......#.#12:.#......","#.###.#.#34:.###.###",".......0####...#....","#.###.#......#.#.###","#@###.##.#####.#...#","#..............#.#@#","########.#####.#.#.#","......##.#####......","#####.##.#####.#####"]),qn(["####################","#..@............@..#","#.###.##.##.##.###.#","#.#####......#####.#","#.......####.......#","###.###.#  #.###.###","....###.#12:.###....","###.....#34:.....###","....###0#  #.###....","###.###.#  #.###.###","#.......####.......#","#.#####......#####.#","#.###.##.##.##.###.#","#..@............@..#","####################"]),qn(["####################","#..................#","#.###.########.###.#","#@###..........###@#","#.###.#.####.#.###.#","#...#.#.#12:.#.#...#","#.#...#.#34:.#...#.#","..#.#.#.####.#.#.#..","#.#.#.#.####.#.#.#.#","#.#..............#.#","#.###.########.###.#","#@###...0......###@#","#.###.########.###.#","#..................#","####################"]),qn(["##.# #.##.##########","#..#.#............@#","#.##..#.#.##.#.#.#.#","#.###.#.#.##.......#","#@......#....#.#.#.#","#####.######.......#","#@..#...:12:.#.#.#.#","..#.#.#.:34:........","#..0....##########.#","##.###.#...@.......#","#...#..#.#.#######.#","#.#.#.##.#...#...#.#","#.#.#..#.#.#.#.#.#.#",".....#.#...#...#....","##.# #.##.##########"]),qn(["#####.########.#####","#####.##....##.#####","###......##......###","##.@#.#.####.#.#@.##","##.##..........##.##","......#.####.#......","####.##.#12:.##.####","####.##.#34:.##.####","......#0####.#......","##.##..........##.##","##.@#.#.####.#.#@.##","###......##......###","#####.##....##.#####","......########......","#####.########.#####"]),qn(["#####      #####.# #","##..########.....@.#","#.#..........#####.#","#...########....##.#","###.###......##.##.#","#.......####.##..#.#","#.##.##.#12:.###.#.#","#.##.##.#34:.###.#.#","#.##.##0####.###...#","#.##.##.####.....#.#","#.##.##......###.#.#","#.##....###.####.#.#","#@##.######......@.#","#...........####.#.#","#############  #.# #"]),qn(["####################","#..................#","#.#.############.#.#","#.#@............@#.#","#.###.#.####.#.###.#","#.....#.#12#.#.....#","#####.#.#34#.#.#####","....................","###.#.#.#.##.#.#.###","#.....#.#..#.#.....#","#.###.#.##.#.#.###.#","#..@#.#......#.#@..#","#.#.#.#.####.#.#.#.#","#.......0..........#","####################"]),qn(["  #.#######.####.#  ","  #......@#....#.#  ","#####.##.##.##.#.###","......##.##.##.#....","#####.......##.#####","#...#.#.#####...@..#","#.#.#.#..:12:.##.###","#@#.#.##.#34:.##.###","#.#...##.####.##...#","....#.##.........#..","#####.###.##.#######","    #...#.#......#  ","  ###.#.#.#.#.##.#  ","  #....0..#.#.@..#  ","  #.#######.####.#  "]),qn(["##.#        #.######","##.# ########....###","...# #......####.#..","#### ####.#.#......#","     #12:.#.###.####","     #34:.#.#.....@#","#########.#.##.#####","....................","########.##.########","..@.#.....#.#.......","###.#.#.#.#.#.######","#...#.#.@.#.#.#     ","#.###.#####.#.# ### ","#..##...0...#.# ### ","##.##########.#     "])],vs=k((function(e,t,n){this.UnpackedMazeState=e,this.UnpackedPacmanPosition=t,this.UnpackedGhostPositions=n}),z);const Ps=k((function(e,t,...n){O.call(this,e,t,...n)}),O);function bs(e,t){let n;if(n=Zr((function(n,r){let o=new Ps(1,"NotFound");return Kn((function(t,r){for(let i=0;i<=n-1;i++)if(r[i]===e)switch(o.tag){case 2:case 3:o=new Ps(3,"NotUnique");break;case 0:throw new Error("unexpected case");default:o=new Ps(2,"Found",i,t)}}),t),o}),t),null==n)return new Ps(0,"InvalidMaze");return n}const Ts=k((function(e,t,n,r){this.MostRecentScore=e,this.MostRecentHiScore=t,this.MostRecentLevelIndex=0|n,this.MostRecentLives=r}),z);const Cs=k((function(e,t,n,r,o){this.MostRecentStatusPanel=e,this.MemoizedScoreString=t,this.MemoizedHiScoreString=n,this.MemoizedLevelIndexString=r,this.MemoizedLivesString=o}),z);const Ns=k((function(e,t,n,r,o,i,s,u,c){this.Random=e,this.LevelIndex=0|t,this.ScoreAndHiScore=n,this.MazeState=r,this.PacmanState=o,this.GhostsState=i,this.MemoizedStatusPanelStrings=s,this.WhereToOnGameOver=u,this.WhereToOnAllEaten=c}),z);function Gs(e,t,n,r){return new Ts(e,t,n,r)}function Is(e){var t;return new Cs(e,zt(Lt("SCORE %d"))(e.MostRecentScore),zt(Lt("HISCORE %d"))(e.MostRecentHiScore),(t=e.MostRecentLevelIndex+1|0,zt(Lt("FRAME %d"))(t)),zt(Lt("LIVES %d"))(e.MostRecentLives))}function ks(e){if(function(e){const t=function(e){return e%16==0};return!!t(e.ptx)&&t(e.pty)}(e)){return[0|~~(e.ptx/16),0|~~(e.pty/16)]}return null}function Es(e,t){var n;return!g((n=eo(t),new jr(0,"MazeByte",n.fields[0]&e.fields[0])),_r)}function xs(e){return new Wr(e.ptx+5,e.pty+5,e.ptx+16-5,e.pty+16-5)}function Ds(e){return new Wr(e.ptx,e.pty,e.ptx+16,e.pty+16)}function Os(e,t){return new jo(new Uo(e,t.PacState2.PacFacingDirection,t.PacState2.LivesLeft,t.PacState2.PacStartPosition),t.PacPosition)}function As(e,t){return new qo(new Ko(t.GhostState2.GhostTag,t.GhostState2.GhostBasePosition,t.GhostState2.GhostFacingDirection,e,t.GhostState2.GhostAITable),t.GhostPosition)}function Rs(e,t){const n=16*e.MazeTilesCountX|0,r=16*e.MazeTilesCountY|0,o=0|(t.ptx<we(8)?t.ptx+n:t.ptx>=n-8?t.ptx-n:t.ptx),i=0|(t.pty<we(8)?t.pty+r:t.pty>=r-8?t.pty-r:t.pty);return new Br(o,i)}function Ls(e,t,n,r,o){let i;switch(o.tag){case 2:i=new Hr(1,0);break;case 1:i=new Hr(0,we(1));break;case 3:i=new Hr(0,1);break;default:i=new Hr(we(1),0)}const s=function(e){let t;return t=new Br(16*e.ptx,16*e.pty),Ds(t)};let u;return u=function(e,t){switch(e.tag){case 1:return new Wr(t.Left,t.Top,t.Right,t.Top);case 2:return new Wr(t.Right,t.Top,t.Right,t.Bottom);case 3:return new Wr(t.Left,t.Bottom,t.Right,t.Bottom);default:return new Wr(t.Left,t.Top,t.Left,t.Bottom)}}(o,s(r)),function(r,o,i){var u,c,a;e:for(;;){const f=r,l=o,h=i;let w;if(w=new Br(l.ptx+f.modx,l.pty+f.mody),w.ptx<0||w.pty<0||w.ptx>=e||w.pty>=t||(u=n[w.pty*e+w.ptx]).fields[0]>=1&&u.fields[0]<=16)return h;{const e=s(w);r=f,o=w,i=(a=h,new Wr(v(M,(c=e).Left,a.Left),v(M,c.Top,a.Top),P(M,c.Right,a.Right),P(M,c.Bottom,a.Bottom)));continue e}}}(i,r,u)}function zs(e,t,n,r){return[e-~~(16*n/2)|0,t-~~(16*r/2)|0]}function Fs(e,t,n,r,o,i){!function(e,t,n,r,o,i,s,u){const c=zs(n,r,o,i);for(let n=0;n<=i-1;n++){const r=c[1]+16*n|0;for(let i=0;i<=o-1;i++){const a=s[n*o+i];Jo(e,t,c[0]+16*i|0,r,~~a.fields[0],u)}}}(e,t,n,r,o.MazeTilesCountX,o.MazeTilesCountY,o.MazeTiles,i)}function Bs(e,t,n){let r,o;r=Ii()[$o.fields[0]],xi(e,0,0,r),o=Ii()[Qo.fields[0]];const i=[160,128],s=zs(i[0],i[1],t.MazeState.MazeTilesCountX,t.MazeState.MazeTilesCountY);let u,c,a,f;switch(Fs(e,o,i[0],i[1],t.MazeState,n),c=Rs(t.MazeState,t.PacmanState.PacPosition),u=new Br(c.ptx+s[0],c.pty+s[1]),a=t.PacmanState.PacState2.PacFacingDirection,f=t.PacmanState.PacState2.PacMode,f.tag){case 1:Mo(Eo,n)&&Yo(e,o,u,a,new Xo(2,"DrawPacZapped"),n);break;case 2:break;default:{const r=er((function(e){return 1===e.GhostState2.GhostMode.tag}),t.GhostsState)?new Xo(1,"DrawPacPillMode"):new Xo(0,"DrawPacNormal");Yo(e,o,u,a,r,n)}}Kn((function(r,i){let u,c,a,f;c=Rs(t.MazeState,i.GhostPosition),u=new Br(c.ptx+s[0],c.pty+s[1]),a=i.GhostState2.GhostTag,f=i.GhostState2.GhostMode,Zo(e,o,u,a,f,n)}),t.GhostsState),Ai(e,Vo,new fr(0,"LeftAlign"),new lr(0,"TopAlign"),20,2,t.MemoizedStatusPanelStrings.MemoizedScoreString),Ai(e,Vo,new fr(2,"RightAlign"),new lr(0,"TopAlign"),300,2,t.MemoizedStatusPanelStrings.MemoizedHiScoreString),Ai(e,Vo,new fr(0,"LeftAlign"),new lr(2,"BottomAlign"),20,254,t.MemoizedStatusPanelStrings.MemoizedLevelIndexString),Ai(e,Vo,new fr(2,"RightAlign"),new lr(2,"BottomAlign"),300,254,t.MemoizedStatusPanelStrings.MemoizedLivesString)}const Hs=k((function(e,t,...n){O.call(this,e,t,...n)}),O);function Ws(e,t,n){let r,o;switch(r=n.PacState2.PacFacingDirection,o=n.PacState2.PacMode,o.tag){case 1:case 2:return[new Hs(0,"EatenNothing"),n.PacPosition,r,0,new D];default:{const o=function(e){let t,n,r,o;return t=e(Li).Held,n=e(zi).Held,r=e(Fi).Held,o=e(Bi).Held,[t,n,r,o]}(e),f=(i=o[0],s=o[1],u=o[2],c=o[3],a=r,!0===i&&!1===s&&!1===u&&!1===c?new Qr(1,"FacingUp"):!1===i&&!0===s&&!1===u&&!1===c?new Qr(3,"FacingDown"):!1===i&&!1===s&&!0===u&&!1===c?new Qr(0,"FacingLeft"):!1===i&&!1===s&&!1===u&&!0===c?new Qr(2,"FacingRight"):a),l=Bo(f,r),h=ks(n.PacPosition);let w,d,g,p,m;switch(l.tag){case 2:w=f;break;case 3:case 1:if(null!=h){const e=0|h[1],n=0|h[0],o=e*t.MazeTilesCountX+n|0;w=Es(t.MazePlayersRails[o],f)?f:r}else w=r;break;default:w=f}if(null!=h){const e=0|h[1],n=0|h[0],r=e*t.MazeTilesCountX+n|0,o=t.MazeTiles[r];d=17===o.fields[0]?[new Hs(1,"EatenDot",r),10,new D(new pr(0,"PlaySoundEffect",Ei()[ni.fields[0]]),new D)]:18===o.fields[0]?[new Hs(2,"EatenPowerPill",r),250,new D(new pr(0,"PlaySoundEffect",Ei()[ri.fields[0]]),new D)]:[new Hs(0,"EatenNothing"),0,new D]}else d=[new Hs(0,"EatenNothing"),0,new D];const y=no(w);if(m=new Br(n.PacPosition.ptx+y.modx,n.PacPosition.pty+y.mody),p=Rs(t,m),null!=h){const e=0|h[1],r=0|h[0],o=e*t.MazeTilesCountX+r|0;g=Es(t.MazePlayersRails[o],w)?p:n.PacPosition}else g=p;return[d[0],g,w,d[1],d[2]]}}var i,s,u,c,a}function Us(e,t,n,r,o,i){let s;s=Ds(r.PacPosition);const u=function(r,i,u,c){if(function(e){const t=function(e){return e.fields[0]>0?1:0};return(0|t(e.ProbLeft))+(0|t(e.ProbUp))+(0|t(e.ProbRight))+(0|t(e.ProbDown))>1}(c)&&!g(function(e,t){switch(e.tag){case 1:return t.ProbUp;case 2:return t.ProbRight;case 3:return t.ProbDown;default:return t.ProbLeft}}(r,c),new so(0,"DirectionProbability",0))){let l;return l=Ls(t.MazeTilesCountX,t.MazeTilesCountY,t.MazeTiles,n,r),Ur(l,s)?i:(a=e,f=l,er((function(e){if(g(e.GhostState2.GhostTag,a.GhostState2.GhostTag))return!1;{let t;return t=Ds(e.GhostPosition),Ur(f,t)}}),o)?u(c):c)}return c;var a,f};return u(new Qr(3,"FacingDown"),ho,mo,u(new Qr(2,"FacingRight"),lo,po,u(new Qr(1,"FacingUp"),fo,go,u(new Qr(0,"FacingLeft"),ao,wo,i))))}function js(e,t,n,r,o,i){let s;s=e.GhostState2.GhostFacingDirection;const u=ks(e.GhostPosition);let c;if(null!=u){const i=0|u[1],f=0|u[0],l=i*t.MazeTilesCountX+f|0,h=t.MazeGhostRails[l];if(g(h,Yr))c=s;else{let u,l;u=function(e,t,n){let r;r=to(e);const o=r|~~(t.fields[0]-1)<<2|0;return n.fields[0][o]}(s,h,e.GhostState2.GhostAITable);const w=new Br(f,i);let d,p;switch(p=e.GhostState2.GhostMode,p.tag){case 0:d=Us(e,t,w,r,n,u);break;case 1:d=function(e,t,n,r){let o;o=Ds(n.PacPosition);const i=function(n,r){if(g(n,new so(0,"DirectionProbability",0)))return n;{const i=Ls(e.MazeTilesCountX,e.MazeTilesCountY,e.MazeTiles,t,r);return Ur(o,i)?new so(0,"DirectionProbability",0):n}};return new co(i(r.ProbLeft,new Qr(0,"FacingLeft")),i(r.ProbUp,new Qr(1,"FacingUp")),i(r.ProbRight,new Qr(2,"FacingRight")),i(r.ProbDown,new Qr(3,"FacingDown")))}(t,w,r,u);break;default:throw new Error("Should not be deciding direction for ghost in this state")}l=0==((a=d).ProbLeft.fields[0]|a.ProbUp.fields[0]|a.ProbDown.fields[0]|a.ProbRight.fields[0])?u:d;const m=function(e,t){const n=e.ProbLeft.fields[0],r=e.ProbUp.fields[0],o=e.ProbRight.fields[0],i=e.ProbDown.fields[0],s=n+r+o+i,u=t.fields[0]%s;if(0!==n&&u<n)return new Qr(0,"FacingLeft");if(0!==r&&u<n+r)return new Qr(1,"FacingUp");if(0!==i&&u<n+r+i)return new Qr(3,"FacingDown");if(0!==o&&u<n+r+i+o)return new Qr(2,"FacingRight");throw new Error("It should never be the case there are *no* exits from a decision point!")}(l,o);let y;y=eo(m),c=m}}else c=s;var a;let f,l;if(null!=u){const e=0|u[1],n=0|u[0],r=e*t.MazeTilesCountX+n|0;l=g(t.MazeGhostRails[r],Yr)}else l=!1;if(l)f=e.GhostPosition;else{let n;const r=no(c);n=new Br(e.GhostPosition.ptx+r.modx,e.GhostPosition.pty+r.mody),f=Rs(t,n)}return[f,c]}function _s(e){let t,n;var r,o,i,s;let u;return n=e.GhostState2.GhostBasePosition,r=n,o=e.GhostPosition,t=new Hr((i=r.ptx-o.ptx|0)>=1?1:i<=-1?-1:0,(s=r.pty-o.pty|0)>=1?1:s<=-1?-1:0),u=new Br(e.GhostPosition.ptx+t.modx,e.GhostPosition.pty+t.mody),[u,e.GhostState2.GhostFacingDirection]}function Ks(e,t,n,r,o){let i=n;return Un((function(n){return i=rs(i),function(e,t,n,r,o,i){var s,u,c;const a=[r.GhostPosition,r.GhostState2.GhostFacingDirection];let f,l;switch(l=r.GhostState2.GhostMode,l.tag){case 1:f=Mo(Math.fround(20),i)?js(r,e,t,n,o):[a[0],a[1]];break;case 2:f=_s(r);break;case 3:f=[a[0],a[1]];break;default:f=js(r,e,t,n,o)}return new qo((s=r.GhostState2.GhostTag,u=r.GhostState2.GhostBasePosition,c=r.GhostState2.GhostMode,new Ko(s,u,f[1],c,r.GhostState2.GhostAITable)),f[0])}(e,o,t,n,i,r)}),o)}function qs(e){var t,n;let r;return r=e.GhostState2.GhostBasePosition,new qo((t=new _o(0,"GhostNormal"),n=new Qr(1,"FacingUp"),new Ko(e.GhostState2.GhostTag,e.GhostState2.GhostBasePosition,n,t,e.GhostState2.GhostAITable)),r)}function Js(e){const t=Gs(e.ScoreAndHiScore.Score,e.ScoreAndHiScore.HiScore,e.LevelIndex,e.PacmanState.PacState2.LivesLeft);return new Ns(e.Random,e.LevelIndex,e.ScoreAndHiScore,e.MazeState,function(e){var t;let n;return n=e.PacState2.PacStartPosition,new jo((t=new Qr(2,"FacingRight"),new Uo(new Wo(0,"PacAlive"),t,e.PacState2.LivesLeft-1,e.PacState2.PacStartPosition)),n)}(e.PacmanState),Un(qs,e.GhostsState),Is(t),e.WhereToOnGameOver,e.WhereToOnAllEaten)}function Xs(e,t,n){var r,o,i;let s;switch(s=n.PacState2.PacMode,s.tag){case 1:{const e=new D;return[(r=t>=s.fields[0],i=new Wo(2,"PacDead"),o=function(e){return Os(i,e)},r?o(n):n),e]}case 2:return[n,new D];default:{let r,o,i,s;r=xs(n.PacPosition),u=r,i=er((function(e){let t;switch(t=e.GhostState2.GhostMode,t.tag){case 1:case 3:case 2:return!1;default:{let t;return t=xs(e.GhostPosition),Ur(u,t)}}}),e);const c=new Wo(1,"PacDyingUntil",t+ko);return s=function(e){return Os(c,e)},o=i?s(n):n,[o,1===o.PacState2.PacMode.tag?new D(new pr(0,"PlaySoundEffect",Ei()[ci.fields[0]]),new D):new D]}}var u}function Ys(e,t){let n;n=xs(e.PacPosition);const r=function(e,t){let n;switch(n=t.GhostState2.GhostMode,n.tag){case 2:case 3:return!1;case 1:{let n;return n=xs(t.GhostPosition),Ur(e,n)}default:return!1}};let o;var i,s,u;i=function(e){return r(n,e)?500:0},s=t,o=Fn((function(e,t){return u.Add(e,i(t))}),(u={GetZero:()=>0,Add:(e,t)=>e+t}).GetZero(),s);const c=o>0?new D(new pr(0,"PlaySoundEffect",Ei()[ui.fields[0]]),new D):new D;let a;const f=o>0;let l,h;const w=N(1,r,[n]);let d;const g=new _o(2,"GhostReturningToBase");return d=function(e){return As(g,e)},h=function(e){return w(e)?d(e):e},l=function(e){return Un(h,e)},a=f?l(t):t,[a,o,c]}function Zs(e,t,n,r){const o=vi(e),i=Ws(t,o.MazeState,o.PacmanState);let s;var u,c,a;let f,l,h,w;var d;let p,y;u=i[1],c=i[2],a=o.PacmanState,s=g(c,a.PacState2.PacFacingDirection)?new jo(a.PacState2,u):new jo(new Uo(a.PacState2.PacMode,c,a.PacState2.LivesLeft,a.PacState2.PacStartPosition),u),f=function(e,t){var n,r;switch(e.tag){case 1:case 2:n=1,r=e.fields[0];break;default:n=0}switch(n){case 0:return t;case 1:return t.MazeTiles[r]=new ys(0,"MazeTile",0),t}}(i[0],o.MazeState),d=n,w=Un((function(e){let t;var n,r;switch(t=e.GhostState2.GhostMode,t.tag){case 1:case 3:n=1,r=t.fields[0];break;case 2:n=2;break;default:n=0}switch(n){case 0:return e;case 1:{const t=d>=r;let n;const o=new _o(0,"GhostNormal");return n=function(e){return As(o,e)},t?n(e):e}case 2:{let t;const n=new _o(3,"GhostRegeneratingUntil",d+Go);return t=function(e){return As(n,e)},g(e.GhostPosition,e.GhostState2.GhostBasePosition)?t(e):e}}}),o.GhostsState),h=function(e,t,n){switch(e.tag){case 1:return n;case 2:return Un((function(e){let n;switch(n=e.GhostState2.GhostMode,n.tag){case 1:return As(new _o(1,"GhostEdibleUntil",t+bo),e);case 2:case 3:return e;default:return As(new _o(1,"GhostEdibleUntil",t+bo),e)}}),n);default:return n}}(i[0],n,w),l=Ks(f,s,o.Random,n,h),p=Xs(l,n,s),y=Ys(p[0],l);const S=i[3]+y[1];let M,v,b;M=function(e,t){if(0!==e){const n=t.Score+e;return new Dr(n,P(m,n,t.HiScore))}return t}(S,o.ScoreAndHiScore),v=function(e,t,n){var r;if(t>0){const o=0|~~((e.Score-t)/1e4);if((0|~~(e.Score/1e4))>o){return[new jo((r=n.PacState2.LivesLeft+1,new Uo(n.PacState2.PacMode,n.PacState2.PacFacingDirection,r,n.PacState2.PacStartPosition)),n.PacPosition),new D(new pr(0,"PlaySoundEffect",Ei()[fi.fields[0]]),new D)]}return[n,new D]}return[n,new D]}(M,S,p[0]);const C=Gs(M.Score,M.HiScore,o.LevelIndex,v[0].PacState2.LivesLeft);b=g(C,o.MemoizedStatusPanelStrings.MostRecentStatusPanel)?o.MemoizedStatusPanelStrings:Is(C);const N=new Ns(rs(o.Random),o.LevelIndex,M,f,v[0],y[0],b,o.WhereToOnGameOver,o.WhereToOnAllEaten);if(2===v[0].PacState2.PacMode.tag)return v[0].PacState2.LivesLeft<=1?N.WhereToOnGameOver(M,n):function(e,t){const n=Ji(Ii()[$o.fields[0]],ki()[Vo.fields[0]],"LIFE OVER",320,256);let r;return r=Vi(e),$i(Do,t,T(2,r),n)}((function(t){return ms((function(t){let n;n=Js(N);const r=bi(e);return Mi(n,T(3,Pi(e)),T(4,r),new D)}),ws(),xo,t)}),n);if(f.MazeTiles.some((function(e){return 18===(t=e).fields[0]||17===t.fields[0];var t}))){const t=(G=[i[4],p[1],y[2],v[1]],Bn(gt((function(e,t){return Fn((function(e,t){return new D(t,e)}),e,t)}),new D,G))),n=bi(e),r=Pi(e);return Mi(N,T(3,r),T(4,n),t)}{const t=new Po(N.ScoreAndHiScore,N.PacmanState.PacState2.LivesLeft);let r;return r=Qi(Oo,n,(function(e,n){return N.WhereToOnAllEaten(N.LevelIndex,t,n)}),e),Gi(new D(new pr(0,"PlaySoundEffect",Ei()[ai.fields[0]]),new D),r)}var G}function Vs(e,t,n,r){var o;let i;i=function(e){const t=function(e,t){if(null==t)throw new Error(e);return Q(t)},n=t("Failed to unpack walls from maze definition, please check text format input.",$r((function(e){return"#"===e||":"===e}),(function(e){return new ys(0,"MazeTile",e.fields[0])}),new ys(0,"MazeTile",0),e)),r=t("Failed to unpack rails from maze definition, please check text format input.",$r((function(e){return"#"!==e}),(function(e){return e}),_r,e)),o=t("Failed to unpack rails from maze definition, please check text format input.",$r((function(e){return"#"!==e&&":"!==e}),(function(e){return e}),_r,e)),i=t("Failed to obtains the dots and pills from maze definition, please check text format input.",Zr((function(t,r){if(t*r===n.length){const r=An(new Array(n.length),0,n.length,new ys(0,"MazeTile",0));return Kn((function(e,o){for(let i=0;i<=t-1;i++){const s=e*t+i|0,u=n[s];let c;if(0!==u.fields[0])c=u.fields[0]+0;else{const e=o[i];c="."===e?17:"@"===e?18:0}r[s]=new ys(0,"MazeTile",c)}}),e),r}return null}),e)),s=function(e,t){switch(t.tag){case 1:throw new Error(zt(Lt("Could not find char '%s' in the maze definition."))(e));case 3:throw new Error(zt(Lt("Char '%s' is not unique in the maze definition."))(e));case 2:return new Br(16*t.fields[0],16*t.fields[1]);default:throw new Error("Invalid maze definition")}};let u;u=Un((function(t){const n=String.fromCharCode(48+t);return s(n,bs(n,e))}),Hn(St(1,1,4)));const c=s("0",("0",bs("0",e)));return new vs(new Ss(Vn(0,e).length,Wn(e),i,r,o),c,u)}(Ms[e%(0|Ms.length)]);const s=[new ro("Charger",100,1,100,0,80,20,1,50,1,80,10,1),new ro("Standard",95,5,99,0,70,20,10,45,10,30,30,10),new ro("Ditherer",60,40,95,0,30,30,30,30,30,20,20,20)],u=[s[1],s[2],s[1],s[0]];let c;const a=new ns(0,"XorShift32State",208947);return c=new Ns(a,e,r.ScoreAndHiScore,i.UnpackedMazeState,new jo((o=new Qr(2,"FacingRight"),new Uo(new Wo(0,"PacAlive"),o,r.Lives,i.UnpackedPacmanPosition)),i.UnpackedPacmanPosition),jn((function(e,t){var n,r;const o=u[e%u.length];return new qo((n=new Ho(0,"GhostNumber",e),r=new _o(0,"GhostNormal"),new Ko(n,t,new Qr(1,"FacingUp"),r,function(e){let t,n;return n=Un((function(t){return new co(uo(e,t.PCLeft),uo(e,t.PCUp),uo(e,t.PCRight),uo(e,t.PCDown))}),qn([new io(new oo(0,"Never"),new oo(0,"Never"),new oo(0,"Never"),new oo(2,"OnlyWay")),new io(new oo(0,"Never"),new oo(0,"Never"),new oo(0,"Never"),new oo(2,"OnlyWay")),new io(new oo(0,"Never"),new oo(0,"Never"),new oo(0,"Never"),new oo(2,"OnlyWay")),new io(new oo(0,"Never"),new oo(0,"Never"),new oo(0,"Never"),new oo(2,"OnlyWay")),new io(new oo(0,"Never"),new oo(0,"Never"),new oo(2,"OnlyWay"),new oo(0,"Never")),new io(new oo(0,"Never"),new oo(0,"Never"),new oo(2,"OnlyWay"),new oo(0,"Never")),new io(new oo(0,"Never"),new oo(0,"Never"),new oo(2,"OnlyWay"),new oo(0,"Never")),new io(new oo(0,"Never"),new oo(0,"Never"),new oo(2,"OnlyWay"),new oo(0,"Never")),new io(new oo(0,"Never"),new oo(0,"Never"),new oo(4,"Back90"),new oo(3,"Turn90")),new io(new oo(0,"Never"),new oo(0,"Never"),new oo(3,"Turn90"),new oo(4,"Back90")),new io(new oo(0,"Never"),new oo(0,"Never"),new oo(1,"Correct"),new oo(1,"Correct")),new io(new oo(0,"Never"),new oo(0,"Never"),new oo(1,"Correct"),new oo(1,"Correct")),new io(new oo(0,"Never"),new oo(2,"OnlyWay"),new oo(0,"Never"),new oo(0,"Never")),new io(new oo(0,"Never"),new oo(2,"OnlyWay"),new oo(0,"Never"),new oo(0,"Never")),new io(new oo(0,"Never"),new oo(2,"OnlyWay"),new oo(0,"Never"),new oo(0,"Never")),new io(new oo(0,"Never"),new oo(2,"OnlyWay"),new oo(0,"Never"),new oo(0,"Never")),new io(new oo(0,"Never"),new oo(1,"Correct"),new oo(0,"Never"),new oo(1,"Correct")),new io(new oo(0,"Never"),new oo(5,"Onward180"),new oo(0,"Never"),new oo(6,"Back180")),new io(new oo(0,"Never"),new oo(1,"Correct"),new oo(0,"Never"),new oo(1,"Correct")),new io(new oo(0,"Never"),new oo(6,"Back180"),new oo(0,"Never"),new oo(5,"Onward180")),new io(new oo(0,"Never"),new oo(3,"Turn90"),new oo(4,"Back90"),new oo(0,"Never")),new io(new oo(0,"Never"),new oo(1,"Correct"),new oo(1,"Correct"),new oo(0,"Never")),new io(new oo(0,"Never"),new oo(1,"Correct"),new oo(1,"Correct"),new oo(0,"Never")),new io(new oo(0,"Never"),new oo(4,"Back90"),new oo(3,"Turn90"),new oo(0,"Never")),new io(new oo(0,"Never"),new oo(10,"TurnIntoT"),new oo(11,"TurnBackT"),new oo(10,"TurnIntoT")),new io(new oo(0,"Never"),new oo(7,"OnwardT"),new oo(8,"TurnAwayT"),new oo(9,"BackT")),new io(new oo(0,"Never"),new oo(1,"Correct"),new oo(1,"Correct"),new oo(1,"Correct")),new io(new oo(0,"Never"),new oo(9,"BackT"),new oo(8,"TurnAwayT"),new oo(7,"OnwardT")),new io(new oo(2,"OnlyWay"),new oo(0,"Never"),new oo(0,"Never"),new oo(0,"Never")),new io(new oo(2,"OnlyWay"),new oo(0,"Never"),new oo(0,"Never"),new oo(0,"Never")),new io(new oo(2,"OnlyWay"),new oo(0,"Never"),new oo(0,"Never"),new oo(0,"Never")),new io(new oo(2,"OnlyWay"),new oo(0,"Never"),new oo(0,"Never"),new oo(0,"Never")),new io(new oo(1,"Correct"),new oo(0,"Never"),new oo(0,"Never"),new oo(1,"Correct")),new io(new oo(3,"Turn90"),new oo(0,"Never"),new oo(0,"Never"),new oo(4,"Back90")),new io(new oo(4,"Back90"),new oo(0,"Never"),new oo(0,"Never"),new oo(3,"Turn90")),new io(new oo(1,"Correct"),new oo(0,"Never"),new oo(0,"Never"),new oo(1,"Correct")),new io(new oo(5,"Onward180"),new oo(0,"Never"),new oo(6,"Back180"),new oo(0,"Never")),new io(new oo(1,"Correct"),new oo(0,"Never"),new oo(1,"Correct"),new oo(0,"Never")),new io(new oo(6,"Back180"),new oo(0,"Never"),new oo(5,"Onward180"),new oo(0,"Never")),new io(new oo(1,"Correct"),new oo(0,"Never"),new oo(1,"Correct"),new oo(0,"Never")),new io(new oo(7,"OnwardT"),new oo(0,"Never"),new oo(9,"BackT"),new oo(8,"TurnAwayT")),new io(new oo(10,"TurnIntoT"),new oo(0,"Never"),new oo(10,"TurnIntoT"),new oo(11,"TurnBackT")),new io(new oo(9,"BackT"),new oo(0,"Never"),new oo(7,"OnwardT"),new oo(8,"TurnAwayT")),new io(new oo(1,"Correct"),new oo(0,"Never"),new oo(1,"Correct"),new oo(1,"Correct")),new io(new oo(1,"Correct"),new oo(1,"Correct"),new oo(0,"Never"),new oo(0,"Never")),new io(new oo(1,"Correct"),new oo(1,"Correct"),new oo(0,"Never"),new oo(0,"Never")),new io(new oo(4,"Back90"),new oo(3,"Turn90"),new oo(0,"Never"),new oo(0,"Never")),new io(new oo(3,"Turn90"),new oo(4,"Back90"),new oo(0,"Never"),new oo(0,"Never")),new io(new oo(1,"Correct"),new oo(1,"Correct"),new oo(0,"Never"),new oo(1,"Correct")),new io(new oo(8,"TurnAwayT"),new oo(7,"OnwardT"),new oo(0,"Never"),new oo(9,"BackT")),new io(new oo(11,"TurnBackT"),new oo(10,"TurnIntoT"),new oo(0,"Never"),new oo(10,"TurnIntoT")),new io(new oo(8,"TurnAwayT"),new oo(9,"BackT"),new oo(0,"Never"),new oo(7,"OnwardT")),new io(new oo(7,"OnwardT"),new oo(8,"TurnAwayT"),new oo(9,"BackT"),new oo(0,"Never")),new io(new oo(1,"Correct"),new oo(1,"Correct"),new oo(1,"Correct"),new oo(0,"Never")),new io(new oo(9,"BackT"),new oo(8,"TurnAwayT"),new oo(7,"OnwardT"),new oo(0,"Never")),new io(new oo(10,"TurnIntoT"),new oo(11,"TurnBackT"),new oo(10,"TurnIntoT"),new oo(0,"Never")),new io(new oo(12,"Onward4"),new oo(13,"Turn4"),new oo(13,"Turn4"),new oo(14,"Back4")),new io(new oo(13,"Turn4"),new oo(12,"Onward4"),new oo(13,"Turn4"),new oo(14,"Back4")),new io(new oo(14,"Back4"),new oo(13,"Turn4"),new oo(12,"Onward4"),new oo(13,"Turn4")),new io(new oo(13,"Turn4"),new oo(14,"Back4"),new oo(13,"Turn4"),new oo(12,"Onward4"))])),t=Ln(n,Array),new yo(0,"GhostAI",t)}(o))),t)}),i.UnpackedGhostPositions),Is(Gs(r.ScoreAndHiScore.Score,r.ScoreAndHiScore.HiScore,e,r.Lives)),n,t),Mi(c,Bs,Zs,new D)}const $s=k((function(e,t,n,r,o,i,s,u){this.Scoreboard=e,this.ScoreboardMemo=t,this.PacLeftMemo=n,this.PacRightMemo=r,this.Ghost0Memo=o,this.Ghost1Memo=i,this.Ghost2Memo=s,this.Ghost3Memo=u}),z);function Qs(e,t,n){let r,o,i,s,u,c;r=Ii()[ei.fields[0]],xi(e,0,0,r),o=Ii()[Qo.fields[0]],i=160,s=51,u=128,c=192;const a=function(t){wi(e,o,n,t)},f=function(t){di(e,o,n,t)};a(t.PacRightMemo),a(t.PacLeftMemo),f(t.Ghost0Memo),f(t.Ghost1Memo),f(t.Ghost2Memo),f(t.Ghost3Memo),Ai(e,Vo,new fr(1,"CentreAlign"),new lr(1,"MiddleAlign"),160,51,"PAC MAN"),Ri(e,Vo,new fr(1,"CentreAlign"),new lr(1,"MiddleAlign"),160,128,16,t.ScoreboardMemo),Ai(e,Vo,new fr(1,"CentreAlign"),new lr(1,"MiddleAlign"),160,192,"USE CURSOR KEYS ... Z TO START")}const eu=k((function(e,t){this.GuestState=e,this.StateSwitchChooser=t}),z);function tu(e,t,n){t.GuestState.Draw(e,n)}function nu(e,t,n,r){const o=vi(e),i=o.StateSwitchChooser(n,t);if(null==i){const i=new eu(o.GuestState.Frame(t,n,r),o.StateSwitchChooser),s=bi(e);return Mi(i,T(3,Pi(e)),T(4,s),new D)}return i}function ru(e,t){return Mi(new eu(t,e),tu,nu,t.Sounds())}let ou=new D;function iu(e,t,n){var r;return function(e,t,n){const r=Ji(Ii()[$o.fields[0]],ki()[Vo.fields[0]],zt(Lt("SCREEN COMPLETE  SCORE %d"))(e.ScoreAndHiScore.Score),320,256);let o;return o=Vi(t),$i(Ao,n,T(2,o),r)}(t,(r=e+1|0,function(e){return uu(r,t,e)}),n)}function su(e,t){let n;const r=Mi(new es(o=e,"SCORE   "+o.Score.toString(),"HI SCORE   "+o.HiScore.toString(),gi(new Qr(2,"FacingRight"),20,50),gi(new Qr(0,"FacingLeft"),80,50),pi(new Ho(0,"GhostNumber",0),20,75),pi(new Ho(0,"GhostNumber",1),40,75),pi(new Ho(0,"GhostNumber",2),60,75),pi(new Ho(0,"GhostNumber",3),80,75)),ts,Ni,new D);var o;return n=Qi(Ro,t,(function(t,n){return hs(t,function(e,t){return _i(e,ou,(function(e,t){return ou=e,cu(t)}),t)}(e,n),new us(2,"ComingFromLeft"),320,256,(function(e,t){let n;let r,o,i;var s;return n=e/t,i=(s=n)*s,o=t*i,r=o,r}),Math.fround(1),n)}),r),Gi(new D(new pr(0,"PlaySoundEffect",Ei()[ii.fields[0]]),new D),n)}function uu(e,t,n){return ms((function(n){return Vs(e,iu,su,t)}),ws(),xo,n)}function cu(e){const t=new Po(new Dr(0,Ir(ou)),3),n=Mi(new $s(r=ou,xr(24,r),gi(new Qr(2,"FacingRight"),20,20),gi(new Qr(0,"FacingLeft"),80,20),pi(new Ho(0,"GhostNumber",0),20,90),pi(new Ho(0,"GhostNumber",1),40,90),pi(new Ho(0,"GhostNumber",2),60,90),pi(new Ho(0,"GhostNumber",3),80,90)),Qs,Ni,new D);var r;return function(e,t,n){return ru((function(n,r){return r(t).JustDown?e(n):null}),n)}((function(e){return uu(0,t,e)}),Hi,n)}function au(e,t){return ou=function(e,t,n){let r;return r=jn((function(e,r){const o=t+(e>>>0)*n;return new Nr(r,o,o.toString())}),e),tr(Gr,r,{Compare:m})}(qn(["VINNY","HELEN","JARVIS","JULIA"]),2500,2500),cu()}const fu=new X(0,"WebBrowserKeyCode",80),lu=k((function(e,t,n,r,o){this.WebBrowserKeyCode=e,this.ThisKeyScanCode=t,this.MutHeld=n,this.MutJustPressed=r,this.MutWaitingRelease=o}),z);function hu(e,t){return new lu(e,t,!1,!1,!1)}function wu(e){return new Y(e.MutJustPressed,e.MutHeld)}const du=k((function(e,t,n){this.MutableKeyStatesList=e,this.PauseKey=t,this.GameIsPaused=n}),z);function gu(e,t){let n;if(n=Yn((function(e){return g(e.ThisKeyScanCode,t)}),e.MutableKeyStatesList),null==n)return g(t,e.PauseKey.ThisKeyScanCode)?e.PauseKey:null;return n}function pu(e,t){const n=gu(e,t);if(null!=n){const t=n;return t.MutWaitingRelease||(g(t.ThisKeyScanCode,e.PauseKey.ThisKeyScanCode)&&((r=e).GameIsPaused=!r.GameIsPaused),t.MutHeld=!0,t.MutJustPressed=!0,t.MutWaitingRelease=!0),!0}return!1;var r}function mu(e,t){const n=gu(e,t);if(null!=n){const e=n;return e.MutHeld=!1,e.MutWaitingRelease=!1,!0}return!1}k((function(e,t){this.Fonts=e,this.Images=t}),z);function yu(e,t,n,r,o,i){const s=[];!function i(u){if(null!=u.tail){const o=e(u.head),c=0|t(u.head),a=0|r(u.head),f=0|n(u.head);loadImageThenDo(o,!0,(function(e){Rn(function(e,t){const n=0|e.ImageMetadata.ImageHeight;return new ar(e,1,1,t,n,t,n)}(new sr(new rr(o,new nr(1,"MagentaColourKeyImage"),c,a),new ir(0,"HostImageRef",e)),f),s),i(u.tail)}))}else o(s.slice())}(i)}function Su(e,t,n,r){yu((function(e){return e.FontImageMetadata.ImageFileName}),(function(e){return e.FontImageMetadata.ImageWidth}),(function(e){return e.FontCharWidth}),(function(e){return e.FontImageMetadata.ImageHeight}),(function(t){!function(e,t,n,r,o,i){const s=[];!function i(u){if(null!=u.tail){const o=e(u.head),c=t(u.head),a=0|n(u.head),f=0|r(u.head);loadImageThenDo(o,c,(function(e){Rn(new sr(new rr(o,c?new nr(1,"MagentaColourKeyImage"):new nr(0,"OpaqueImage"),a,f),new ir(0,"HostImageRef",e)),s),i(u.tail)}))}else o(s.slice())}(i)}((function(e){return e.ImageFileName}),(function(e){return 1===e.ImageTransparency.tag}),(function(e){return e.ImageWidth}),(function(e){return e.ImageHeight}),(function(e){!function(e,t,n){const r=[];!function n(o){if(null!=o.tail){const t=e(o.head);loadSoundThenDo(t,(function(e){Rn(new gr(new hr(t),new dr(0,"HostSoundRef",e)),r),n(o.tail)}))}else t(r.slice())}(n)}((function(e){return e.SoundFileName}),(function(n){r(e,t,n)}),n)}),e)}),t)}function Mu(e,t,n,r,o,i){var s,u;s=o,u=i,Ii(r),ki(s),Ei(u);const c=document.getElementById("gameScreen").getContext("2d");let a;c.imageSmoothingEnabled=!1;const f=t();if(0!==f.tag)throw new Error(f.fields[0]);a=f.fields[0];const l=Math.fround(0),h=Math.fround(.019999999552965164);let w=n(a,l);const d=(p=80,m=Un((function(e){return[e.fields[0],new X(0,"WebBrowserKeyCode",e.fields[0])]}),e),new du(Un((function(e){return hu(e[1],e[0])}),m),hu(fu,p),!1));var p,m;const y=function(e,t){document.addEventListener(e,(function(e){t(d,~~e.keyCode)&&e.preventDefault()}))};y("keydown",pu),y("keyup",mu),document.getElementById("loaderScreen").classList.add("hidden"),document.getElementById("gameScreen").classList.remove("hidden");let S=0;window.setInterval((function(){let e;let t;var n;console.log("Jonathan [c]"),S+=1,e=S/Math.fround(50),w.Draw((function(e){!function(e,t){switch(t.tag){case 2:{let n,r,o,i,s,u;n=t.fields[2].ImageMetadata.ImageWidth,r=t.fields[2].ImageMetadata.ImageHeight,o=~~(t.fields[0]+Math.fround(.5)),i=~~(t.fields[1]+Math.fround(.5)),s=t.fields[3],u=t.fields[4],n>0&&r>0&&s>0&&u>0&&e.drawImage(t.fields[2].HostImageRef.fields[0],0,0,n,r,o,i,s,u);break}case 3:{let n,r,o,i;n=~~(t.fields[4]+Math.fround(.5)),r=~~(t.fields[5]+Math.fround(.5)),o=t.fields[6],i=t.fields[7],t.fields[2]>0&&t.fields[3]>0&&o>0&&i>0&&e.drawImage(t.fields[8].HostImageRef.fields[0],t.fields[0],t.fields[1],t.fields[2],t.fields[3],n,r,o,i);break}case 1:{let n,r,o,i;n=t.fields[2],r=t.fields[3],o=t.fields[0],i=t.fields[1];const s="#"+Bt("{0:x6}",t.fields[4].fields[0]);e.fillStyle=s,e.fillRect(o,i,n,r);break}default:{let n,r;n=t.fields[0],r=t.fields[1],e.drawImage(t.fields[2].HostImageRef.fields[0],n,r)}}}(c,e)}),e),t=w.Frame((function(e){return function(e,t){let n;return n=Yn((function(e){return g(e.WebBrowserKeyCode,t)}),e.MutableKeyStatesList),null==n?g(t,e.PauseKey.WebBrowserKeyCode)?wu(e.PauseKey):Z:wu(n)}(d,e)}),e,h),_n((function(e){var t;t=e.fields[0].HostSoundRef,playSound(t.fields[0])}),t.Sounds()),er((function(e){return e.MutJustPressed}),(n=d).MutableKeyStatesList)&&_n((function(e){e.MutJustPressed=!1}),n.MutableKeyStatesList),w=t}),20,null)}function vu(){const e=qn([new X(0,"WebBrowserKeyCode",37),new X(0,"WebBrowserKeyCode",39),new X(0,"WebBrowserKeyCode",38),new X(0,"WebBrowserKeyCode",40),new X(0,"WebBrowserKeyCode",90)]);Su(br,yr,Tr,(function(t,n,r){Mu(e,(function(){return new ee(0,"Ok",1)}),au,t,n,r)}))}vu(),n.d(t,"WebMain",(function(){return vu}))}]);