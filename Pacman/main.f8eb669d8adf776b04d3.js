!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e){return null!=e&&(Array.isArray(e)||ArrayBuffer.isView(e))}function o(e){return null!=e&&"function"==typeof e.Dispose}n.r(t);function i(e,t,n){return e.has(t)?[!0,e.get(t)]:[!1,n]}function s(e,t){let n=e.toString(10);for(;n.length<t;)n="0"+n;return n}function u(e){const t=e;return"number"==typeof t.offset?t.offset:1===e.kind?0:-6e4*e.getTimezoneOffset()}class c{static id(e){return c.idMap.has(e)||c.idMap.set(e,++c.count),c.idMap.get(e)}}function a(e){let t=0,n=5381;const r=e.length;for(;t<r;)n=33*n^e.charCodeAt(t++);return n}function f(e){return 2654435761*e|0}function l(e){return 0===e.length?0:e.reduce((e,t)=>(e<<5)+e^t)}function h(e){if(null==e)return 0;switch(typeof e){case"boolean":return e?1:0;case"number":return f(e);case"string":return a(e);default:if(function(e){return null!=e&&"function"==typeof e.GetHashCode}(e))return e.GetHashCode();if(r(e)){const t=e.length,n=new Array(t);for(let r=0;r<t;r++)n[r]=h(e[r]);return l(n)}return a(String(e))}}function w(e,t,n){if(null==e)return null==t;if(null==t)return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function d(e,t){return w(e,t,g)}function g(e,t){return e===t||(null==e?null==t:null!=t&&("object"==typeof e&&(function(e){return null!=e&&"function"==typeof e.Equals}(e)?e.Equals(t):r(e)?r(t)&&d(e,t):e instanceof Date&&(t instanceof Date&&0===p(e,t)))))}function p(e,t){let n,r;return"offset"in e&&"offset"in t?(n=e.getTime(),r=t.getTime()):(n=e.getTime()+u(e),r=t.getTime()+u(t)),n===r?0:n<r?-1:1}function y(e,t){return e===t?0:e<t?-1:1}function m(e,t,n){if(null==e)return null==t?0:1;if(null==t)return-1;if(e.length!==t.length)return e.length<t.length?-1:1;for(let r=0,o=0;r<e.length;r++)if(o=n(e[r],t[r]),0!==o)return o;return 0}function S(e,t){return m(e,t,v)}function v(e,t){return e===t?0:null==e?null==t?0:-1:null==t?1:"object"!=typeof e?e<t?-1:1:function(e){return null!=e&&"function"==typeof e.CompareTo}(e)?e.CompareTo(t):r(e)&&r(t)?S(e,t):e instanceof Date&&t instanceof Date?p(e,t):1}function P(e,t,n){return e(t,n)<0?t:n}function M(e,t,n){return e(t,n)>0?t:n}function b(e){let t=e;return e=>void 0===e?t:void(t=e)}c.idMap=new WeakMap,c.count=0;function T(e,t){if(null==t)return null;if(t.length>1)return t;let n;switch(e){case 2:n=(e,n)=>t(e)(n);break;case 3:n=(e,n,r)=>t(e)(n)(r);break;case 4:n=(e,n,r,o)=>t(e)(n)(r)(o);break;case 5:n=(e,n,r,o,i)=>t(e)(n)(r)(o)(i);break;case 6:n=(e,n,r,o,i,s)=>t(e)(n)(r)(o)(i)(s);break;case 7:n=(e,n,r,o,i,s,u)=>t(e)(n)(r)(o)(i)(s)(u);break;case 8:n=(e,n,r,o,i,s,u,c)=>t(e)(n)(r)(o)(i)(s)(u)(c);break;default:throw new Error("Uncurrying to more than 8-arity is not supported: "+e)}return n.__CURRIED__=t,n}function C(e,t){if(null!=t){if("__CURRIED__"in t)return t.__CURRIED__;switch(e){case 2:return e=>n=>t(e,n);case 3:return e=>n=>r=>t(e,n,r);case 4:return e=>n=>r=>o=>t(e,n,r,o);case 5:return e=>n=>r=>o=>i=>t(e,n,r,o,i);case 6:return e=>n=>r=>o=>i=>s=>t(e,n,r,o,i,s);case 7:return e=>n=>r=>o=>i=>s=>u=>t(e,n,r,o,i,s,u);case 8:return e=>n=>r=>o=>i=>s=>u=>c=>t(e,n,r,o,i,s,u,c);default:throw new Error("Currying to more than 8-arity is not supported: "+e)}}}function N(e,t,n){if(null==t)return null;if("__CURRIED__"in t){t=t.__CURRIED__;for(let e=0;e<n.length;e++)t=t(n[e]);return t}switch(e){case 1:return e=>t.apply(null,n.concat([e]));case 2:return e=>r=>t.apply(null,n.concat([e,r]));case 3:return e=>r=>o=>t.apply(null,n.concat([e,r,o]));case 4:return e=>r=>o=>i=>t.apply(null,n.concat([e,r,o,i]));case 5:return e=>r=>o=>i=>s=>t.apply(null,n.concat([e,r,o,i,s]));case 6:return e=>r=>o=>i=>s=>u=>t.apply(null,n.concat([e,r,o,i,s,u]));case 7:return e=>r=>o=>i=>s=>u=>c=>t.apply(null,n.concat([e,r,o,i,s,u,c]));case 8:return e=>r=>o=>i=>s=>u=>c=>a=>t.apply(null,n.concat([e,r,o,i,s,u,c,a]));default:throw new Error("Partially applying to more than 8-arity is not supported: "+e)}}function G(e,t){if(e.has(t))return e.get(t);throw new Error(`The given key '${t}' was not present in the dictionary.`)}function k(e,t){return null!=t&&Object.getPrototypeOf(e).constructor===Object.getPrototypeOf(t).constructor}function I(e,t){return function(e,t){e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}(e,t||E),e}function E(){}function x(e,t){if(e===t)return 0;if(null==t)return-1;for(;null!=e.tail;){if(null==t.tail)return 1;const n=v(e.head,t.head);if(0!==n)return n;e=e.tail,t=t.tail}return null==t.tail?0:-1}function D(e,t){this.head=e,this.tail=t}function O(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}function A(e,t){const n={},r=null==t?Object.keys(e):t(e);for(let t=0;t<r.length;t++)n[r[t]]=e[r[t]];return n}function R(e,t,n){if(e===t)return!0;if(k(e,t)){const r=null==n?Object.keys(e):n(e);for(let n=0;n<r.length;n++)if(!g(e[r[n]],t[r[n]]))return!1;return!0}return!1}function L(e,t,n){if(e===t)return 0;if(k(e,t)){const r=null==n?Object.keys(e):n(e);for(let n=0;n<r.length;n++){const o=v(e[r[n]],t[r[n]]);if(0!==o)return o}return 0}return-1}function z(){}E.prototype.toString=function(){return"{"+Object.keys(this).map(e=>e+" = "+String(this[e])).join(";\n ")+"}"},E.prototype.GetHashCode=function(){return function(e){if(null==e)return 0;switch(typeof e){case"boolean":return e?1:0;case"number":return f(e);case"string":return a(e);default:return f(c.id(e))}}(this)},E.prototype.Equals=function(e){return this===e},D.prototype.toString=function(){return"["+Array.from(this).map(e=>String(e)).join("; ")+"]"},D.prototype.toJSON=function(){return Array.from(this)},D.prototype[Symbol.iterator]=function(){let e=this;return{next:()=>{const t=e;return e=e.tail,{done:null==t.tail,value:t.head}}}},D.prototype.GetHashCode=function(){return l(Array.from(this).map(h))},D.prototype.Equals=function(e){return 0===x(this,e)},D.prototype.CompareTo=function(e){return x(this,e)},O.prototype.toString=function(){const e=this.fields.length;return 0===e?this.name:1===e?this.name+" "+String(this.fields[0]):this.name+" ("+this.fields.map(e=>String(e)).join(",")+")"},O.prototype.toJSON=function(){return 0===this.fields.length?this.name:[this.name].concat(this.fields)},O.prototype.GetHashCode=function(){const e=this.fields.map(e=>h(e));return e.splice(0,0,f(this.tag)),l(e)},O.prototype.Equals=function(e){return this===e||k(this,e)&&this.tag===e.tag&&d(this.fields,e.fields)},O.prototype.CompareTo=function(e){return this===e?0:k(this,e)?this.tag===e.tag?S(this.fields,e.fields):this.tag<e.tag?-1:1:-1},z.prototype.toString=function(){return"{"+Object.keys(this).map(e=>e+" = "+String(this[e])).join(";\n ")+"}"},z.prototype.toJSON=function(){return A(this)},z.prototype.GetHashCode=function(){return l(Object.keys(this).map(e=>h(this[e])))},z.prototype.Equals=function(e){return R(this,e)},z.prototype.CompareTo=function(e){return L(this,e)};const B=I((function(e){this.contents=e}),z),F=I((function(e){this.stack=Error().stack,this.message=e}),E);function H(e){return Object.keys(e).filter(e=>"message"!==e&&"stack"!==e)}const W=I((function(){F.call(this)}),F);W.prototype.toString=function(){const e=H(this),t=e.length;return 0===t?this.message:1===t?this.message+" "+String(this[e[0]]):this.message+" ("+e.map(e=>String(this[e])).join(",")+")"},W.prototype.toJSON=function(){return A(this,H)},W.prototype.GetHashCode=function(){return l(H(this).map(e=>h(this[e])))},W.prototype.Equals=function(e){return R(this,e,H)},W.prototype.CompareTo=function(e){return L(this,e,H)};I((function(e,t,n){this.arg1=e,this.arg2=0|t,this.arg3=0|n,this.message="The match cases were incomplete"}),W),I((function(){}),E);class U{constructor(e,t,n,r,o,i){this.fullname=e,this.generics=t,this.constructor=n,this.fields=r,this.cases=o,this.enumCases=i}toString(){return function e(t){const n=null==t.generics||q(t)?[]:t.generics;return n.length>0?t.fullname+"["+n.map(t=>e(t)).join(",")+"]":t.fullname}(this)}Equals(e){return _(this,e)}CompareTo(e){return K(this,e)}}function j(e){return null!=e.generics?e.generics:[]}function _(e,t){return""===e.fullname?""===t.fullname&&w(J(e),J(t),([e,t],[n,r])=>e===n&&_(t,r)):e.fullname===t.fullname&&w(j(e),j(t),_)}function K(e,t){return e.fullname!==t.fullname?e.fullname<t.fullname?-1:1:m(j(e),j(t),K)}new U("System.Object"),new U("Microsoft.FSharp.Core.Unit"),new U("System.Char"),new U("System.String"),new U("System.Boolean"),new U("System.SByte"),new U("System.Byte"),new U("System.Int16"),new U("System.UInt16"),new U("System.Int32"),new U("System.UInt32"),new U("System.Single"),new U("System.Double"),new U("System.Decimal");function q(e){return e.fullname.endsWith("[]")}function J(e){if(null!=e.fields)return e.fields();throw new Error(`${e.fullname} is not an F# record type`)}const X=I((function(e,t,...n){O.call(this,e,t,...n)}),O);const Y=I((function(e,t){this.JustDown=e,this.Held=t}),z);const V=new Y(!1,!1);function Z(e){return V}class ${constructor(e){this.value=e}toString(){return String(this.value)}toJSON(){return this.value}GetHashCode(){return h(this.value)}Equals(e){return null!=e&&g(this.value,e instanceof $?e.value:e)}CompareTo(e){return null==e?1:v(this.value,e instanceof $?e.value:e)}}function Q(e){return null==(e=void 0===e?null:e)||e instanceof $?new $(e):e}function ee(e,t){if(null==e){if(!t)throw new Error("Option has no value");return null}return e instanceof $?e.value:e}I((function(e,t,n){O.call(this,e,t,n)}),O);const te=I((function(e,t,n){O.call(this,e,t,n)}),O);var ne={GetHashCode(){return l([this.s,this.e].concat(this.c))},Equals(e){return!this.cmp(e)},CompareTo(e){return this.cmp(e)}},re="[big.js] ",oe=re+"Invalid ",ie=oe+"decimal places",se=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function ue(e,t){var n,r,o;if(0===t&&1/t<0)t="-0";else if(!se.test(t+=""))throw Error(oe+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),o=t.length,r=0;r<n&&r<o&&"0"==t.charAt(r);)++r;if(r==o)e.c=[e.e=0];else for(e.e=n-r-1,e.c=[],n=0;r<o;)e.c[n++]=+t.charAt(r++);return e=ce(e,fe.DP,fe.RM)}function ce(e,t,n,r){var o=e.c,i=e.e+t+1;if(i<o.length){if(1===n)r=o[i]>=5;else if(2===n)r=o[i]>5||5==o[i]&&(r||i<0||void 0!==o[i+1]||1&o[i-1]);else if(3===n)r=r||!!o[0];else if(r=!1,0!==n)throw Error("[big.js] Invalid rounding mode");if(i<1)o.length=1,r?(e.e=-t,o[0]=1):o[0]=e.e=0;else{if(o.length=i--,r)for(;++o[i]>9;)o[i]=0,i--||(++e.e,o.unshift(1));for(i=o.length;!o[--i];)o.pop()}}else if(n<0||n>3||n!==~~n)throw Error("[big.js] Invalid rounding mode");return e}function ae(e,t,n,r){var o,i,s=e.constructor,u=!e.c[0];if(void 0!==n){if(n!==~~n||n<(3==t)||n>1e6)throw Error(3==t?oe+"precision":ie);for(n=r-(e=new s(e)).e,e.c.length>++r&&ce(e,n,s.RM),2==t&&(r=e.e+n+1);e.c.length<r;)e.c.push(0)}if(o=e.e,n=(i=e.c.join("")).length,2!=t&&(1==t||3==t&&r<=o||o<=s.NE||o>=s.PE))i=i.charAt(0)+(n>1?"."+i.slice(1):"")+(o<0?"e":"e+")+o;else if(o<0){for(;++o;)i="0"+i;i="0."+i}else if(o>0)if(++o>n)for(o-=n;o--;)i+="0";else o<n&&(i=i.slice(0,o)+"."+i.slice(o));else n>1&&(i=i.charAt(0)+"."+i.slice(1));return e.s<0&&(!u||4==t)?"-"+i:i}ne.abs=function(){var e=new this.constructor(this);return e.s=1,e},ne.cmp=function(e){var t,n=this.constructor,r=new n(this),o=(e=new n(e),r.c),i=e.c,s=r.s,u=e.s,c=r.e,a=e.e;if(!o[0]||!i[0])return o[0]?s:i[0]?-u:0;if(s!=u)return s;if(t=s<0,c!=a)return c>a^t?1:-1;for(u=Math.max(o.length,i.length),s=0;s<u;s++)if((c=s<o.length?o[s]:0)!=(a=s<i.length?i[s]:0))return c>a^t?1:-1;return 0},ne.div=function(e){var t=this.constructor,n=new t(this),r=(e=new t(e),n.c),o=e.c,i=n.s==e.s?1:-1,s=t.DP;if(s!==~~s||s<0||s>1e6)throw Error(ie);if(!o[0])throw Error("[big.js] Division by zero");if(!r[0])return new t(0*i);var u,c,a,f,l,h=o.slice(),w=u=o.length,d=r.length,g=r.slice(0,u),p=g.length,y=e,m=y.c=[],S=0,v=s+(y.e=n.e-e.e)+1;for(y.s=i,i=v<0?0:v,h.unshift(0);p++<u;)g.push(0);do{for(a=0;a<10;a++){if(u!=(p=g.length))f=u>p?1:-1;else for(l=-1,f=0;++l<u;)if(o[l]!=g[l]){f=o[l]>g[l]?1:-1;break}if(!(f<0))break;for(c=p==u?o:h;p;){if(g[--p]<c[p]){for(l=p;l&&!g[--l];)g[l]=9;--g[l],g[p]+=10}g[p]-=c[p]}for(;!g[0];)g.shift()}m[S++]=f?a:++a,g[0]&&f?g[p]=r[w]||0:g=[r[w]]}while((w++<d||void 0!==g[0])&&i--);return m[0]||1==S||(m.shift(),y.e--),S>v&&ce(y,s,t.RM,void 0!==g[0]),y},ne.eq=function(e){return!this.cmp(e)},ne.gt=function(e){return this.cmp(e)>0},ne.gte=function(e){return this.cmp(e)>-1},ne.lt=function(e){return this.cmp(e)<0},ne.lte=function(e){return this.cmp(e)<1},ne.minus=ne.sub=function(e){var t,n,r,o,i=this.constructor,s=new i(this),u=(e=new i(e),s.s),c=e.s;if(u!=c)return e.s=-c,s.plus(e);var a=s.c.slice(),f=s.e,l=e.c,h=e.e;if(!a[0]||!l[0])return l[0]?(e.s=-c,e):new i(a[0]?s:0);if(u=f-h){for((o=u<0)?(u=-u,r=a):(h=f,r=l),r.reverse(),c=u;c--;)r.push(0);r.reverse()}else for(n=((o=a.length<l.length)?a:l).length,u=c=0;c<n;c++)if(a[c]!=l[c]){o=a[c]<l[c];break}if(o&&(r=a,a=l,l=r,e.s=-e.s),(c=(n=l.length)-(t=a.length))>0)for(;c--;)a[t++]=0;for(c=t;n>u;){if(a[--n]<l[n]){for(t=n;t&&!a[--t];)a[t]=9;--a[t],a[n]+=10}a[n]-=l[n]}for(;0===a[--c];)a.pop();for(;0===a[0];)a.shift(),--h;return a[0]||(e.s=1,a=[h=0]),e.c=a,e.e=h,e},ne.mod=function(e){var t,n=this.constructor,r=new n(this),o=(e=new n(e),r.s),i=e.s;if(!e.c[0])throw Error("[big.js] Division by zero");return r.s=e.s=1,t=1==e.cmp(r),r.s=o,e.s=i,t?new n(r):(o=n.DP,i=n.RM,n.DP=n.RM=0,r=r.div(e),n.DP=o,n.RM=i,this.minus(r.times(e)))},ne.plus=ne.add=function(e){var t,n=this.constructor,r=new n(this),o=(e=new n(e),r.s),i=e.s;if(o!=i)return e.s=-i,r.minus(e);var s=r.e,u=r.c,c=e.e,a=e.c;if(!u[0]||!a[0])return a[0]?e:new n(u[0]?r:0*o);if(u=u.slice(),o=s-c){for(o>0?(c=s,t=a):(o=-o,t=u),t.reverse();o--;)t.push(0);t.reverse()}for(u.length-a.length<0&&(t=a,a=u,u=t),o=a.length,i=0;o;u[o]%=10)i=(u[--o]=u[o]+a[o]+i)/10|0;for(i&&(u.unshift(i),++c),o=u.length;0===u[--o];)u.pop();return e.c=u,e.e=c,e},ne.pow=function(e){var t=this.constructor,n=new t(this),r=new t(1),o=new t(1),i=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(oe+"exponent");for(i&&(e=-e);1&e&&(r=r.times(n)),e>>=1;)n=n.times(n);return i?o.div(r):r},ne.round=function(e,t){var n=this.constructor;if(void 0===e)e=0;else if(e!==~~e||e<-1e6||e>1e6)throw Error(ie);return ce(new n(this),e,void 0===t?n.RM:t)},ne.sqrt=function(){var e,t,n,r=this.constructor,o=new r(this),i=o.s,s=o.e,u=new r(.5);if(!o.c[0])return new r(o);if(i<0)throw Error(re+"No square root");0===(i=Math.sqrt(o+""))||i===1/0?((t=o.c.join("")).length+s&1||(t+="0"),s=((s+1)/2|0)-(s<0||1&s),e=new r(((i=Math.sqrt(t))==1/0?"1e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+s)):e=new r(i),s=e.e+(r.DP+=4);do{n=e,e=u.times(n.plus(o.div(n)))}while(n.c.slice(0,s).join("")!==e.c.slice(0,s).join(""));return ce(e,r.DP-=4,r.RM)},ne.times=ne.mul=function(e){var t,n=this.constructor,r=new n(this),o=(e=new n(e),r.c),i=e.c,s=o.length,u=i.length,c=r.e,a=e.e;if(e.s=r.s==e.s?1:-1,!o[0]||!i[0])return new n(0*e.s);for(e.e=c+a,s<u&&(t=o,o=i,i=t,a=s,s=u,u=a),t=new Array(a=s+u);a--;)t[a]=0;for(c=u;c--;){for(u=0,a=s+c;a>c;)u=t[a]+i[c]*o[a-c-1]+u,t[a--]=u%10,u=u/10|0;t[a]=(t[a]+u)%10}for(u?++e.e:t.shift(),c=t.length;!t[--c];)t.pop();return e.c=t,e},ne.toExponential=function(e){return ae(this,1,e,e)},ne.toFixed=function(e){return ae(this,2,e,this.e+e)},ne.toPrecision=function(e){return ae(this,3,e,e-1)},ne.toString=function(){return ae(this)},ne.valueOf=ne.toJSON=function(){return ae(this,4)};var fe=function e(){function t(n){var r=this;if(!(r instanceof t))return void 0===n?e():new t(n);n instanceof t?(r.s=n.s,r.e=n.e,r.c=n.c.slice(),function(e){if((e=ce(e,28,0)).c.length>1&&!e.c[0]){let t=e.c.findIndex(e=>e);e.c=e.c.slice(t),e.e=e.e-t}}(r)):ue(r,n),r.constructor=t}return t.prototype=ne,t.DP=28,t.RM=1,t.NE=-29,t.PE=29,t.version="5.2.2",t}(),le=fe,he=le;new le(0),new le(1),new le(-1),new le("79228162514264337593543950335"),new le("-79228162514264337593543950335");var we;function de(e){return-2147483648===e?e:-e}!function(e){e[e.AllowHexSpecifier=512]="AllowHexSpecifier"}(we||(we={}));var ge=null;try{ge=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function pe(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function ye(e){return!0===(e&&e.__isLong__)}pe.prototype.GetHashCode=function(){let e=this.unsigned?1:0;return e=(e<<5)+e^this.high,e=(e<<5)+e^this.low,e},pe.prototype.Equals=function(e){return _e(this,e)},pe.prototype.CompareTo=function(e){return Xe(this,e)},pe.prototype.toString=function(e){return He(this,e)},pe.prototype.toJSON=function(){return He(this)},pe.prototype.__isLong__,Object.defineProperty(pe.prototype,"__isLong__",{value:!0});var me={},Se={};function ve(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=Se[e])?r:(n=Me(e,(0|e)<0?-1:0,!0),o&&(Se[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=me[e])?r:(n=Me(e,e<0?-1:0,!1),o&&(me[e]=n),n)}function Pe(e,t){if(isNaN(e))return t?xe:Ee;if(t){if(e<0)return xe;if(e>=Ge)return Le}else{if(e<=-ke)return ze;if(e+1>=ke)return Re}return e<0?Ye(Pe(-e,t)):Me(e%Ne|0,e/Ne|0,t)}function Me(e,t,n){return new pe(e,t,n)}var be=Math.pow;function Te(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return Ee;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r=e.indexOf("-");if(r>0)throw Error("interior hyphen");if(0===r)return Ye(Te(e.substring(1),t,n));for(var o=Pe(be(n,8)),i=Ee,s=0;s<e.length;s+=8){var u=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+u),n);if(u<8)i=Ve($e(i,Pe(be(n,u))),Pe(c));else i=Ve(i=$e(i,o),Pe(c))}return i.unsigned=t,i}function Ce(e,t){return"number"==typeof e?Pe(e,t):"string"==typeof e?Te(e,t):Me(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}var Ne=4294967296,Ge=Ne*Ne,ke=Ge/2,Ie=ve(1<<24),Ee=ve(0),xe=ve(0,!0),De=ve(1),Oe=ve(1,!0),Ae=ve(-1),Re=Me(-1,2147483647,!1),Le=Me(-1,-1,!0),ze=Me(0,-2147483648,!1);function Be(e){return e.unsigned?e.low>>>0:e.low}function Fe(e){return e.unsigned?(e.high>>>0)*Ne+(e.low>>>0):e.high*Ne+(e.low>>>0)}function He(e,t){if((t=t||10)<2||36<t)throw RangeError("radix");if(We(e))return"0";if(Ue(e)){if(_e(e,ze)){var n=Pe(t),r=Qe(e,n),o=Ze($e(r,n),e);return He(r,t)+Be(o).toString(t)}return"-"+He(Ye(e),t)}for(var i=Pe(be(t,6),e.unsigned),s=e,u="";;){var c=Qe(s,i),a=(Be(Ze(s,$e(c,i)))>>>0).toString(t);if(We(s=c))return a+u;for(;a.length<6;)a="0"+a;u=""+a+u}}function We(e){return 0===e.high&&0===e.low}function Ue(e){return!e.unsigned&&e.high<0}function je(e){return 1==(1&e.low)}function _e(e,t){return ye(t)||(t=Ce(t)),(e.unsigned===t.unsigned||e.high>>>31!=1||t.high>>>31!=1)&&(e.high===t.high&&e.low===t.low)}function Ke(e,t){return Xe(e,t)<0}function qe(e,t){return Xe(e,t)>0}function Je(e,t){return Xe(e,t)>=0}function Xe(e,t){if(ye(t)||(t=Ce(t)),_e(e,t))return 0;var n=Ue(e),r=Ue(t);return n&&!r?-1:!n&&r?1:e.unsigned?t.high>>>0>e.high>>>0||t.high===e.high&&t.low>>>0>e.low>>>0?-1:1:Ue(Ze(e,t))?-1:1}function Ye(e){return!e.unsigned&&_e(e,ze)?ze:Ve(et(e),De)}function Ve(e,t){ye(t)||(t=Ce(t));var n=e.high>>>16,r=65535&e.high,o=e.low>>>16,i=65535&e.low,s=t.high>>>16,u=65535&t.high,c=t.low>>>16,a=0,f=0,l=0,h=0;return l+=(h+=i+(65535&t.low))>>>16,f+=(l+=o+c)>>>16,a+=(f+=r+u)>>>16,a+=n+s,Me((l&=65535)<<16|(h&=65535),(a&=65535)<<16|(f&=65535),e.unsigned)}function Ze(e,t){return ye(t)||(t=Ce(t)),Ve(e,Ye(t))}function $e(e,t){if(We(e))return e.unsigned?xe:Ee;if(ye(t)||(t=Ce(t)),ge)return Me(ge.mul(e.low,e.high,t.low,t.high),ge.get_high(),e.unsigned);if(We(t))return e.unsigned?xe:Ee;if(_e(e,ze))return je(t)?ze:Ee;if(_e(t,ze))return je(e)?ze:Ee;if(Ue(e))return Ue(t)?$e(Ye(e),Ye(t)):Ye($e(Ye(e),t));if(Ue(t))return Ye($e(e,Ye(t)));if(Ke(e,Ie)&&Ke(t,Ie))return Pe(Fe(e)*Fe(t),e.unsigned);var n=e.high>>>16,r=65535&e.high,o=e.low>>>16,i=65535&e.low,s=t.high>>>16,u=65535&t.high,c=t.low>>>16,a=65535&t.low,f=0,l=0,h=0,w=0;return h+=(w+=i*a)>>>16,l+=(h+=o*a)>>>16,h&=65535,l+=(h+=i*c)>>>16,f+=(l+=r*a)>>>16,l&=65535,f+=(l+=o*c)>>>16,l&=65535,f+=(l+=i*u)>>>16,f+=n*a+r*c+o*u+i*s,Me((h&=65535)<<16|(w&=65535),(f&=65535)<<16|(l&=65535),e.unsigned)}function Qe(e,t){if(ye(t)||(t=Ce(t)),We(t))throw Error("division by zero");var n,r,o;if(ge)return e.unsigned||-2147483648!==e.high||-1!==t.low||-1!==t.high?Me((e.unsigned?ge.div_u:ge.div_s)(e.low,e.high,t.low,t.high),ge.get_high(),e.unsigned):e;if(We(e))return e.unsigned?xe:Ee;if(e.unsigned){if(t.unsigned||(t=function(e){return e.unsigned?e:Me(e.low,e.high,!0)}(t)),qe(t,e))return xe;if(qe(t,rt(e,1)))return Oe;o=xe}else{if(_e(e,ze))return _e(t,De)||_e(t,Ae)?ze:_e(t,ze)?De:_e(n=tt(Qe(nt(e,1),t),1),Ee)?Ue(t)?De:Ae:o=Ve(n,Qe(r=Ze(e,$e(t,n)),t));if(_e(t,ze))return e.unsigned?xe:Ee;if(Ue(e))return Ue(t)?Qe(Ye(e),Ye(t)):Ye(Qe(Ye(e),t));if(Ue(t))return Ye(Qe(e,Ye(t)));o=Ee}for(r=e;Je(r,t);){n=Math.max(1,Math.floor(Fe(r)/Fe(t)));for(var i=Math.ceil(Math.log(n)/Math.LN2),s=i<=48?1:be(2,i-48),u=Pe(n),c=$e(u,t);Ue(c)||qe(c,r);)c=$e(u=Pe(n-=s,e.unsigned),t);We(u)&&(u=De),o=Ve(o,u),r=Ze(r,c)}return o}function et(e){return Me(~e.low,~e.high,e.unsigned)}function tt(e,t){return ye(t)&&(t=Be(t)),0==(t&=63)?e:t<32?Me(e.low<<t,e.high<<t|e.low>>>32-t,e.unsigned):Me(0,e.low<<t-32,e.unsigned)}function nt(e,t){return ye(t)&&(t=Be(t)),0==(t&=63)?e:t<32?Me(e.low>>>t|e.high<<32-t,e.high>>t,e.unsigned):Me(e.high>>t-32,e.high>=0?0:-1,e.unsigned)}function rt(e,t){if(ye(t)&&(t=Be(t)),0===(t&=63))return e;var n=e.high;return t<32?Me(e.low>>>t|n<<32-t,n>>>t,e.unsigned):Me(32===t?n:n>>>t-32,0,e.unsigned)}var ot=pe;const it=$e,st=Xe,ut=function(e,t,n){return n?function(e,t){return new pe(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)}(e,t):function(e,t){return new pe(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}(e,t)},ct=function(e,t){return t?function(e){var t=e.high,n=e.low;return[255&n,n>>>8&255,n>>>16&255,n>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]}(e):function(e){var t=e.high,n=e.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,n>>>24,n>>>16&255,n>>>8&255,255&n]}(e)},at=He;class ft{constructor(e){this.iter=e}MoveNext(){const e=this.iter.next();return this.current=e.value,!e.done}get Current(){return this.current}Reset(){throw new Error("JS iterators cannot be reset")}Dispose(){}}function lt(e){return new ft(e[Symbol.iterator]())}function ht(e){return{next:()=>e.MoveNext()?{done:!1,value:e.Current}:{done:!0,value:null}}}function wt(e){return gt(()=>{const t=e[Symbol.iterator]();let n={value:null};return Pt(e=>{let r=!1;for(;!r;)if(null==e){const n=t.next();n.done?r=!0:e=n.value[Symbol.iterator]()}else{const t=e.next();t.done?e=null:(n={value:t.value},r=!0)}return null!=e&&null!=n?[n.value,e]:null},null)})}function dt(e,t){return wt(St(e,t))}function gt(e){return{[Symbol.iterator]:()=>e()[Symbol.iterator]()}}function pt(e,t,n){if(Array.isArray(n)||ArrayBuffer.isView(n))return n.reduce(e,t);{let r;for(let o=0,i=n[Symbol.iterator]();r=i.next(),!r.done;o++)t=e(t,r.value,o);return t}}function yt(e,t){pt((t,n)=>(e(n),null),null,t)}function mt(e,t){pt((t,n,r)=>(e(null!=r?r:0,n),null),null,t)}function St(e,t){return gt(()=>Pt(t=>{const n=t.next();return n.done?null:[e(n.value),t]},t[Symbol.iterator]()))}function vt(e,t,n){return pt((t,r)=>n.Add(t,e(r)),n.GetZero(),t)}function Pt(e,t){return{[Symbol.iterator]:()=>{let n=t;return{next:()=>{const t=e(n);if(null!=t){const e=ee(t);if(null!=e)return n=e[1],{done:!1,value:e[0]}}return{done:!0,value:void 0}}}}}}function Mt(e){const t=e<0,n=(e=Math.abs(e))%36e5/6e4;return(t?"-":"+")+s(~~(e/36e5),2)+":"+s(n,2)}function bt(e,t){const n=e.toISOString();return"first"===t?n.substring(0,n.indexOf("T")):n.substring(n.indexOf("T")+1,n.length-1)}function Tt(e,t,n){return t.replace(/(\w)\1*/g,t=>{let r=Number.NaN;switch(t.substring(0,1)){case"y":const o=n?e.getUTCFullYear():e.getFullYear();r=t.length<4?o%100:o;break;case"M":r=(n?e.getUTCMonth():e.getMonth())+1;break;case"d":r=n?e.getUTCDate():e.getDate();break;case"H":r=n?e.getUTCHours():e.getHours();break;case"h":const i=n?e.getUTCHours():e.getHours();r=i>12?i%12:i;break;case"m":r=n?e.getUTCMinutes():e.getMinutes();break;case"s":r=n?e.getUTCSeconds():e.getSeconds();break;case"f":r=n?e.getUTCMilliseconds():e.getMilliseconds()}return Number.isNaN(r)?t:r<10&&t.length>1?"0"+r:""+r})}function Ct(e,t){var n,r,o;const i=new Date(e.getTime()+(null!=(n=e.offset)?n:0));if("string"!=typeof t)return i.toISOString().replace(/\.\d+/,"").replace(/[A-Z]|\.\d+/g," ")+Mt(null!=(r=e.offset)?r:0);if(1!==t.length)return Tt(i,t,!0);switch(t){case"D":case"d":return bt(i,"first");case"T":case"t":return bt(i,"second");case"O":case"o":return function(e,t){const n=e.toISOString();return n.substring(0,n.length-1)+Mt(t)}(i,null!=(o=e.offset)?o:0);default:throw new Error("Unrecognized Date print format")}}function Nt(e,t){const n=1===e.kind;if("string"!=typeof t)return n?e.toUTCString():e.toLocaleString();if(1!==t.length)return Tt(e,t,n);switch(t){case"D":case"d":return n?bt(e,"first"):e.toLocaleDateString();case"T":case"t":return n?bt(e,"second"):e.toLocaleTimeString();case"O":case"o":return function(e,t){if(t)return e.toISOString();{const t=null==e.kind||2===e.kind;return s(e.getFullYear(),4)+"-"+s(e.getMonth()+1,2)+"-"+s(e.getDate(),2)+"T"+s(e.getHours(),2)+":"+s(e.getMinutes(),2)+":"+s(e.getSeconds(),2)+"."+s(e.getMilliseconds(),3)+(t?Mt(-6e4*e.getTimezoneOffset()):"")}}(e,n);default:throw new Error("Unrecognized Date print format")}}const Gt=/(^|[^%])%([0+\- ]*)(\d+)?(?:\.(\d+))?(\w)/,kt=/\{(\d+)(,-?\d+)?(?:\:([a-zA-Z])(\d{0,2})|\:(.+?))?\}/g;function It(e){return"number"==typeof e||e instanceof ot||e instanceof he}function Et(e,t){return e instanceof ot?st(e,t)<0:e instanceof he?e.cmp(t)<0:e<t}function xt(e,t){return e instanceof ot?it(e,t):e instanceof he?e.mul(t):e*t}function Dt(e,t){return e instanceof ot?String(e)+(0).toFixed(t).substr(1):e.toFixed(t)}function Ot(e,t){return e instanceof ot?String(e)+(0).toPrecision(t).substr(1):e.toPrecision(t)}function At(e,t){return e instanceof ot?String(e)+(0).toExponential(t).substr(1):e.toExponential(t)}function Rt(e){return e instanceof ot?at(e.unsigned?e:ut(ct(e),!0),16):(Number(e)>>>0).toString(16)}function Lt(e){return{input:e,cont:(t=e,e=>Gt.test(t)?function e(t,n){return(...r)=>{let o=t;for(const e of r)o=Bt(o,e);return Gt.test(o)?e(o,n):n(o.replace(/%%/g,"%"))}}(t,e):e(t))};var t}function zt(e){return e.cont(e=>e)}function Bt(e,t){return e.replace(Gt,(e,n,r,o,i,s)=>{let u="";if(It(t))switch("x"!==s.toLowerCase()&&(Et(t,0)?(t=xt(t,-1),u="-"):r.indexOf(" ")>=0?u=" ":r.indexOf("+")>=0&&(u="+")),i=null==i?null:parseInt(i,10),s){case"f":case"F":t=Dt(t,i=null!=i?i:6);break;case"g":case"G":t=null!=i?Ot(t,i):Ot(t);break;case"e":case"E":t=null!=i?At(t,i):At(t);break;case"x":t=Rt(t);break;case"X":t=Rt(t).toUpperCase();break;default:t=String(t)}if(o=parseInt(o,10),isNaN(o))t=u+t;else{const e=r.indexOf("0")>=0,n=r.indexOf("-")>=0,i=n||!e?" ":"0";t="0"===i?u+(t=Ut(t,o-u.length,i,n)):Ut(u+t,o,i,n)}return(n+t).replace(/%/g,"%%")})}function Ft(e,...t){return"object"==typeof e&&t.length>0&&(e=t[0],t.shift()),e.replace(kt,(e,n,r,o,i,s)=>{let u=t[n];if(It(u))switch(i=null==i?null:parseInt(i,10),o){case"f":case"F":u=Dt(u,i=null!=i?i:2);break;case"g":case"G":u=null!=i?Ot(u,i):Ot(u);break;case"e":case"E":u=null!=i?At(u,i):At(u);break;case"p":case"P":i=null!=i?i:2,u=Dt(xt(u,100),i)+" %";break;case"d":case"D":u=null!=i?Ut(String(u),i,"0"):String(u);break;case"x":case"X":u=null!=i?Ut(Rt(u),i,"0"):Rt(u),"X"===o&&(u=u.toUpperCase());break;default:if(s){let e="";u=s.replace(/(0+)(\.0+)?/,(t,n,r)=>(Et(u,0)&&(u=xt(u,-1),e="-"),u=Dt(u,null!=r?r.length-1:0),Ut(u,(n||"").length-e.length+(null!=r?r.length:0),"0"))),u=e+u}}else u instanceof Date&&(u=function(e,t){return null!=e.offset?Ct(e,t):Nt(e,t)}(u,s||o));return r=parseInt((r||" ").substring(1),10),isNaN(r)||(u=Ut(String(u),Math.abs(r)," ",r<0)),u})}function Ht(e,t){if(e<0)throw new Error("String length must be non-negative");const n=new Array(e);for(let r=0;r<e;r++)n[r]=t(r);return n.join("")}function Wt(e,t){return Array.isArray(t)?t.join(e):Array.from(t).join(e)}function Ut(e,t,n,r){n=n||" ",t-=e.length;for(let o=0;o<t;o++)e=r?e+n:n+e;return e}function jt(e,t,n){if(t+(n||0)>e.length)throw new Error("Invalid startIndex and/or length");return null!=n?e.substr(t,n):e.substr(t)}const _t=I((function(e,t){const n=new B(null);this.comparer=t,n.contents=this,this.hashMap=new Map([]),this["init@20-1"]=1,yt((function(e){Yt(n.contents,e[0],e[1])}),e)}));function Kt(e,t){const n=0|e.comparer.GetHashCode(t),r=i(e.hashMap,n,null);return r[0]?[!0,n,r[1].findIndex((function(n){return e.comparer.Equals(t,n[0])}))]:[!1,n,-1]}function qt(e,t){const n=Kt(e,t);switch(n[0]&&n[2]>-1?0:1){case 0:return G(e.hashMap,n[1])[n[2]];case 1:return null}}function Jt(e){e.hashMap.clear()}function Xt(e){return 0|vt((function(e){return e.length}),e.hashMap.values(),{GetZero:()=>0,Add:(e,t)=>e+t})}function Yt(e,t,n){const r=Kt(e,t);switch(r[0]&&r[2]>-1?0:1){case 0:{let e;throw e=zt(Lt("An item with the same key has already been added. Key: %A"))(t),new Error(e)}case 1:if(r[0]){Ln([t,n],G(e.hashMap,r[1]))}else e.hashMap.set(r[1],[[t,n]])}}function Vt(e,t){const n=Kt(e,t);switch(n[0]&&n[2]>-1?0:1){case 0:return G(e.hashMap,n[1]).splice(n[2],1),!0;case 1:return!1}}_t.prototype[Symbol.iterator]=function(){const e=this;return ht(lt(gt((function(){return dt((function(e){return St((function(e){return e}),e)}),e.hashMap.values())}))))},_t.prototype.Add=function(e){Yt(this,e[0],e[1])},_t.prototype.Clear=function(){Jt(this)},_t.prototype.Contains=function(e){const t=qt(this,e[0]);switch(null!=t&&g(t[1],e[1])?0:1){case 0:return!0;case 1:return!1}},_t.prototype.CopyTo=function(e,t){mt((function(n,r){e[t+n]=r}),this)},Object.defineProperty(_t.prototype,"Count",{get:function(){return 0|Xt(this)}}),Object.defineProperty(_t.prototype,"IsReadOnly",{get:function(){return!1}}),_t.prototype.Remove=function(e){const t=this,n=qt(t,e[0]);if(null!=n){if(g(n[1],e[1])){Vt(t,e[0])}return!0}return!1},Object.defineProperty(_t.prototype,"size",{get:function(){return 0|Xt(this)}}),_t.prototype.clear=function(){Jt(this)},_t.prototype.delete=function(e){return Vt(this,e)},_t.prototype.entries=function(){return St((function(e){return e}),this)},_t.prototype.get=function(e){return function(e,t){const n=qt(e,t);if(null!=n){return n[1]}throw new Error("The item was not found in collection")}(this,e)},_t.prototype.has=function(e){return function(e,t){const n=Kt(e,t);switch(n[0]&&n[2]>-1?0:1){case 0:return!0;case 1:return!1}}(this,e)},_t.prototype.keys=function(){return St((function(e){return e[0]}),this)},_t.prototype.set=function(e,t){return function(e,t,n){const r=Kt(e,t);switch(r[0]&&r[2]>-1?0:1){case 0:G(e.hashMap,r[1])[r[2]]=[t,n];break;case 1:if(r[0]){Ln([t,n],G(e.hashMap,r[1]))}else e.hashMap.set(r[1],[[t,n]])}}(this,e,t),this},_t.prototype.values=function(){return St((function(e){return e[1]}),this)};const Zt=I((function(e,t,...n){O.call(this,e,t,...n)}),O);function $t(e){return function e(t,n){e:for(;;){const r=t,o=n;switch(o.tag){case 1:return r+1|0;case 2:t=e(r+1,o.fields[2]),n=o.fields[3];continue e;default:return 0|r}break}}(0,e)}function Qt(e,t,n){e:for(;;){const r=e,o=t,i=n;switch(i.tag){case 1:if(0===(0|r.Compare(o,i.fields[0])))return i.fields[1];throw new Error("key not found");case 2:{const s=0|r.Compare(o,i.fields[0]);if(s<0){e=r,t=o,n=i.fields[2];continue e}if(0===s)return i.fields[1];e=r,t=o,n=i.fields[3];continue e}default:throw new Error("key not found")}break}}function en(e,t,n){e:for(;;){const r=e,o=t,i=n;switch(i.tag){case 1:return 0===r.Compare(o,i.fields[0]);case 2:{const s=0|r.Compare(o,i.fields[0]);if(s<0){e=r,t=o,n=i.fields[2];continue e}if(0===s)return!0;e=r,t=o,n=i.fields[3];continue e}default:return!1}break}}const tn=I((function(e,t){this.stack=e,this.started=t}),z);function nn(e){for(;;){const t=e;if(null==t.tail)return new D;if(1===t.head.tag)return t;2!==t.head.tag?e=t.tail:e=new D(t.head.fields[2],new D(new Zt(1,"MapOne",t.head.fields[0],t.head.fields[1]),new D(t.head.fields[3],t.tail)))}}function rn(e){return new tn(nn(new D(e,new D)),!1)}function on(e){if(e.started){const t=e.stack;if(null==t.tail)return function(){throw new Error("enumeration already finished")}();if(1===t.head.tag)return[t.head.fields[0],t.head.fields[1]];throw new Error("Please report error: Map iterator, unexpected stack for current")}return function(){throw new Error("enumeration not started")}()}const sn=I((function(e){this.s=e,this.i=rn(this.s)}));function un(e){return function(e){return this instanceof sn?sn.call(this,e):new sn(e)}(e)}function cn(e){return Pt((function(e){return e.MoveNext()?[e.Current,e]:null}),un(e))}Object.defineProperty(sn.prototype,"Current",{get:function(){return on(this.i)}}),sn.prototype.MoveNext=function(){return function(e){if(e.started){const t=e.stack;if(null==t.tail)return!1;if(1===t.head.tag)return e.stack=nn(t.tail),!(null==e.stack.tail);throw new Error("Please report error: Map iterator, unexpected stack for moveNext")}return e.started=!0,!(null==e.stack.tail)}(this.i)},sn.prototype.Reset=function(){this.i=rn(this.s)},sn.prototype.Dispose=function(){};const an=I((function(e,t){this.comparer=e,this.tree=t}));function fn(e){return e.tree}function ln(e,t){return Qt(e.comparer,t,e.tree)}function hn(e){return $t(e.tree)}function wn(e,t){return en(e.comparer,t,e.tree)}an.prototype.toString=function(){return"map ["+Wt("; ",St((function(e){return zt(Lt("(%A, %A)"))(e[0])(e[1])}),this))+"]"},an.prototype.GetHashCode=function(){const e=function(e,t){return(e<<1)+t+631};let t=0;const n=un(fn(this));for(;n.MoveNext();){const r=n.Current;t=e(t,h(r[0])),t=e(t,h(r[1]))}return 0|Math.abs(t)},an.prototype.Equals=function(e){return 0===this.CompareTo(e)},an.prototype[Symbol.iterator]=function(){return ht(un(this.tree))},an.prototype.CompareTo=function(e){const t=this;let n=0,r=!1;const i=un(fn(t));try{const s=un(fn(e));try{for(;!r&&0===n;){const e=[i.MoveNext(),s.MoveNext()];if(e[0])if(e[1]){const e=i.Current,r=s.Current,o=0|t.comparer.Compare(e[0],r[0]);n=0!==o?o:v(e[1],r[1])}else n=1;else e[1]?n=-1:r=!0}return 0|n}finally{o(s)&&s.Dispose()}}finally{o(i)&&i.Dispose()}},Object.defineProperty(an.prototype,"size",{get:function(){return 0|hn(this)}}),an.prototype.clear=function(){throw new Error("Map cannot be mutated")},an.prototype.delete=function(e){throw new Error("Map cannot be mutated")},an.prototype.entries=function(){return cn(fn(this))},an.prototype.get=function(e){return ln(this,e)},an.prototype.has=function(e){return wn(this,e)},an.prototype.keys=function(){return St((function(e){return e[0]}),cn(fn(this)))},an.prototype.set=function(e,t){throw new Error("Map cannot be mutated")},an.prototype.values=function(){return St((function(e){return e[1]}),cn(fn(this)))};const dn=I((function(e,t){const n=new B(null);this.comparer=t,n.contents=this,this.hashMap=new Map([]),this["init@21-2"]=1,yt((function(e){mn(n.contents,e)}),e)}));function gn(e,t){const n=0|e.comparer.GetHashCode(t),r=i(e.hashMap,n,null);return r[0]?[!0,n,r[1].findIndex((function(n){return e.comparer.Equals(t,n)}))]:[!1,n,-1]}function pn(e){e.hashMap.clear()}function yn(e){return 0|vt((function(e){return e.length}),e.hashMap.values(),{GetZero:()=>0,Add:(e,t)=>e+t})}function mn(e,t){const n=gn(e,t);switch(n[0]&&n[2]>-1?0:1){case 0:return!1;case 1:if(n[0]){Ln(t,G(e.hashMap,n[1]));return!0}return e.hashMap.set(n[1],[t]),!0}}function Sn(e,t){const n=gn(e,t);switch(n[0]&&n[2]>-1?0:1){case 0:return!0;case 1:return!1}}function vn(e,t){const n=gn(e,t);switch(n[0]&&n[2]>-1?0:1){case 0:return G(e.hashMap,n[1]).splice(n[2],1),!0;case 1:return!1}}dn.prototype[Symbol.iterator]=function(){const e=this;return ht(lt(gt((function(){return dt((function(e){return St((function(e){return e}),e)}),e.hashMap.values())}))))},dn.prototype.Add=function(e){mn(this,e)},dn.prototype.Clear=function(){pn(this)},dn.prototype.Contains=function(e){return Sn(this,e)},dn.prototype.CopyTo=function(e,t){mt((function(n,r){e[t+n]=r}),this)},Object.defineProperty(dn.prototype,"Count",{get:function(){return 0|yn(this)}}),Object.defineProperty(dn.prototype,"IsReadOnly",{get:function(){return!1}}),dn.prototype.Remove=function(e){return vn(this,e)},Object.defineProperty(dn.prototype,"size",{get:function(){return 0|yn(this)}}),dn.prototype.add=function(e){mn(this,e);return this},dn.prototype.add_=function(e){return mn(this,e)},dn.prototype.clear=function(){pn(this)},dn.prototype.delete=function(e){return vn(this,e)},dn.prototype.has=function(e){return Sn(this,e)},dn.prototype.keys=function(){return St((function(e){return e}),this)},dn.prototype.values=function(){return St((function(e){return e}),this)},dn.prototype.entries=function(){return St((function(e){return[e,e]}),this)};const Pn=I((function(e,t,...n){O.call(this,e,t,...n)}),O);function Mn(e){return new Pn(2,"SetOne",e)}function bn(e,t,n,r){return new Pn(1,"SetNode",e,t,n,r)}const Tn=I((function(e,t){this.stack=e,this.started=t}),z);function Cn(e){for(;;){const t=e;if(null==t.tail)return new D;if(2===t.head.tag)return t;1!==t.head.tag?e=t.tail:e=new D(t.head.fields[1],new D(Mn(t.head.fields[0]),new D(t.head.fields[2],t.tail)))}}function Nn(e){return new Tn(Cn(new D(e,new D)),!1)}function Gn(e){if(e.started){const t=e.stack;if(null==t.tail)return function(){throw new Error("Enumeration already started")}();if(2===t.head.tag)return t.head.fields[0];throw new Error("Please report error: Set iterator, unexpected stack for current")}return function(){throw new Error("Enumeration not started")}()}const kn=I((function(e){this.s=e,this.i=Nn(this.s)}));function In(e){return function(e){return this instanceof kn?kn.call(this,e):new kn(e)}(e)}function En(e,t,n){return 0===t.tag?0===n.tag?0:-1:0===n.tag?1:0|function(e,t,n){e:for(;;){const H=e,W=t,U=n;var r,o,i,s,u,c,a,f,l,h,w,d,g,p,y,m,S,v,P,M,b,T,C,N,G,k,I,E,x,O,A,R,L,z,B,F;switch(null!=W.tail?null!=U.tail?2===U.head.tag?2===W.head.tag?(r=4,s=W.head.fields[0],u=U.head.fields[0],c=W.tail,a=U.tail):1===W.head.tag?0===W.head.fields[1].tag?(r=6,g=W.head.fields[1],p=W.head.fields[0],y=W.head.fields[2],m=U.head.fields[0],S=W.tail,v=U.tail):(r=9,I=W.head.fields[0],E=W.head.fields[1],x=W.head.fields[2],O=W.tail):(r=10,A=U.head.fields[0],R=U.tail):1===U.head.tag?0===U.head.fields[1].tag?2===W.head.tag?(r=5,f=W.head.fields[0],l=U.head.fields[0],h=U.head.fields[2],w=W.tail,d=U.tail):1===W.head.tag?0===W.head.fields[1].tag?(r=7,P=W.head.fields[0],M=W.head.fields[2],b=U.head.fields[0],T=U.head.fields[2],C=W.tail,N=U.tail):(r=9,I=W.head.fields[0],E=W.head.fields[1],x=W.head.fields[2],O=W.tail):(r=11,L=U.head.fields[0],z=U.head.fields[1],B=U.head.fields[2],F=U.tail):2===W.head.tag?(r=8,G=W.head.fields[0],k=W.tail):1===W.head.tag?(r=9,I=W.head.fields[0],E=W.head.fields[1],x=W.head.fields[2],O=W.tail):(r=11,L=U.head.fields[0],z=U.head.fields[1],B=U.head.fields[2],F=U.tail):2===W.head.tag?(r=8,G=W.head.fields[0],k=W.tail):1===W.head.tag?(r=9,I=W.head.fields[0],E=W.head.fields[1],x=W.head.fields[2],O=W.tail):(r=3,o=W.tail,i=U.tail):r=2:r=null!=U.tail?1:0,r){case 0:return 0;case 1:return-1;case 2:return 1;case 3:e=H,t=o,n=i;continue e;case 4:{const r=0|H.Compare(s,u);if(0!==r)return 0|r;e=H,t=c,n=a;continue e}case 5:{const r=0|H.Compare(f,l);if(0!==r)return 0|r;e=H,t=new D(new Pn(0,"SetEmpty"),w),n=new D(h,d);continue e}case 6:{const r=0|H.Compare(p,m);if(0!==r)return 0|r;e=H,t=new D(y,S),n=new D(g,v);continue e}case 7:{const r=0|H.Compare(P,b);if(0!==r)return 0|r;e=H,t=new D(M,C),n=new D(T,N);continue e}case 8:e=H,t=new D(new Pn(0,"SetEmpty"),new D(Mn(G),k)),n=U;continue e;case 9:e=H,t=new D(E,new D(bn(I,new Pn(0,"SetEmpty"),x,0),O)),n=U;continue e;case 10:e=H,t=W,n=new D(new Pn(0,"SetEmpty"),new D(Mn(A),R));continue e;case 11:e=H,t=W,n=new D(z,new D(bn(L,new Pn(0,"SetEmpty"),B,0),F));continue e}break}}(e,new D(t,new D),new D(n,new D))}Object.defineProperty(kn.prototype,"Current",{get:function(){return Gn(this.i)}}),kn.prototype.MoveNext=function(){return function(e){if(e.started){const t=e.stack;if(null==t.tail)return!1;if(2===t.head.tag)return e.stack=Cn(t.tail),!(null==e.stack.tail);throw new Error("Please report error: Set iterator, unexpected stack for moveNext")}return e.started=!0,!(null==e.stack.tail)}(this.i)},kn.prototype.Reset=function(){this.i=Nn(this.s)},kn.prototype.Dispose=function(){};const xn=I((function(e,t){this.comparer=e,this.tree=t}));function Dn(e){return e.comparer}function On(e){return e.tree}xn.prototype.toString=function(){return"set ["+Wt("; ",St((function(e){return String(e)}),this))+"]"},xn.prototype.GetHashCode=function(){let e=0;const t=In(On(this));for(;t.MoveNext();){e=((0|e)<<1)+(0|h(t.Current))+631}return 0|Math.abs(e)},xn.prototype.Equals=function(e){return 0===En(Dn(this),On(this),On(e))},xn.prototype.CompareTo=function(e){return 0|En(Dn(this),On(this),On(e))},xn.prototype[Symbol.iterator]=function(){return ht(In(On(this)))};function An(e,t,n,r){return e.fill(r,t,t+n),e}function Rn(e,t,n){if(ArrayBuffer.isView(t)){const r=0|t.length,o=new n(r);for(let n=0;n<=r-1;n++)o[n]=e(t[n]);return o}return t.map((function(t){return e(t)}))}function Ln(e,t){t.push(e)}function zn(e,t){return t.from(e)}function Bn(e,t,n){return function(e,t,n,r){for(;;){const o=e,i=t,s=n,u=r;if(null==u.tail)return s;e=o,t=i+1,n=o(i,s,u.head),r=u.tail}}(e,0,t,n)}function Fn(e,t,n){for(;;){const r=e,o=t,i=n;if(null==i.tail)return o;e=r,t=r(o,i.head),n=i.tail}}function Hn(e){return Fn((function(e,t){return new D(t,e)}),new D,e)}function Wn(e){return Hn(pt((function(e,t){return new D(t,e)}),new D,e))}function Un(e){return Fn((function(e,t){return e+1}),0,e)}function jn(e,t){return Hn(Fn((function(t,n){return new D(e(n),t)}),new D,t))}function _n(e,t){return Hn(Bn((function(t,n,r){return new D(e(t,r),n)}),new D,t))}function Kn(e,t){Fn((function(t,n){e(n)}),null,t)}function qn(e,t){Bn((function(t,n,r){e(t,r)}),null,t)}function Jn(e){let t=new D;for(let n=function(e){if(r(e))return e.length;{let t=0;for(const n of e)t++;return t}}(e)-1;n>=0;n--)t=new D(e[n],t);return t}function Xn(e,t){return function(e,t,n){e:for(;;){const r=e,o=t,i=n;if(null!=i.tail){const s=r(o,i.head);if(null==s){e=r,t=o+1,n=i.tail;continue e}return s}return null}}(e,0,t)}function Yn(e,t){return Xn((function(t,n){return e(t,n)?Q(n):null}),t)}function Vn(e,t){return Xn((function(t,n){return e(n)?Q(n):null}),t)}function Zn(e,t){const n=Yn(e,t);if(null!=n){return ee(n)}throw new Error("List did not contain any matching elements")}function $n(e,t){return Zn((function(t,n){return e===t}),t)}function Qn(e,t){if(null!=t.tail)return Fn(e,t.head,t.tail);throw new Error("List was empty")}function er(e,t){return Fn((function(t,n){return!!t&&e(n)}),!0,t)}function tr(e,t){for(;;){const n=e,r=t;if(null==r.tail)return!1;if(n(r.head))return!0;e=n,t=r.tail}}function nr(e,t,n){let r;const o=zn(t,Array);return o.sort((function(t,r){return-1*n.Compare(e(t),e(r))})),r=o,Jn(r)}const rr=I((function(e,t,...n){O.call(this,e,t,...n)}),O);const or=I((function(e,t,n,r){this.ImageFileName=e,this.ImageTransparency=t,this.ImageWidth=n,this.ImageHeight=r}),z);const ir=I((function(e,t,...n){O.call(this,e,t,...n)}),O);const sr=I((function(e,t,...n){O.call(this,e,t,...n)}),O);const ur=I((function(e,t){this.ImageMetadata=e,this.HostImageRef=t}),z);const cr=I((function(e,t,...n){O.call(this,e,t,...n)}),O);const ar=I((function(e,t,n,r,o,i,s){this.FontImage=e,this.MagnifyX=0|t,this.MagnifyY=0|n,this.SrcCharWidth=0|r,this.SrcCharHeight=0|o,this.CharWidth=0|i,this.CharHeight=0|s}),z);const fr=I((function(e,t,...n){O.call(this,e,t,...n)}),O);const lr=I((function(e,t,...n){O.call(this,e,t,...n)}),O);function hr(e){const t=0|e.ImageMetadata.ImageHeight;return new ar(e,1,1,t,t,t,t)}const wr=I((function(e){this.SoundFileName=e}),z);const dr=I((function(e,t,...n){O.call(this,e,t,...n)}),O);const gr=I((function(e,t,...n){O.call(this,e,t,...n)}),O);const pr=I((function(e,t){this.SoundMetadata=e,this.HostSoundRef=t}),z);const yr=I((function(e,t,...n){O.call(this,e,t,...n)}),O);function mr(e,t,n,r){return new or(t,e,n,r)}const Sr=new D(mr(new rr(1,"MagentaColourKeyImage"),"PacmanFont.png",296,8),new D),vr=Jn([mr(new rr(0,"OpaqueImage"),"PacmanBackground.png",320,256),mr(new rr(1,"MagentaColourKeyImage"),"PacmanLevel1.png",544,16),mr(new rr(0,"OpaqueImage"),"PacmanBackground2.png",320,256),mr(new rr(0,"OpaqueImage"),"PacmanBackground3.png",320,256)]),Pr=Jn([new wr("pellet.ogg"),new wr("pill.ogg"),new wr("321.ogg"),new wr("game-over.wav"),new wr("go.ogg"),new wr("gulp.ogg"),new wr("oww.ogg"),new wr("victory.wav"),new wr("life.mp3")]),Mr=I((function(e,t){this.NewPlayerName=e,this.NewPlayerScore=t}),z);const br=I((function(e,t,n){this.PlayerName=e,this.PlayerScore=t,this.PlayerScoreString=n}),z);function Tr(e){return e.PlayerScore}function Cr(e){let t;var n,r;return n=Tr,r={Compare:y},t=Qn((function(e,t){return r.Compare(n(t),n(e))>0?t:e}),e),Tr(t)}function Nr(e,t){if(g(e,new D))return!1;{let o,i;return n=Tr,r={Compare:y},i=Qn((function(e,t){return r.Compare(n(t),n(e))>0?e:t}),e),o=Tr(i),t>=o}var n,r}function Gr(e,t){if(Nr(t,e.NewPlayerScore)){let n,r;return r=function(e,t,n){let r;const o=zn(t,Array);return o.sort((function(t,r){return n.Compare(e(t),e(r))})),r=o,Jn(r)}(Tr,new D(new br(e.NewPlayerName.trim(),e.NewPlayerScore,e.NewPlayerScore.toString()),t),{Compare:y}),n=function(e){if(null!=e.tail)return e.tail;throw new Error("List was empty")}(r),nr(Tr,n,{Compare:y})}return t}function kr(e,t){return jn((function(t){return function(e,t,n){const r=(0|e.length)+(0|t.length)+2|0;return r>n?"":e+" "+Ht(n-r|0,(function(e){return"."}))+" "+t}(t.PlayerName,t.PlayerScoreString,e)}),t)}const Ir=I((function(e,t){this.Score=e,this.HiScore=t}),z);const Er=I((function(e,t,n,r){this.Name=e,this.SelectorIndex=0|t,this.MaxNameLength=0|n,this.Complete=r}),z);const xr=I((function(e,t,...n){O.call(this,e,t,...n)}),O);const Dr="ABCDEFGHIJKLMNOPQRSTUVWXYZ .X ";function Or(e,t){const n=Dr.length-1|0,r=n-1|0;switch(e.tag){case 1:{const e=0|(t.SelectorIndex===n?0:t.SelectorIndex+1);return new Er(t.Name,e,t.MaxNameLength,t.Complete)}case 2:{const e=t.Name.length===t.MaxNameLength,n=e?t.Name:t.SelectorIndex===r?0===t.Name.length?t.Name:jt(t.Name,0,t.Name.length-1):t.Name+Dr[t.SelectorIndex];return new Er(n,t.SelectorIndex,t.MaxNameLength,e)}default:{const e=0|(0===t.SelectorIndex?n:t.SelectorIndex-1);return new Er(t.Name,e,t.MaxNameLength,t.Complete)}}}function Ar(e,t){const n=0|e.length,r=t-(0|~~(n/2))|0,o=0|(r<0?r+n:r);return jt(e,o)+jt(e,0,o)}function Rr(e){return Jn(["ENTER YOUR NAME","","",(t=e.Name,n=e.MaxNameLength,r=".",Ut(t,n,r,!0)),"",""," V",Ar(Dr,e.SelectorIndex)]);var t,n,r}const Lr=I((function(e,t){this.ptx=e,this.pty=t}),z);const zr=I((function(e,t){this.modx=e,this.mody=t}),z);const Br=I((function(e,t,n,r){this.Left=e,this.Top=t,this.Right=n,this.Bottom=r}),z);function Fr(e,t){return!(v(e.Left,t.Right)>=0||v(e.Right,t.Left)<=0||v(e.Top,t.Bottom)>=0||v(e.Bottom,t.Top)<=0)}const Hr=I((function(e,t,...n){O.call(this,e,t,...n)}),O);const Wr=new Hr(0,"MazeByte",0),Ur=new Hr(0,"MazeByte",8),jr=new Hr(0,"MazeByte",4),_r=new Hr(0,"MazeByte",2),Kr=new Hr(0,"MazeByte",1),qr=new Hr(0,"MazeByte",16);function Jr(e,t){if(null!=t.tail){const n=0|Un(t),r=0|t.head.length;return r>0&&er((function(e){return e.length===r}),t)?e(r,n):null}return null}function Xr(e,t,n,r,o){if(e>0&&t>0){const i=An(new Array(e*t),0,e*t,o);return function(e,t,n,r){var o,i,s,u;if(t>0&&n>0){const c=n-1|0,a=t-1|0,f=function(t,n,r){const o=[t<0?a:t>a?0:t,n<0?c:n>c?0:n];return e(o[0],o[1])?r:Wr};let l;const h=Ur.fields[0]|_r.fields[0];let w;l=new Hr(0,"MazeByte",h);const d=jr.fields[0]|Kr.fields[0];w=new Hr(0,"MazeByte",d);for(let t=0;t<=c;t++)for(let n=0;n<=a;n++)if(e(n,t)){const h=f(n-1,t,Ur),d=f(n,t-1,jr),p=f(n+1,t,_r),y=f(n,t+1,Kr);let m;let S;let v;let P;let M,b,T;m=0===n&&g((o=d.fields[0]|y.fields[0],new Hr(0,"MazeByte",o)),w)?Wr:h,S=0===t&&g((i=h.fields[0]|p.fields[0],new Hr(0,"MazeByte",i)),l)?Wr:d,v=n===a&&g((s=d.fields[0]|y.fields[0],new Hr(0,"MazeByte",s)),w)?Wr:p,P=t===c&&g((u=h.fields[0]|p.fields[0],new Hr(0,"MazeByte",u)),l)?Wr:y;const C=P.fields[0]|S.fields[0];T=new Hr(0,"MazeByte",C);const N=m.fields[0]|T.fields[0];b=new Hr(0,"MazeByte",N);const G=v.fields[0]|b.fields[0];M=new Hr(0,"MazeByte",G),r(n,t,g(M,Wr)&&e(n,t)?qr:M)}else r(n,t,Wr)}}(n,e,t,(function(t,n,o){i[n*e+t]=r(o)})),i}return null}function Yr(e,t,n,r){return Jr((function(o,i){return Xr(o,i,(function(t,n){return e($n(n,r)[t])}),t,n)}),r)}const Vr=I((function(e,t,...n){O.call(this,e,t,...n)}),O);function Zr(e){switch(e.tag){case 2:return _r;case 1:return jr;case 3:return Kr;default:return Ur}}function $r(e){switch(e.tag){case 1:return 1;case 2:return 2;case 3:return 3;default:return 0}}function Qr(e){return 2===e.tag?new zr(1,0):1===e.tag?new zr(0,de(1)):3===e.tag?new zr(0,1):new zr(de(1),0)}const eo=I((function(e,t,n,r,o,i,s,u,c,a,f,l,h){this.Description=e,this.Turn90=0|t,this.Back90=0|n,this.Onward180=0|r,this.Back180=0|o,this.OnwardT=0|i,this.TurnAwayT=0|s,this.BackT=0|u,this.TurnIntoT=0|c,this.TurnBackT=0|a,this.Onward4=0|f,this.Turn4=0|l,this.Back4=0|h}),z);const to=I((function(e,t,...n){O.call(this,e,t,...n)}),O);const no=I((function(e,t,n,r){this.PCLeft=e,this.PCUp=t,this.PCRight=n,this.PCDown=r}),z);const ro=I((function(e,t,...n){O.call(this,e,t,...n)}),O);function oo(e,t){const n=0|(1===t.tag||2===t.tag?1:3===t.tag?e.Turn90:4===t.tag?e.Back90:5===t.tag?e.Onward180:6===t.tag?e.Back180:7===t.tag?e.OnwardT:8===t.tag?e.TurnAwayT:9===t.tag?e.BackT:10===t.tag?e.TurnIntoT:11===t.tag?e.TurnBackT:12===t.tag?e.Onward4:13===t.tag?e.Turn4:14===t.tag?e.Back4:0),r=255&n;if(~~r!==n)throw new Error("Out of range probability value -- must fit a byte");return new ro(0,"DirectionProbability",r)}const io=I((function(e,t,n,r){this.ProbLeft=e,this.ProbUp=t,this.ProbRight=n,this.ProbDown=r}),z);const so=new io(new ro(0,"DirectionProbability",1),new ro(0,"DirectionProbability",0),new ro(0,"DirectionProbability",0),new ro(0,"DirectionProbability",0)),uo=new io(new ro(0,"DirectionProbability",0),new ro(0,"DirectionProbability",1),new ro(0,"DirectionProbability",0),new ro(0,"DirectionProbability",0)),co=new io(new ro(0,"DirectionProbability",0),new ro(0,"DirectionProbability",0),new ro(0,"DirectionProbability",1),new ro(0,"DirectionProbability",0)),ao=new io(new ro(0,"DirectionProbability",0),new ro(0,"DirectionProbability",0),new ro(0,"DirectionProbability",0),new ro(0,"DirectionProbability",1));function fo(e){return new io(new ro(0,"DirectionProbability",0===e.ProbLeft.fields[0]?0:M(y,~~(e.ProbLeft.fields[0]/4),1)),e.ProbUp,e.ProbRight,e.ProbDown)}function lo(e){const t=new ro(0,"DirectionProbability",0===e.ProbUp.fields[0]?0:M(y,~~(e.ProbUp.fields[0]/4),1));return new io(e.ProbLeft,t,e.ProbRight,e.ProbDown)}function ho(e){const t=new ro(0,"DirectionProbability",0===e.ProbRight.fields[0]?0:M(y,~~(e.ProbRight.fields[0]/4),1));return new io(e.ProbLeft,e.ProbUp,t,e.ProbDown)}function wo(e){const t=new ro(0,"DirectionProbability",0===e.ProbDown.fields[0]?0:M(y,~~(e.ProbDown.fields[0]/4),1));return new io(e.ProbLeft,e.ProbUp,e.ProbRight,t)}const go=I((function(e,t,...n){O.call(this,e,t,...n)}),O);function po(e,t,n,r){return 0==(1&~~(r*e))?t:n}function yo(e,t){return 0==(1&~~(t*e))}I((function(e,t,...n){O.call(this,e,t,...n)}),O);const mo=I((function(e,t,...n){O.call(this,e,t,...n)}),O);const So=I((function(e,t){this.ScoreAndHiScore=e,this.Lives=t}),z);const vo=Math.fround(12),Po=Math.fround(4),Mo=Math.fround(12),bo=Math.fround(6),To=Math.fround(5),Co=Math.fround(8),No=Math.fround(2),Go=Math.fround(32),ko=(Math.fround(3),Math.fround(3)),Io=Math.fround(4),Eo=Math.fround(3),xo=Math.fround(6),Do=Math.fround(5),Oo=Math.fround(8),Ao=Math.fround(2);const Ro=I((function(e,t,...n){O.call(this,e,t,...n)}),O);function Lo(e,t){return function(e){switch(e){case 0:return new Ro(0,"ZeroAngle");case 1:return new Ro(1,"ClockwiseTurn90");case 2:return new Ro(2,"AboutTurn180");case 3:return new Ro(3,"AntiClockwiseTurn90");default:throw new Error("Invalid integer value for conversion to type Angle")}}(3&($r(e)-$r(t)|0)|0)}const zo=I((function(e,t,...n){O.call(this,e,t,...n)}),O);const Bo=I((function(e,t,...n){O.call(this,e,t,...n)}),O);const Fo=I((function(e,t,n,r){this.PacMode=e,this.PacFacingDirection=t,this.LivesLeft=n,this.PacStartPosition=r}),z);const Ho=I((function(e,t){this.PacState2=e,this.PacPosition=t}),z);const Wo=I((function(e,t,...n){O.call(this,e,t,...n)}),O);const Uo=I((function(e,t,n,r,o){this.GhostTag=e,this.GhostBasePosition=t,this.GhostFacingDirection=n,this.GhostMode=r,this.GhostAITable=o}),z);const jo=I((function(e,t){this.GhostState2=e,this.GhostPosition=t}),z);function _o(e,t,n,r,o,i){if(o>0){let s;if(18===o){s=po(Math.fround(10),18,19,i)}else s=o;e(new mo(3,"DrawSubImageStretchedToTarget",16*(s-1),0,16,16,0|n,0|r,16,16,t))}}const Ko=I((function(e,t,...n){O.call(this,e,t,...n)}),O);function qo(e,t,n,r,o,i){const s=0|(2===r.tag?20:1===r.tag?22:3===r.tag?23:21);let u;const c=function(e){return 0|po(Oo*e,s,s+4|0,i)};switch(o.tag){case 1:u=c(Math.fround(2));break;case 2:u=s;break;default:u=c(Math.fround(1))}_o(e,t,n.ptx,n.pty,u,i)}function Jo(e,t,n,r,o,i){let s;const u=r.fields[0]+28|0;switch(o.tag){case 1:s=o.fields[0]-i<Po?po(Mo,u,35,i):po(bo,34,35,i);break;case 2:s=35;break;case 3:s=po(Co,35,u,i);break;default:s=u}let c;_o(e,t,n.ptx,n.pty,s,i),c=po(Ao*(r.fields[0]+1),32,33,i),_o(e,t,n.ptx,n.pty,c,i)}Math.fround(320),Math.fround(256);const Xo=new cr(0,"FontID",0),Yo=new ir(0,"ImageID",0),Vo=new ir(0,"ImageID",1),Zo=new ir(0,"ImageID",2),$o=new ir(0,"ImageID",3),Qo=new dr(0,"SoundID",0),ei=new dr(0,"SoundID",1),ti=new dr(0,"SoundID",2),ni=new dr(0,"SoundID",3),ri=new dr(0,"SoundID",4),oi=new dr(0,"SoundID",5),ii=new dr(0,"SoundID",6),si=new dr(0,"SoundID",7),ui=new dr(0,"SoundID",8),ci=I((function(e,t){this.pos=e,this.direction=t}),z);const ai=I((function(e,t){this.pos=e,this.number=t}),z);function fi(e,t,n,r){qo(e,t,r.pos,r.direction,new Ko(0,"DrawPacNormal"),n)}function li(e,t,n,r){Jo(e,t,r.pos,r.number,new Wo(0,"GhostNormal"),n)}function hi(e,t,n){let r,o;r=~~(320*t/100),o=~~(256*n/100);return new ci(new Lr(r-8,o-8),e)}function wi(e,t,n){let r,o;r=~~(320*t/100),o=~~(256*n/100);return new ai(new Lr(r-8,o-8),e)}const di=I((function(){}));function gi(){return this instanceof di?di.call(this):new di}const pi=I((function(e,t,n,r){gi.call(this),this["Model@"]=e,this["DrawFunc@"]=t,this["FrameFunc@"]=n,this["SoundEffectCommands@"]=r}),di);function yi(e,t,n,r){return this instanceof pi?pi.call(this,e,t,n,r):new pi(e,t,n,r)}function mi(e){return e["Model@"]}function Si(e){return C(3,e["DrawFunc@"])}function vi(e){return C(4,e["FrameFunc@"])}function Pi(e){return e["SoundEffectCommands@"]}function Mi(e){return null==Pi(e).tail?e:yi(mi(e),T(3,Si(e)),T(4,vi(e)),new D)}function bi(e,t,n,r){return Mi(e)}pi.prototype.Draw=function(e,t){Si(this)(e)(mi(this))(t)},pi.prototype.Frame=function(e,t,n){return vi(this)(this)(e)(t)(n)},pi.prototype.Sounds=function(){return Pi(this)};const Ti=b([]),Ci=b([]),Ni=b([]);function Gi(e,t,n,r){return e(new mo(0,"DrawImageWithTopLeftAtInt",t,n,r))}function ki(e,t,n,r,o){const i=~~r*o.SrcCharWidth|0;return e(new mo(3,"DrawSubImageStretchedToTarget",i,0,o.SrcCharWidth,o.SrcCharHeight,t,n,o.CharWidth,o.CharHeight,o.FontImage))}function Ii(e,t,n,r,o,i,s){!function(e,t,n,r,o,i,s,u){const c=function(e){return e.length*t};let a=0|(1===s.tag?r-~~(c(i)/2):2===s.tag?r-c(i):r);const f=0|(1===u.tag?o-~~(n/2):2===u.tag?o-n:o);yt((function(n){const r=function(t){e(t,a,f)};n>="0"&&n<="9"?r(n.charCodeAt(0)-48):n>="A"&&n<="Z"?r(n.charCodeAt(0)-55):n>="a"&&n<="z"?r(n.charCodeAt(0)-87):"."===n&&r(36),a+=t}),i.split(""))}((function(n,r,o){ki(e,r,o,n>>>0,t)}),t.CharWidth,t.CharHeight,o,i,s,n,r)}function Ei(e,t,n,r,o,i,s){Ii(e,Ci()[t.fields[0]],n,r,o,i,s)}function xi(e,t,n,r,o,i,s,u){!function(e,t,n,r,o,i,s,u){if(null==u.tail);else{let c;c=t.CharHeight;const a=0|M(y,c,s),f=(Un(u)-1)*a+c|0,l=0|(1===r.tag?i-~~(f/2):2===r.tag?i-f:i);qn((function(r,i){const s=l+a*r|0;Ii(e,t,n,new lr(0,"TopAlign"),o,s,i)}),u)}}(e,Ci()[t.fields[0]],n,r,o,i,s,u)}const Di=new X(0,"WebBrowserKeyCode",38),Oi=new X(0,"WebBrowserKeyCode",40),Ai=new X(0,"WebBrowserKeyCode",37),Ri=new X(0,"WebBrowserKeyCode",39),Li=new X(0,"WebBrowserKeyCode",90),zi=I((function(e,t,n,r){this.FrozenGameState=e,this.TimeFiddler=t,this.UnfreezeGameTime=n,this.PostFreezeCtor=r}),z);function Bi(e,t,n){const r=t.TimeFiddler(n);t.FrozenGameState.Draw(e,r)}function Fi(e,t,n,r){const o=mi(e);return n<o.UnfreezeGameTime?Mi(e):o.PostFreezeCtor((i=o.FrozenGameState,yi(null,(function(e,t,n){i.Draw(e,n)}),bi,new D)),n);var i}function Hi(e){return function(t){return function(t){return e(t)}}}function Wi(e,t,n,r){return yi(new zi(r,(function(e){return t}),t+e,n),Bi,Fi,new D)}function Ui(e,t,n,r){return yi(new zi(r,(function(e){return e}),t+e,n),Bi,Fi,new D)}function ji(e,t){return yi(null,(function(e,n,r){t.Draw(e,r)}),(function(e,n,r,o){return t.Frame(n,r,o)}),e)}const _i=I((function(e,t,n,r,o,i){this.Scoreboard=e,this.ScoreAndHiScore=t,this.EnterYourNameModel=n,this.MemoizedText=r,this.PacMemo=o,this.WhereToAfterCtor=i}),z);function Ki(e,t,n){let r,o;r=Ti()[Yo.fields[0]],Gi(e,0,0,r),o=Ti()[Vo.fields[0]],fi(e,o,n,t.PacMemo),xi(e,Xo,new fr(1,"CentreAlign"),new lr(1,"MiddleAlign"),160,100,10,t.MemoizedText)}function qi(e,t,n,r){const o=mi(e),i=function(e,t){const n=t(Li),r=t(Ai),o=t(Ri);return n.JustDown?Or(new xr(2,"SelectLetter"),e):r.JustDown?Or(new xr(0,"RotateLeft"),e):o.JustDown?Or(new xr(1,"RotateRight"),e):null}(o.EnterYourNameModel,t);if(null!=i){const t=i;if(t.Complete){let e;s=t,u=o.ScoreAndHiScore.Score,c=o.Scoreboard,e=Gr(new Mr(s.Name,u),c);const r=o.WhereToAfterCtor(e,n);return ji(new D(new yr(0,"PlaySoundEffect",Ni()[si.fields[0]]),new D),r)}{const n=new _i(o.Scoreboard,o.ScoreAndHiScore,t,Rr(t),o.PacMemo,o.WhereToAfterCtor),r=new D(new yr(0,"PlaySoundEffect",Ni()[Qo.fields[0]]),new D),i=vi(e);return yi(n,T(3,Si(e)),T(4,i),r)}}return Mi(e);var s,u,c}function Ji(e,t,n,r){if(Nr(t,e.Score)){const r=new Er("",0,10,!1);let o,i;return i=Rr(r),o=new _i(t,e,r,i,hi(new Vr(2,"FacingRight"),50,15),n),yi(o,Ki,qi,new D)}return n(t,r)}const Xi=I((function(e,t,n,r,o){this.BackgroundImage=e,this.Font=t,this.MessageText=n,this.ScreenWidthInt=r,this.ScreenHeightInt=o}),z);function Yi(e,t,n){Gi(e,0,0,t.BackgroundImage),Ii(e,t.Font,new fr(1,"CentreAlign"),new lr(1,"MiddleAlign"),~~(t.ScreenWidthInt/2),~~(t.ScreenHeightInt/2),t.MessageText)}function Vi(e,t,n,r,o){return yi(new Xi(e,t,n,r,o),Yi,bi,new D)}const Zi=I((function(e,t,n,r,o,i,s,u,c){this.ScoreAndHiScore=e,this.ScoreText=t,this.HiScoreText=n,this.PacLeftMemo=r,this.PacRightMemo=o,this.Ghost0Memo=i,this.Ghost1Memo=s,this.Ghost2Memo=u,this.Ghost3Memo=c}),z);function $i(e,t,n){let r;r=Ti()[$o.fields[0]],Gi(e,0,0,r);const o=function(t,n){Ei(e,Xo,new fr(1,"CentreAlign"),new lr(1,"MiddleAlign"),160,~~(256*t/100),n)};let i;i=Ti()[Vo.fields[0]];const s=function(t){fi(e,i,n,t)},u=function(t){li(e,i,n,t)};o(20,"PAC MAN"),o(30,"GAME OVER"),o(45,t.ScoreText),o(55,t.HiScoreText),s(t.PacRightMemo),s(t.PacLeftMemo),u(t.Ghost0Memo),u(t.Ghost1Memo),u(t.Ghost2Memo),u(t.Ghost3Memo)}const Qi=I((function(e,t,...n){O.call(this,e,t,...n)}),O);function es(e,t,n,r,o){const i=(n.ptx-t.ptx)/o,s=(n.pty-t.pty)/o;return function(n){const u=n-r;if(u>=Math.fround(0)){if(u<=o){const n=e(u,o),r=t.ptx+i*n,c=t.pty+s*n;return new Qi(1,"MOMVisibleAtPosition",new Lr(r,c))}return new Qi(2,"MOMDisappeared")}return new Qi(0,"MOMYetToAppear")}}I((function(e,t,n,r){this.PositionGetter=e,this.StartPosition=t,this.FinalPosition=n,this.EndGameTime=r}),z);function ts(e,t){return function(n){return t(1===n.tag?new mo(1,"DrawFilledRectangle",n.fields[0]+e.ptx,n.fields[1]+e.pty,n.fields[2],n.fields[3],n.fields[4]):2===n.tag?new mo(2,"DrawStretchedImageWithTopLeftAt",e.ptx+(0|~~(n.fields[0]+Math.fround(.5)))|0,e.pty+(0|~~(n.fields[1]+Math.fround(.5)))|0,n.fields[2],n.fields[3],n.fields[4]):3===n.tag?new mo(3,"DrawSubImageStretchedToTarget",n.fields[0],n.fields[1],n.fields[2],n.fields[3],e.ptx+(0|~~(n.fields[4]+Math.fround(.5)))|0,e.pty+(0|~~(n.fields[5]+Math.fround(.5)))|0,n.fields[6],n.fields[7],n.fields[8]):new mo(0,"DrawImageWithTopLeftAtInt",n.fields[0]+e.ptx,n.fields[1]+e.pty,n.fields[2]))}}const ns=I((function(e,t,...n){O.call(this,e,t,...n)}),O);const rs=I((function(e,t){this.SecondScreenRelativePosition=e,this.PositionFunction=t}),z);const os=I((function(e,t,n){this.SlideTransitionModel2=e,this.FromScreenState=t,this.ToScreenState=n}),z);function is(e,t,n){const r=t.SlideTransitionModel2.PositionFunction(n);switch(r.tag){case 1:{let o;const i=function(e){let t;return t=~~(e+Math.fround(.5)),0|t};let s,u,c;o=new Lr(i(r.fields[0].ptx),i(r.fields[0].pty)),s=ts(o,e),t.FromScreenState.Draw(s,n),c=new Lr(o.ptx+t.SlideTransitionModel2.SecondScreenRelativePosition.ptx,o.pty+t.SlideTransitionModel2.SecondScreenRelativePosition.pty),u=ts(c,e),t.ToScreenState.Draw(u,n);break}}}function ss(e,t,n,r){const o=mi(e);if(2===o.SlideTransitionModel2.PositionFunction(n).tag)return o.ToScreenState;{let i,s;i=o.FromScreenState.Frame(t,n,r),s=o.ToScreenState.Frame(t,n,r);const u=new os(o.SlideTransitionModel2,i,s),c=vi(e);return yi(u,T(3,Si(e)),T(4,c),new D)}}function us(e,t,n,r,o,i,s,u){const c=function(e,t,n){switch(e.tag){case 1:return new Lr(0,n);case 2:return new Lr(de(t),0);case 3:return new Lr(t,0);default:return new Lr(0,de(n))}}(n,r,o),a=new Lr(Math.fround(0),Math.fround(0));let f,l;l=new Lr(de(c.ptx),de(c.pty));f=new Lr(l.ptx,l.pty);const h=new rs(c,es(i,a,f,u,s));return yi(new os(h,e,t),is,ss,new D)}function cs(){return yi(null,(function(e,t,n){!function(e,t,n){const r=[160,85];Ei(e,Xo,new fr(1,"CentreAlign"),new lr(1,"MiddleAlign"),r[0],r[1],"GET READY")}(e)}),bi,new D)}const as=I((function(e,t,n){this.GameTimeLie=e,this.FrozenGameState=t,this.Overlay=n}),z);function fs(e,t,n){t.FrozenGameState.Draw(e,t.GameTimeLie),t.Overlay.Draw(e,n)}function ls(e,t,n,r){const o=mi(e);let i;i=o.Overlay.Frame(t,n,r);const s=new as(o.GameTimeLie,o.FrozenGameState,i),u=vi(e);return yi(s,T(3,Si(e)),T(4,u),new D)}function hs(e,t,n,r){let o;return o=Wi(n,r,(function(t,n){const r=e(n);return ji(new D(new yr(0,"PlaySoundEffect",Ni()[ri.fields[0]]),new D),r)}),yi(new as(r,e(r),t),fs,ls,new D)),ji(new D(new yr(0,"PlaySoundEffect",Ni()[ti.fields[0]]),new D),o)}const ws=I((function(e,t,...n){O.call(this,e,t,...n)}),O);function ds(e){const t=(e.fields[0]^e.fields[0]<<13>>>0)>>>0,n=(t^t>>>17)>>>0;return new ws(0,"XorShift32State",(n^n<<5>>>0)>>>0)}const gs=I((function(e,t,...n){O.call(this,e,t,...n)}),O);const ps=I((function(e,t,n,r,o){this.MazeTilesCountX=0|e,this.MazeTilesCountY=0|t,this.MazeTiles=n,this.MazeGhostRails=r,this.MazePlayersRails=o}),z);const ys=[Jn(["####################","#@................@#","#.####.######.####.#","#.####.######.####.#","#..................#","#.##.##.####.##.##.#","#.##.##.:12:.##.##.#","#.......:34:.......#","#.##.##.:  :.##.##.#","#.##.##.####.##.##.#","#..................#","#.##.##########.##.#","#.##.##########.##.#","#@....0...........@#","####################"]),Jn(["#####.########.#####","#@................@#","#.###.##.##.##.###.#","#.###.##.##.##.###.#","#.##.....##.....##.#","#....##.####.##....#","#.##.##.:12:.##.##.#","#.##....:34:....##.#","#.##.##.:  :.##.##.#","#....##.####.##....#","#.##.....##.....##.#","#.###.##.##.##.###.#","#.###.##.##.##.###.#","#@......0.........@#","#####.########.#####"]),Jn(["#########  #########","#@......####......@#","#.##.##......##.##.#","#.##.##.####.##.##.#","#..................#","###.#.#.####.#.##.##","###.#.#.#12:.#.##.##","........#34:........","###.#.#.#  :.#.##.##","###.#.#.####.#.##.##","#...0..............#","#.##.##.####.##.##.#","#.##.##......##.##.#","##......####......@#","#########  #########"]),Jn(["#####.##.#####.#####","....................","#.###.###.#.##.#.#.#","#@###.###.#.##.#@#.#","#.###.#......#...#.#","#.###.#.####...###.#","......#.#12:.#......","#.###.#.#34:.###.###",".......0####...#....","#.###.#......#.#.###","#@###.##.#####.#...#","#..............#.#@#","########.#####.#.#.#","......##.#####......","#####.##.#####.#####"]),Jn(["####################","#..@............@..#","#.###.##.##.##.###.#","#.#####......#####.#","#.......####.......#","###.###.#  #.###.###","....###.#12:.###....","###.....#34:.....###","....###0#  #.###....","###.###.#  #.###.###","#.......####.......#","#.#####......#####.#","#.###.##.##.##.###.#","#..@............@..#","####################"]),Jn(["####################","#..................#","#.###.########.###.#","#@###..........###@#","#.###.#.####.#.###.#","#...#.#.#12:.#.#...#","#.#...#.#34:.#...#.#","..#.#.#.####.#.#.#..","#.#.#.#.####.#.#.#.#","#.#..............#.#","#.###.########.###.#","#@###...0......###@#","#.###.########.###.#","#..................#","####################"]),Jn(["##.# #.##.##########","#..#.#............@#","#.##..#.#.##.#.#.#.#","#.###.#.#.##.......#","#@......#....#.#.#.#","#####.######.......#","#@..#...:12:.#.#.#.#","..#.#.#.:34:........","#..0....##########.#","##.###.#...@.......#","#...#..#.#.#######.#","#.#.#.##.#...#...#.#","#.#.#..#.#.#.#.#.#.#",".....#.#...#...#....","##.# #.##.##########"]),Jn(["#####.########.#####","#####.##....##.#####","###......##......###","##.@#.#.####.#.#@.##","##.##..........##.##","......#.####.#......","####.##.#12:.##.####","####.##.#34:.##.####","......#0####.#......","##.##..........##.##","##.@#.#.####.#.#@.##","###......##......###","#####.##....##.#####","......########......","#####.########.#####"]),Jn(["#####      #####.# #","##..########.....@.#","#.#..........#####.#","#...########....##.#","###.###......##.##.#","#.......####.##..#.#","#.##.##.#12:.###.#.#","#.##.##.#34:.###.#.#","#.##.##0####.###...#","#.##.##.####.....#.#","#.##.##......###.#.#","#.##....###.####.#.#","#@##.######......@.#","#...........####.#.#","#############  #.# #"]),Jn(["####################","#..................#","#.#.############.#.#","#.#@............@#.#","#.###.#.####.#.###.#","#.....#.#12#.#.....#","#####.#.#34#.#.#####","....................","###.#.#.#.##.#.#.###","#.....#.#..#.#.....#","#.###.#.##.#.#.###.#","#..@#.#......#.#@..#","#.#.#.#.####.#.#.#.#","#.......0..........#","####################"]),Jn(["  #.#######.####.#  ","  #......@#....#.#  ","#####.##.##.##.#.###","......##.##.##.#....","#####.......##.#####","#...#.#.#####...@..#","#.#.#.#..:12:.##.###","#@#.#.##.#34:.##.###","#.#...##.####.##...#","....#.##.........#..","#####.###.##.#######","    #...#.#......#  ","  ###.#.#.#.#.##.#  ","  #....0..#.#.@..#  ","  #.#######.####.#  "]),Jn(["##.#        #.######","##.# ########....###","...# #......####.#..","#### ####.#.#......#","     #12:.#.###.####","     #34:.#.#.....@#","#########.#.##.#####","....................","########.##.########","..@.#.....#.#.......","###.#.#.#.#.#.######","#...#.#.@.#.#.#     ","#.###.#####.#.# ### ","#..##...0...#.# ### ","##.##########.#     "])],ms=I((function(e,t,n){this.UnpackedMazeState=e,this.UnpackedPacmanPosition=t,this.UnpackedGhostPositions=n}),z);const Ss=I((function(e,t,...n){O.call(this,e,t,...n)}),O);function vs(e,t){let n;if(n=Jr((function(n,r){let o=new Ss(1,"NotFound");return qn((function(t,r){for(let i=0;i<=n-1;i++)if(r[i]===e)switch(o.tag){case 2:case 3:o=new Ss(3,"NotUnique");break;case 0:throw new Error("unexpected case");default:o=new Ss(2,"Found",i,t)}}),t),o}),t),null==n)return new Ss(0,"InvalidMaze");return n}function Ps(e){const t=function(e,t){if(null==t)throw new Error(e);return ee(t)},n=t("Failed to unpack walls from maze definition, please check text format input.",Yr((function(e){return"#"===e||":"===e}),(function(e){return new gs(0,"MazeTile",e.fields[0])}),new gs(0,"MazeTile",0),e)),r=t("Failed to unpack rails from maze definition, please check text format input.",Yr((function(e){return"#"!==e}),(function(e){return e}),Wr,e)),o=t("Failed to unpack rails from maze definition, please check text format input.",Yr((function(e){return"#"!==e&&":"!==e}),(function(e){return e}),Wr,e)),i=t("Failed to obtains the dots and pills from maze definition, please check text format input.",Jr((function(t,r){if(t*r===n.length){const r=An(new Array(n.length),0,n.length,new gs(0,"MazeTile",0));return qn((function(e,o){for(let i=0;i<=t-1;i++){const s=e*t+i|0,u=n[s];let c;if(0!==u.fields[0])c=u.fields[0]+0;else{const e=o[i];c="."===e?17:"@"===e?18:0}r[s]=new gs(0,"MazeTile",c)}}),e),r}return null}),e)),s=function(e,t){switch(t.tag){case 1:throw new Error(zt(Lt("Could not find char '%s' in the maze definition."))(e));case 3:throw new Error(zt(Lt("Char '%s' is not unique in the maze definition."))(e));case 2:return new Lr(16*t.fields[0],16*t.fields[1]);default:throw new Error("Invalid maze definition")}};let u;u=jn((function(t){const n=String.fromCharCode(48+t);return s(n,vs(n,e))}),Wn(function(e,t,n){if(0===t)throw new Error("Step cannot be 0");return gt(()=>Pt(e=>t>0&&e<=n||t<0&&e>=n?[e,e+t]:null,e))}(1,1,4)));const c=s("0",("0",vs("0",e)));return new ms(new ps($n(0,e).length,Un(e),i,r,o),c,u)}const Ms=I((function(e,t,n,r){this.MostRecentScore=e,this.MostRecentHiScore=t,this.MostRecentLevelIndex=0|n,this.MostRecentLives=r}),z);const bs=I((function(e,t,n,r,o){this.MostRecentStatusPanel=e,this.MemoizedScoreString=t,this.MemoizedHiScoreString=n,this.MemoizedLevelIndexString=r,this.MemoizedLivesString=o}),z);const Ts=I((function(e,t,n,r,o,i,s,u,c){this.Random=e,this.LevelIndex=0|t,this.ScoreAndHiScore=n,this.MazeState=r,this.PacmanState=o,this.GhostsState=i,this.MemoizedStatusPanelStrings=s,this.WhereToOnGameOver=u,this.WhereToOnAllEaten=c}),z);function Cs(e,t,n,r){return new Ms(e,t,n,r)}function Ns(e){var t;return new bs(e,zt(Lt("SCORE %d"))(e.MostRecentScore),zt(Lt("HISCORE %d"))(e.MostRecentHiScore),(t=e.MostRecentLevelIndex+1|0,zt(Lt("FRAME %d"))(t)),zt(Lt("LIVES %d"))(e.MostRecentLives))}function Gs(e){if(function(e){const t=function(e){return e%16==0};return!!t(e.ptx)&&t(e.pty)}(e)){return[0|~~(e.ptx/16),0|~~(e.pty/16)]}return null}function ks(e,t){var n;return!g((n=Zr(t),new Hr(0,"MazeByte",n.fields[0]&e.fields[0])),Wr)}function Is(e){return new Br(e.ptx+5,e.pty+5,e.ptx+16-5,e.pty+16-5)}function Es(e){return new Br(e.ptx,e.pty,e.ptx+16,e.pty+16)}function xs(e,t){return new Ho(new Fo(e,t.PacState2.PacFacingDirection,t.PacState2.LivesLeft,t.PacState2.PacStartPosition),t.PacPosition)}function Ds(e,t){return new jo(new Uo(t.GhostState2.GhostTag,t.GhostState2.GhostBasePosition,t.GhostState2.GhostFacingDirection,e,t.GhostState2.GhostAITable),t.GhostPosition)}function Os(e,t){const n=16*e.MazeTilesCountX|0,r=16*e.MazeTilesCountY|0,o=0|(t.ptx<de(8)?t.ptx+n:t.ptx>=n-8?t.ptx-n:t.ptx),i=0|(t.pty<de(8)?t.pty+r:t.pty>=r-8?t.pty-r:t.pty);return new Lr(o,i)}function As(e,t,n,r,o){let i;switch(o.tag){case 2:i=new zr(1,0);break;case 1:i=new zr(0,de(1));break;case 3:i=new zr(0,1);break;default:i=new zr(de(1),0)}const s=function(e){let t;return t=new Lr(16*e.ptx,16*e.pty),Es(t)};let u;return u=function(e,t){switch(e.tag){case 1:return new Br(t.Left,t.Top,t.Right,t.Top);case 2:return new Br(t.Right,t.Top,t.Right,t.Bottom);case 3:return new Br(t.Left,t.Bottom,t.Right,t.Bottom);default:return new Br(t.Left,t.Top,t.Left,t.Bottom)}}(o,s(r)),function(r,o,i){var u,c,a;e:for(;;){const f=r,l=o,h=i;let w;if(w=new Lr(l.ptx+f.modx,l.pty+f.mody),w.ptx<0||w.pty<0||w.ptx>=e||w.pty>=t||(u=n[w.pty*e+w.ptx]).fields[0]>=1&&u.fields[0]<=16)return h;{const e=s(w);r=f,o=w,i=(a=h,new Br(P(v,(c=e).Left,a.Left),P(v,c.Top,a.Top),M(v,c.Right,a.Right),M(v,c.Bottom,a.Bottom)));continue e}}}(i,r,u)}function Rs(e,t,n,r){return[e-~~(16*n/2)|0,t-~~(16*r/2)|0]}function Ls(e,t,n,r,o,i){!function(e,t,n,r,o,i,s,u){const c=Rs(n,r,o,i);for(let n=0;n<=i-1;n++){const r=c[1]+16*n|0;for(let i=0;i<=o-1;i++){const a=s[n*o+i];_o(e,t,c[0]+16*i|0,r,~~a.fields[0],u)}}}(e,t,n,r,o.MazeTilesCountX,o.MazeTilesCountY,o.MazeTiles,i)}function zs(e,t,n){let r,o;r=Ti()[Yo.fields[0]],Gi(e,0,0,r),o=Ti()[Vo.fields[0]];const i=[160,128],s=Rs(i[0],i[1],t.MazeState.MazeTilesCountX,t.MazeState.MazeTilesCountY);let u,c,a,f;switch(Ls(e,o,i[0],i[1],t.MazeState,n),c=Os(t.MazeState,t.PacmanState.PacPosition),u=new Lr(c.ptx+s[0],c.pty+s[1]),a=t.PacmanState.PacState2.PacFacingDirection,f=t.PacmanState.PacState2.PacMode,f.tag){case 1:yo(Go,n)&&qo(e,o,u,a,new Ko(2,"DrawPacZapped"),n);break;case 2:break;default:{const r=tr((function(e){return 1===e.GhostState2.GhostMode.tag}),t.GhostsState)?new Ko(1,"DrawPacPillMode"):new Ko(0,"DrawPacNormal");qo(e,o,u,a,r,n)}}qn((function(r,i){let u,c,a,f;c=Os(t.MazeState,i.GhostPosition),u=new Lr(c.ptx+s[0],c.pty+s[1]),a=i.GhostState2.GhostTag,f=i.GhostState2.GhostMode,Jo(e,o,u,a,f,n)}),t.GhostsState),Ei(e,Xo,new fr(0,"LeftAlign"),new lr(0,"TopAlign"),20,2,t.MemoizedStatusPanelStrings.MemoizedScoreString),Ei(e,Xo,new fr(2,"RightAlign"),new lr(0,"TopAlign"),300,2,t.MemoizedStatusPanelStrings.MemoizedHiScoreString),Ei(e,Xo,new fr(0,"LeftAlign"),new lr(2,"BottomAlign"),20,254,t.MemoizedStatusPanelStrings.MemoizedLevelIndexString),Ei(e,Xo,new fr(2,"RightAlign"),new lr(2,"BottomAlign"),300,254,t.MemoizedStatusPanelStrings.MemoizedLivesString)}const Bs=I((function(e,t,...n){O.call(this,e,t,...n)}),O);function Fs(e,t,n){let r,o;switch(r=n.PacState2.PacFacingDirection,o=n.PacState2.PacMode,o.tag){case 1:case 2:return[new Bs(0,"EatenNothing"),n.PacPosition,r,0,new D];default:{const o=function(e){let t,n,r,o;return t=e(Di).Held,n=e(Oi).Held,r=e(Ai).Held,o=e(Ri).Held,[t,n,r,o]}(e),f=(i=o[0],s=o[1],u=o[2],c=o[3],a=r,!0===i&&!1===s&&!1===u&&!1===c?new Vr(1,"FacingUp"):!1===i&&!0===s&&!1===u&&!1===c?new Vr(3,"FacingDown"):!1===i&&!1===s&&!0===u&&!1===c?new Vr(0,"FacingLeft"):!1===i&&!1===s&&!1===u&&!0===c?new Vr(2,"FacingRight"):a),l=Lo(f,r),h=Gs(n.PacPosition);let w,d,g,p,y;switch(l.tag){case 2:w=f;break;case 3:case 1:if(null!=h){const e=0|h[1],n=0|h[0],o=e*t.MazeTilesCountX+n|0;w=ks(t.MazePlayersRails[o],f)?f:r}else w=r;break;default:w=f}if(null!=h){const e=0|h[1],n=0|h[0],r=e*t.MazeTilesCountX+n|0,o=t.MazeTiles[r];d=17===o.fields[0]?[new Bs(1,"EatenDot",r),10,new D(new yr(0,"PlaySoundEffect",Ni()[Qo.fields[0]]),new D)]:18===o.fields[0]?[new Bs(2,"EatenPowerPill",r),250,new D(new yr(0,"PlaySoundEffect",Ni()[ei.fields[0]]),new D)]:[new Bs(0,"EatenNothing"),0,new D]}else d=[new Bs(0,"EatenNothing"),0,new D];const m=Qr(w);if(y=new Lr(n.PacPosition.ptx+m.modx,n.PacPosition.pty+m.mody),p=Os(t,y),null!=h){const e=0|h[1],r=0|h[0],o=e*t.MazeTilesCountX+r|0;g=ks(t.MazePlayersRails[o],w)?p:n.PacPosition}else g=p;return[d[0],g,w,d[1],d[2]]}}var i,s,u,c,a}function Hs(e,t,n,r,o,i){let s;s=Es(r.PacPosition);const u=function(r,i,u,c){if(function(e){const t=function(e){return e.fields[0]>0?1:0};return(0|t(e.ProbLeft))+(0|t(e.ProbUp))+(0|t(e.ProbRight))+(0|t(e.ProbDown))>1}(c)&&!g(function(e,t){switch(e.tag){case 1:return t.ProbUp;case 2:return t.ProbRight;case 3:return t.ProbDown;default:return t.ProbLeft}}(r,c),new ro(0,"DirectionProbability",0))){let l;return l=As(t.MazeTilesCountX,t.MazeTilesCountY,t.MazeTiles,n,r),Fr(l,s)?i:(a=e,f=l,tr((function(e){if(g(e.GhostState2.GhostTag,a.GhostState2.GhostTag))return!1;{let t;return t=Es(e.GhostPosition),Fr(f,t)}}),o)?u(c):c)}return c;var a,f};return u(new Vr(3,"FacingDown"),ao,wo,u(new Vr(2,"FacingRight"),co,ho,u(new Vr(1,"FacingUp"),uo,lo,u(new Vr(0,"FacingLeft"),so,fo,i))))}function Ws(e,t,n,r,o,i){let s;s=e.GhostState2.GhostFacingDirection;const u=Gs(e.GhostPosition);let c;if(null!=u){const i=0|u[1],f=0|u[0],l=i*t.MazeTilesCountX+f|0,h=t.MazeGhostRails[l];if(g(h,qr))c=s;else{let u,l;u=function(e,t,n){let r;r=$r(e);const o=r|~~(t.fields[0]-1)<<2|0;return n.fields[0][o]}(s,h,e.GhostState2.GhostAITable);const w=new Lr(f,i);let d,p;switch(p=e.GhostState2.GhostMode,p.tag){case 0:d=Hs(e,t,w,r,n,u);break;case 1:d=function(e,t,n,r){let o;o=Es(n.PacPosition);const i=function(n,r){if(g(n,new ro(0,"DirectionProbability",0)))return n;{const i=As(e.MazeTilesCountX,e.MazeTilesCountY,e.MazeTiles,t,r);return Fr(o,i)?new ro(0,"DirectionProbability",0):n}};return new io(i(r.ProbLeft,new Vr(0,"FacingLeft")),i(r.ProbUp,new Vr(1,"FacingUp")),i(r.ProbRight,new Vr(2,"FacingRight")),i(r.ProbDown,new Vr(3,"FacingDown")))}(t,w,r,u);break;default:throw new Error("Should not be deciding direction for ghost in this state")}l=0==((a=d).ProbLeft.fields[0]|a.ProbUp.fields[0]|a.ProbDown.fields[0]|a.ProbRight.fields[0])?u:d;const y=function(e,t){const n=e.ProbLeft.fields[0],r=e.ProbUp.fields[0],o=e.ProbRight.fields[0],i=e.ProbDown.fields[0],s=n+r+o+i,u=t.fields[0]%s;if(0!==n&&u<n)return new Vr(0,"FacingLeft");if(0!==r&&u<n+r)return new Vr(1,"FacingUp");if(0!==i&&u<n+r+i)return new Vr(3,"FacingDown");if(0!==o&&u<n+r+i+o)return new Vr(2,"FacingRight");throw new Error("It should never be the case there are *no* exits from a decision point!")}(l,o);let m;m=Zr(y),c=y}}else c=s;var a;let f,l;if(null!=u){const e=0|u[1],n=0|u[0],r=e*t.MazeTilesCountX+n|0;l=g(t.MazeGhostRails[r],qr)}else l=!1;if(l)f=e.GhostPosition;else{let n;const r=Qr(c);n=new Lr(e.GhostPosition.ptx+r.modx,e.GhostPosition.pty+r.mody),f=Os(t,n)}return[f,c]}function Us(e){let t,n;var r,o,i,s;let u;return n=e.GhostState2.GhostBasePosition,r=n,o=e.GhostPosition,t=new zr((i=r.ptx-o.ptx|0)>=1?1:i<=-1?-1:0,(s=r.pty-o.pty|0)>=1?1:s<=-1?-1:0),u=new Lr(e.GhostPosition.ptx+t.modx,e.GhostPosition.pty+t.mody),[u,e.GhostState2.GhostFacingDirection]}function js(e,t,n,r,o){let i=n;return jn((function(n){return i=ds(i),function(e,t,n,r,o,i){var s,u,c;const a=[r.GhostPosition,r.GhostState2.GhostFacingDirection];let f,l;switch(l=r.GhostState2.GhostMode,l.tag){case 1:f=yo(Math.fround(20),i)?Ws(r,e,t,n,o):[a[0],a[1]];break;case 2:f=Us(r);break;case 3:f=[a[0],a[1]];break;default:f=Ws(r,e,t,n,o)}return new jo((s=r.GhostState2.GhostTag,u=r.GhostState2.GhostBasePosition,c=r.GhostState2.GhostMode,new Uo(s,u,f[1],c,r.GhostState2.GhostAITable)),f[0])}(e,o,t,n,i,r)}),o)}function _s(e){var t,n;let r;return r=e.GhostState2.GhostBasePosition,new jo((t=new Wo(0,"GhostNormal"),n=new Vr(1,"FacingUp"),new Uo(e.GhostState2.GhostTag,e.GhostState2.GhostBasePosition,n,t,e.GhostState2.GhostAITable)),r)}function Ks(e){const t=Cs(e.ScoreAndHiScore.Score,e.ScoreAndHiScore.HiScore,e.LevelIndex,e.PacmanState.PacState2.LivesLeft);return new Ts(e.Random,e.LevelIndex,e.ScoreAndHiScore,e.MazeState,function(e){var t;let n;return n=e.PacState2.PacStartPosition,new Ho((t=new Vr(2,"FacingRight"),new Fo(new Bo(0,"PacAlive"),t,e.PacState2.LivesLeft-1,e.PacState2.PacStartPosition)),n)}(e.PacmanState),jn(_s,e.GhostsState),Ns(t),e.WhereToOnGameOver,e.WhereToOnAllEaten)}function qs(e,t,n){var r,o,i;let s;switch(s=n.PacState2.PacMode,s.tag){case 1:{const e=new D;return[(r=t>=s.fields[0],i=new Bo(2,"PacDead"),o=function(e){return xs(i,e)},r?o(n):n),e]}case 2:return[n,new D];default:{let r,o,i,s;r=Is(n.PacPosition),u=r,i=tr((function(e){let t;switch(t=e.GhostState2.GhostMode,t.tag){case 1:case 3:case 2:return!1;default:{let t;return t=Is(e.GhostPosition),Fr(u,t)}}}),e);const c=new Bo(1,"PacDyingUntil",t+No);return s=function(e){return xs(c,e)},o=i?s(n):n,[o,1===o.PacState2.PacMode.tag?new D(new yr(0,"PlaySoundEffect",Ni()[ii.fields[0]]),new D):new D]}}var u}function Js(e,t){let n;n=Is(e.PacPosition);const r=function(e,t){let n;switch(n=t.GhostState2.GhostMode,n.tag){case 2:case 3:return!1;case 1:{let n;return n=Is(t.GhostPosition),Fr(e,n)}default:return!1}};let o;var i,s,u;i=function(e){return r(n,e)?500:0},s=t,o=Fn((function(e,t){return u.Add(e,i(t))}),(u={GetZero:()=>0,Add:(e,t)=>e+t}).GetZero(),s);const c=o>0?new D(new yr(0,"PlaySoundEffect",Ni()[oi.fields[0]]),new D):new D;let a;const f=o>0;let l,h;const w=N(1,r,[n]);let d;const g=new Wo(2,"GhostReturningToBase");return d=function(e){return Ds(g,e)},h=function(e){return w(e)?d(e):e},l=function(e){return jn(h,e)},a=f?l(t):t,[a,o,c]}function Xs(e,t,n,r){const o=mi(e),i=Fs(t,o.MazeState,o.PacmanState);let s;var u,c,a;let f,l,h,w;var d;let p,m;u=i[1],c=i[2],a=o.PacmanState,s=g(c,a.PacState2.PacFacingDirection)?new Ho(a.PacState2,u):new Ho(new Fo(a.PacState2.PacMode,c,a.PacState2.LivesLeft,a.PacState2.PacStartPosition),u),f=function(e,t){var n,r;switch(e.tag){case 1:case 2:n=1,r=e.fields[0];break;default:n=0}switch(n){case 0:return t;case 1:return t.MazeTiles[r]=new gs(0,"MazeTile",0),t}}(i[0],o.MazeState),d=n,w=jn((function(e){let t;var n,r;switch(t=e.GhostState2.GhostMode,t.tag){case 1:case 3:n=1,r=t.fields[0];break;case 2:n=2;break;default:n=0}switch(n){case 0:return e;case 1:{const t=d>=r;let n;const o=new Wo(0,"GhostNormal");return n=function(e){return Ds(o,e)},t?n(e):e}case 2:{let t;const n=new Wo(3,"GhostRegeneratingUntil",d+To);return t=function(e){return Ds(n,e)},g(e.GhostPosition,e.GhostState2.GhostBasePosition)?t(e):e}}}),o.GhostsState),h=function(e,t,n){switch(e.tag){case 1:return n;case 2:return jn((function(e){let n;switch(n=e.GhostState2.GhostMode,n.tag){case 1:return Ds(new Wo(1,"GhostEdibleUntil",t+vo),e);case 2:case 3:return e;default:return Ds(new Wo(1,"GhostEdibleUntil",t+vo),e)}}),n);default:return n}}(i[0],n,w),l=js(f,s,o.Random,n,h),p=qs(l,n,s),m=Js(p[0],l);const S=i[3]+m[1];let v,P,b;v=function(e,t){const n=t.Score+e;return new Ir(n,M(y,n,t.HiScore))}(S,o.ScoreAndHiScore),P=function(e,t,n){var r;if(t>0){const o=0|~~((e.Score-t)/1e4);if((0|~~(e.Score/1e4))>o){return[new Ho((r=n.PacState2.LivesLeft+1,new Fo(n.PacState2.PacMode,n.PacState2.PacFacingDirection,r,n.PacState2.PacStartPosition)),n.PacPosition),new D(new yr(0,"PlaySoundEffect",Ni()[ui.fields[0]]),new D)]}return[n,new D]}return[n,new D]}(v,S,p[0]);const C=Cs(v.Score,v.HiScore,o.LevelIndex,P[0].PacState2.LivesLeft);b=g(C,o.MemoizedStatusPanelStrings.MostRecentStatusPanel)?o.MemoizedStatusPanelStrings:Ns(C);const N=new Ts(ds(o.Random),o.LevelIndex,v,f,P[0],m[0],b,o.WhereToOnGameOver,o.WhereToOnAllEaten);if(2===P[0].PacState2.PacMode.tag)return P[0].PacState2.LivesLeft<=1?N.WhereToOnGameOver(v,n):function(e,t){const n=Vi(Ti()[Yo.fields[0]],Ci()[Xo.fields[0]],"LIFE OVER",320,256);let r;return r=Hi(e),Wi(Io,t,T(2,r),n)}((function(t){return hs((function(t){let n;n=Ks(N);const r=vi(e);return yi(n,T(3,Si(e)),T(4,r),new D)}),cs(),ko,t)}),n);if(f.MazeTiles.some((function(e){return 18===(t=e).fields[0]||17===t.fields[0];var t}))){const t=(G=[i[4],p[1],m[2],P[1]],Hn(pt((function(e,t){return Fn((function(e,t){return new D(t,e)}),e,t)}),new D,G))),n=vi(e),r=Si(e);return yi(N,T(3,r),T(4,n),t)}{const t=new So(N.ScoreAndHiScore,N.PacmanState.PacState2.LivesLeft);let r;return r=Ui(Eo,n,(function(e,n){return N.WhereToOnAllEaten(N.LevelIndex,t,n)}),e),ji(new D(new yr(0,"PlaySoundEffect",Ni()[si.fields[0]]),new D),r)}var G}function Ys(e,t,n,r){var o;let i;i=Ps(ys[e%(0|ys.length)]);const s=[new eo("Charger",100,1,100,0,80,20,1,50,1,80,10,1),new eo("Standard",95,5,99,0,70,20,10,45,10,30,30,10),new eo("Ditherer",60,40,95,0,30,30,30,30,30,20,20,20)],u=[s[1],s[2],s[1],s[0]];let c;const a=new ws(0,"XorShift32State",208947);return c=new Ts(a,e,r.ScoreAndHiScore,i.UnpackedMazeState,new Ho((o=new Vr(2,"FacingRight"),new Fo(new Bo(0,"PacAlive"),o,r.Lives,i.UnpackedPacmanPosition)),i.UnpackedPacmanPosition),_n((function(e,t){var n,r;const o=u[e%u.length];return new jo((n=new zo(0,"GhostNumber",e),r=new Wo(0,"GhostNormal"),new Uo(n,t,new Vr(1,"FacingUp"),r,function(e){let t,n;return n=jn((function(t){return new io(oo(e,t.PCLeft),oo(e,t.PCUp),oo(e,t.PCRight),oo(e,t.PCDown))}),Jn([new no(new to(0,"Never"),new to(0,"Never"),new to(0,"Never"),new to(2,"OnlyWay")),new no(new to(0,"Never"),new to(0,"Never"),new to(0,"Never"),new to(2,"OnlyWay")),new no(new to(0,"Never"),new to(0,"Never"),new to(0,"Never"),new to(2,"OnlyWay")),new no(new to(0,"Never"),new to(0,"Never"),new to(0,"Never"),new to(2,"OnlyWay")),new no(new to(0,"Never"),new to(0,"Never"),new to(2,"OnlyWay"),new to(0,"Never")),new no(new to(0,"Never"),new to(0,"Never"),new to(2,"OnlyWay"),new to(0,"Never")),new no(new to(0,"Never"),new to(0,"Never"),new to(2,"OnlyWay"),new to(0,"Never")),new no(new to(0,"Never"),new to(0,"Never"),new to(2,"OnlyWay"),new to(0,"Never")),new no(new to(0,"Never"),new to(0,"Never"),new to(4,"Back90"),new to(3,"Turn90")),new no(new to(0,"Never"),new to(0,"Never"),new to(3,"Turn90"),new to(4,"Back90")),new no(new to(0,"Never"),new to(0,"Never"),new to(1,"Correct"),new to(1,"Correct")),new no(new to(0,"Never"),new to(0,"Never"),new to(1,"Correct"),new to(1,"Correct")),new no(new to(0,"Never"),new to(2,"OnlyWay"),new to(0,"Never"),new to(0,"Never")),new no(new to(0,"Never"),new to(2,"OnlyWay"),new to(0,"Never"),new to(0,"Never")),new no(new to(0,"Never"),new to(2,"OnlyWay"),new to(0,"Never"),new to(0,"Never")),new no(new to(0,"Never"),new to(2,"OnlyWay"),new to(0,"Never"),new to(0,"Never")),new no(new to(0,"Never"),new to(1,"Correct"),new to(0,"Never"),new to(1,"Correct")),new no(new to(0,"Never"),new to(5,"Onward180"),new to(0,"Never"),new to(6,"Back180")),new no(new to(0,"Never"),new to(1,"Correct"),new to(0,"Never"),new to(1,"Correct")),new no(new to(0,"Never"),new to(6,"Back180"),new to(0,"Never"),new to(5,"Onward180")),new no(new to(0,"Never"),new to(3,"Turn90"),new to(4,"Back90"),new to(0,"Never")),new no(new to(0,"Never"),new to(1,"Correct"),new to(1,"Correct"),new to(0,"Never")),new no(new to(0,"Never"),new to(1,"Correct"),new to(1,"Correct"),new to(0,"Never")),new no(new to(0,"Never"),new to(4,"Back90"),new to(3,"Turn90"),new to(0,"Never")),new no(new to(0,"Never"),new to(10,"TurnIntoT"),new to(11,"TurnBackT"),new to(10,"TurnIntoT")),new no(new to(0,"Never"),new to(7,"OnwardT"),new to(8,"TurnAwayT"),new to(9,"BackT")),new no(new to(0,"Never"),new to(1,"Correct"),new to(1,"Correct"),new to(1,"Correct")),new no(new to(0,"Never"),new to(9,"BackT"),new to(8,"TurnAwayT"),new to(7,"OnwardT")),new no(new to(2,"OnlyWay"),new to(0,"Never"),new to(0,"Never"),new to(0,"Never")),new no(new to(2,"OnlyWay"),new to(0,"Never"),new to(0,"Never"),new to(0,"Never")),new no(new to(2,"OnlyWay"),new to(0,"Never"),new to(0,"Never"),new to(0,"Never")),new no(new to(2,"OnlyWay"),new to(0,"Never"),new to(0,"Never"),new to(0,"Never")),new no(new to(1,"Correct"),new to(0,"Never"),new to(0,"Never"),new to(1,"Correct")),new no(new to(3,"Turn90"),new to(0,"Never"),new to(0,"Never"),new to(4,"Back90")),new no(new to(4,"Back90"),new to(0,"Never"),new to(0,"Never"),new to(3,"Turn90")),new no(new to(1,"Correct"),new to(0,"Never"),new to(0,"Never"),new to(1,"Correct")),new no(new to(5,"Onward180"),new to(0,"Never"),new to(6,"Back180"),new to(0,"Never")),new no(new to(1,"Correct"),new to(0,"Never"),new to(1,"Correct"),new to(0,"Never")),new no(new to(6,"Back180"),new to(0,"Never"),new to(5,"Onward180"),new to(0,"Never")),new no(new to(1,"Correct"),new to(0,"Never"),new to(1,"Correct"),new to(0,"Never")),new no(new to(7,"OnwardT"),new to(0,"Never"),new to(9,"BackT"),new to(8,"TurnAwayT")),new no(new to(10,"TurnIntoT"),new to(0,"Never"),new to(10,"TurnIntoT"),new to(11,"TurnBackT")),new no(new to(9,"BackT"),new to(0,"Never"),new to(7,"OnwardT"),new to(8,"TurnAwayT")),new no(new to(1,"Correct"),new to(0,"Never"),new to(1,"Correct"),new to(1,"Correct")),new no(new to(1,"Correct"),new to(1,"Correct"),new to(0,"Never"),new to(0,"Never")),new no(new to(1,"Correct"),new to(1,"Correct"),new to(0,"Never"),new to(0,"Never")),new no(new to(4,"Back90"),new to(3,"Turn90"),new to(0,"Never"),new to(0,"Never")),new no(new to(3,"Turn90"),new to(4,"Back90"),new to(0,"Never"),new to(0,"Never")),new no(new to(1,"Correct"),new to(1,"Correct"),new to(0,"Never"),new to(1,"Correct")),new no(new to(8,"TurnAwayT"),new to(7,"OnwardT"),new to(0,"Never"),new to(9,"BackT")),new no(new to(11,"TurnBackT"),new to(10,"TurnIntoT"),new to(0,"Never"),new to(10,"TurnIntoT")),new no(new to(8,"TurnAwayT"),new to(9,"BackT"),new to(0,"Never"),new to(7,"OnwardT")),new no(new to(7,"OnwardT"),new to(8,"TurnAwayT"),new to(9,"BackT"),new to(0,"Never")),new no(new to(1,"Correct"),new to(1,"Correct"),new to(1,"Correct"),new to(0,"Never")),new no(new to(9,"BackT"),new to(8,"TurnAwayT"),new to(7,"OnwardT"),new to(0,"Never")),new no(new to(10,"TurnIntoT"),new to(11,"TurnBackT"),new to(10,"TurnIntoT"),new to(0,"Never")),new no(new to(12,"Onward4"),new to(13,"Turn4"),new to(13,"Turn4"),new to(14,"Back4")),new no(new to(13,"Turn4"),new to(12,"Onward4"),new to(13,"Turn4"),new to(14,"Back4")),new no(new to(14,"Back4"),new to(13,"Turn4"),new to(12,"Onward4"),new to(13,"Turn4")),new no(new to(13,"Turn4"),new to(14,"Back4"),new to(13,"Turn4"),new to(12,"Onward4"))])),t=zn(n,Array),new go(0,"GhostAI",t)}(o))),t)}),i.UnpackedGhostPositions),Ns(Cs(r.ScoreAndHiScore.Score,r.ScoreAndHiScore.HiScore,e,r.Lives)),n,t),yi(c,zs,Xs,new D)}const Vs=I((function(e,t,n,r,o,i,s,u){this.Scoreboard=e,this.ScoreboardMemo=t,this.PacLeftMemo=n,this.PacRightMemo=r,this.Ghost0Memo=o,this.Ghost1Memo=i,this.Ghost2Memo=s,this.Ghost3Memo=u}),z);function Zs(e,t,n){let r,o,i,s,u,c;r=Ti()[Zo.fields[0]],Gi(e,0,0,r),o=Ti()[Vo.fields[0]],i=160,s=51,u=128,c=192;const a=function(t){fi(e,o,n,t)},f=function(t){li(e,o,n,t)};a(t.PacRightMemo),a(t.PacLeftMemo),f(t.Ghost0Memo),f(t.Ghost1Memo),f(t.Ghost2Memo),f(t.Ghost3Memo),Ei(e,Xo,new fr(1,"CentreAlign"),new lr(1,"MiddleAlign"),160,51,"PAC MAN"),xi(e,Xo,new fr(1,"CentreAlign"),new lr(1,"MiddleAlign"),160,128,16,t.ScoreboardMemo),Ei(e,Xo,new fr(1,"CentreAlign"),new lr(1,"MiddleAlign"),160,192,"USE CURSOR KEYS ... Z TO START")}const $s=I((function(e,t,n){this.InterruptKey=e,this.VideoPlayerState=t,this.WhereToOnInterrupt=n}),z);function Qs(e,t,n){t.VideoPlayerState.Draw(e,n)}function eu(e,t,n,r){const o=mi(e);if(t(o.InterruptKey).JustDown)return o.WhereToOnInterrupt(n);{let t,i;i=o.VideoPlayerState.Frame(Z,n,r),t=new $s(o.InterruptKey,i,o.WhereToOnInterrupt);const s=vi(e);return yi(t,T(3,Si(e)),T(4,s),new D)}}let tu=new D;function nu(e,t,n){var r;return function(e,t,n){const r=Vi(Ti()[Yo.fields[0]],Ci()[Xo.fields[0]],zt(Lt("SCREEN COMPLETE  SCORE %d"))(e.ScoreAndHiScore.Score),320,256);let o;return o=Hi(t),Wi(xo,n,T(2,o),r)}(t,(r=e+1|0,function(e){return ou(r,t,e)}),n)}function ru(e,t){let n;const r=yi(new Zi(o=e,"SCORE   "+o.Score.toString(),"HI SCORE   "+o.HiScore.toString(),hi(new Vr(2,"FacingRight"),20,50),hi(new Vr(0,"FacingLeft"),80,50),wi(new zo(0,"GhostNumber",0),20,75),wi(new zo(0,"GhostNumber",1),40,75),wi(new zo(0,"GhostNumber",2),60,75),wi(new zo(0,"GhostNumber",3),80,75)),$i,bi,new D);var o;return n=Ui(Do,t,(function(t,n){return us(t,function(e,t){return Ji(e,tu,(function(e,t){return tu=e,iu(t)}),t)}(e,n),new ns(2,"ComingFromLeft"),320,256,(function(e,t){let n;let r,o,i;var s;return n=e/t,i=(s=n)*s,o=t*i,r=o,r}),Math.fround(1),n)}),r),ji(new D(new yr(0,"PlaySoundEffect",Ni()[ni.fields[0]]),new D),n)}function ou(e,t,n){return hs((function(n){return Ys(e,nu,ru,t)}),cs(),ko,n)}function iu(e){const t=new So(new Ir(0,Cr(tu)),3),n=yi(new Vs(r=tu,kr(24,r),hi(new Vr(2,"FacingRight"),20,20),hi(new Vr(0,"FacingLeft"),80,20),wi(new zo(0,"GhostNumber",0),20,90),wi(new zo(0,"GhostNumber",1),40,90),wi(new zo(0,"GhostNumber",2),60,90),wi(new zo(0,"GhostNumber",3),80,90)),Zs,bi,new D);var r;return function(e,t,n){return yi(new $s(t,n,e),Qs,eu,new D)}((function(e){return ou(0,t,e)}),Li,n)}function su(e,t){return tu=function(e,t,n){let r;return r=_n((function(e,r){const o=t+(e>>>0)*n;return new br(r,o,o.toString())}),e),nr(Tr,r,{Compare:y})}(Jn(["VINNY","HELEN","JARVIS","JULIA"]),2500,2500),iu()}const uu=new X(0,"WebBrowserKeyCode",80),cu=I((function(e,t,n,r,o){this.WebBrowserKeyCode=e,this.ThisKeyScanCode=t,this.MutHeld=n,this.MutJustPressed=r,this.MutWaitingRelease=o}),z);function au(e,t){return new cu(e,t,!1,!1,!1)}function fu(e){return new Y(e.MutJustPressed,e.MutHeld)}const lu=I((function(e,t,n){this.MutableKeyStatesList=e,this.PauseKey=t,this.GameIsPaused=n}),z);function hu(e,t){let n;if(n=Vn((function(e){return g(e.ThisKeyScanCode,t)}),e.MutableKeyStatesList),null==n)return g(t,e.PauseKey.ThisKeyScanCode)?e.PauseKey:null;return n}function wu(e,t){const n=hu(e,t);if(null!=n){const t=n;return t.MutWaitingRelease||(g(t.ThisKeyScanCode,e.PauseKey.ThisKeyScanCode)&&((r=e).GameIsPaused=!r.GameIsPaused),t.MutHeld=!0,t.MutJustPressed=!0,t.MutWaitingRelease=!0),!0}return!1;var r}function du(e,t){const n=hu(e,t);if(null!=n){const e=n;return e.MutHeld=!1,e.MutWaitingRelease=!1,!0}return!1}I((function(e,t){this.Fonts=e,this.Images=t}),z);function gu(e,t,n,r,o,i){const s=[];!function i(u){if(null!=u.tail){const o=e(u.head),c=t(u.head),a=0|n(u.head),f=0|r(u.head);loadImageThenDo(o,c,(function(e){Ln(new ur(new or(o,c?new rr(1,"MagentaColourKeyImage"):new rr(0,"OpaqueImage"),a,f),new sr(0,"HostImageRef",e)),s),i(u.tail)}))}else o(s.slice())}(i)}function pu(e,t,n,r){const o=function(e){return e.ImageFileName},i=function(e){return 1===e.ImageTransparency.tag},s=function(e){return e.ImageWidth},u=function(e){return e.ImageHeight};gu(o,i,s,u,(function(t){let c;c=Rn(hr,t,Array),gu(o,i,s,u,(function(e){!function(e,t,n){const r=[];!function n(o){if(null!=o.tail){const t=e(o.head);loadSoundThenDo(t,(function(e){Ln(new pr(new wr(t),new gr(0,"HostSoundRef",e)),r),n(o.tail)}))}else t(r.slice())}(n)}((function(e){return e.SoundFileName}),(function(t){r(e,c,t)}),n)}),e)}),t)}function yu(e,t,n,r,o,i){var s,u;s=o,u=i,Ti(r),Ci(s),Ni(u);const c=document.getElementById("gameScreen").getContext("2d");let a;const f=t();if(0!==f.tag)throw new Error(f.fields[0]);a=f.fields[0];const l=Math.fround(0),h=Math.fround(.019999999552965164),w=n(a,l),d=(p=80,y=jn((function(e){return[e.fields[0],new X(0,"WebBrowserKeyCode",e.fields[0])]}),e),new lu(jn((function(e){return au(e[1],e[0])}),y),au(uu,p),!1));var p,y;const m=function(e,t){document.addEventListener(e,(function(e){t(d,~~e.keyCode)&&e.preventDefault()}))};m("keydown",wu),m("keyup",du),document.getElementById("loaderScreen").classList.add("hidden"),document.getElementById("gameScreen").classList.remove("hidden");!function e(t,n,r){const o=n+1;let i;let s;var u;i=o/Math.fround(50),t.Draw((function(e){!function(e,t){switch(t.tag){case 2:{let n,r,o,i,s,u;n=t.fields[2].ImageMetadata.ImageWidth,r=t.fields[2].ImageMetadata.ImageHeight,o=~~(t.fields[0]+Math.fround(.5)),i=~~(t.fields[1]+Math.fround(.5)),s=t.fields[3],u=t.fields[4],n>0&&r>0&&s>0&&u>0&&e.drawImage(t.fields[2].HostImageRef.fields[0],0,0,n,r,o,i,s,u);break}case 3:{let n,r,o,i;n=~~(t.fields[4]+Math.fround(.5)),r=~~(t.fields[5]+Math.fround(.5)),o=t.fields[6],i=t.fields[7],t.fields[2]>0&&t.fields[3]>0&&o>0&&i>0&&e.drawImage(t.fields[8].HostImageRef.fields[0],t.fields[0],t.fields[1],t.fields[2],t.fields[3],n,r,o,i);break}case 1:{let n,r,o,i;n=t.fields[2],r=t.fields[3],o=t.fields[0],i=t.fields[1];const s="#"+Ft("{0:x6}",t.fields[4].fields[0]);e.fillStyle=s,e.fillRect(o,i,n,r);break}default:{let n,r;n=t.fields[0],r=t.fields[1],e.drawImage(t.fields[2].HostImageRef.fields[0],n,r)}}}(c,e)}),i),s=t.Frame((function(e){return function(e,t){let n;return n=Vn((function(e){return g(e.WebBrowserKeyCode,t)}),e.MutableKeyStatesList),null==n?g(t,e.PauseKey.WebBrowserKeyCode)?fu(e.PauseKey):V:fu(n)}(d,e)}),i,h),Kn((function(e){switch(e.tag){case 1:case 2:break;default:t=e.fields[0].HostSoundRef,playSound(t.fields[0])}var t}),s.Sounds()),tr((function(e){return e.MutJustPressed}),(u=d).MutableKeyStatesList)&&Kn((function(e){e.MutJustPressed=!1}),u.MutableKeyStatesList);window.setTimeout(N(1,e,[s,o]),17)}(w,0)}function mu(){const e=Jn([new X(0,"WebBrowserKeyCode",37),new X(0,"WebBrowserKeyCode",39),new X(0,"WebBrowserKeyCode",38),new X(0,"WebBrowserKeyCode",40),new X(0,"WebBrowserKeyCode",90)]);pu(vr,Sr,Pr,(function(t,n,r){yu(e,(function(){return new te(0,"Ok",1)}),su,t,n,r)}))}mu(),n.d(t,"WebMain",(function(){return mu}))}]);