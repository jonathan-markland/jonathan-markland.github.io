!function(n){var e={};function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var i in n)t.d(r,i,function(e){return n[e]}.bind(null,i));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=0)}([function(n,e,t){"use strict";function r(n){return null!=n&&(Array.isArray(n)||ArrayBuffer.isView(n))}function i(n){return null!=n&&"function"==typeof n.Dispose}t.r(e);function o(n,e,t){return n.has(e)?[!0,n.get(e)]:[!1,t]}function a(n,e){return!e.has(n)&&(e.add(n),!0)}function u(n){const e=n;return"number"==typeof e.offset?e.offset:1===n.kind?0:-6e4*n.getTimezoneOffset()}class s{static id(n){return s.idMap.has(n)||s.idMap.set(n,++s.count),s.idMap.get(n)}}function c(n){let e=0,t=5381;const r=n.length;for(;e<r;)t=33*t^n.charCodeAt(e++);return t}function l(n){return 2654435761*n|0}function f(n){return 0===n.length?0:n.reduce((n,e)=>(n<<5)+n^e)}function h(n){if(null==n)return 0;switch(typeof n){case"boolean":return n?1:0;case"number":return l(n);case"string":return c(n);default:if(function(n){return null!=n&&"function"==typeof n.GetHashCode}(n))return n.GetHashCode();if(r(n)){const e=n.length,t=new Array(e);for(let r=0;r<e;r++)t[r]=h(n[r]);return f(t)}return c(String(n))}}function d(n,e,t){if(null==n)return null==e;if(null==e)return!1;if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function g(n,e){return d(n,e,w)}function w(n,e){return n===e||(null==n?null==e:null!=e&&("object"==typeof n&&(function(n){return null!=n&&"function"==typeof n.Equals}(n)?n.Equals(e):r(n)?r(e)&&g(n,e):n instanceof Date&&(e instanceof Date&&0===p(n,e)))))}function p(n,e){let t,r;return"offset"in n&&"offset"in e?(t=n.getTime(),r=e.getTime()):(t=n.getTime()+u(n),r=e.getTime()+u(e)),t===r?0:t<r?-1:1}function m(n,e){return n===e?0:n<e?-1:1}function S(n,e,t){if(null==n)return null==e?0:1;if(null==e)return-1;if(n.length!==e.length)return n.length<e.length?-1:1;for(let r=0,i=0;r<n.length;r++)if(i=t(n[r],e[r]),0!==i)return i;return 0}function M(n,e){return S(n,e,y)}function y(n,e){return n===e?0:null==n?null==e?0:-1:null==e?1:"object"!=typeof n?n<e?-1:1:function(n){return null!=n&&"function"==typeof n.CompareTo}(n)?n.CompareTo(e):r(n)&&r(e)?M(n,e):n instanceof Date&&e instanceof Date?p(n,e):1}function I(n,e,t){return n(e,t)<0?e:t}function T(n,e,t){return n(e,t)>0?e:t}function C(n){let e=n;return n=>void 0===n?e:void(e=n)}s.idMap=new WeakMap,s.count=0;function W(n,e){if(null==e)return null;if(e.length>1)return e;let t;switch(n){case 2:t=(n,t)=>e(n)(t);break;case 3:t=(n,t,r)=>e(n)(t)(r);break;case 4:t=(n,t,r,i)=>e(n)(t)(r)(i);break;case 5:t=(n,t,r,i,o)=>e(n)(t)(r)(i)(o);break;case 6:t=(n,t,r,i,o,a)=>e(n)(t)(r)(i)(o)(a);break;case 7:t=(n,t,r,i,o,a,u)=>e(n)(t)(r)(i)(o)(a)(u);break;case 8:t=(n,t,r,i,o,a,u,s)=>e(n)(t)(r)(i)(o)(a)(u)(s);break;default:throw new Error("Uncurrying to more than 8-arity is not supported: "+n)}return t.__CURRIED__=e,t}function A(n,e){if(null!=e){if("__CURRIED__"in e)return e.__CURRIED__;switch(n){case 2:return n=>t=>e(n,t);case 3:return n=>t=>r=>e(n,t,r);case 4:return n=>t=>r=>i=>e(n,t,r,i);case 5:return n=>t=>r=>i=>o=>e(n,t,r,i,o);case 6:return n=>t=>r=>i=>o=>a=>e(n,t,r,i,o,a);case 7:return n=>t=>r=>i=>o=>a=>u=>e(n,t,r,i,o,a,u);case 8:return n=>t=>r=>i=>o=>a=>u=>s=>e(n,t,r,i,o,a,u,s);default:throw new Error("Currying to more than 8-arity is not supported: "+n)}}}function v(n,e,t){if(null==e)return null;if("__CURRIED__"in e){e=e.__CURRIED__;for(let n=0;n<t.length;n++)e=e(t[n]);return e}switch(n){case 1:return n=>e.apply(null,t.concat([n]));case 2:return n=>r=>e.apply(null,t.concat([n,r]));case 3:return n=>r=>i=>e.apply(null,t.concat([n,r,i]));case 4:return n=>r=>i=>o=>e.apply(null,t.concat([n,r,i,o]));case 5:return n=>r=>i=>o=>a=>e.apply(null,t.concat([n,r,i,o,a]));case 6:return n=>r=>i=>o=>a=>u=>e.apply(null,t.concat([n,r,i,o,a,u]));case 7:return n=>r=>i=>o=>a=>u=>s=>e.apply(null,t.concat([n,r,i,o,a,u,s]));case 8:return n=>r=>i=>o=>a=>u=>s=>c=>e.apply(null,t.concat([n,r,i,o,a,u,s,c]));default:throw new Error("Partially applying to more than 8-arity is not supported: "+n)}}function k(n,e){if(n.has(e))return n.get(e);throw new Error(`The given key '${e}' was not present in the dictionary.`)}function E(n,e){return null!=e&&Object.getPrototypeOf(n).constructor===Object.getPrototypeOf(e).constructor}function b(n,e){return function(n,e){n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}(n,e||x),n}function x(){}function D(n,e){if(n===e)return 0;if(null==e)return-1;for(;null!=n.tail;){if(null==e.tail)return 1;const t=y(n.head,e.head);if(0!==t)return t;n=n.tail,e=e.tail}return null==e.tail?0:-1}function H(n,e){this.head=n,this.tail=e}function P(n,e,...t){this.tag=0|n,this.name=e,this.fields=t}function O(n,e){const t={},r=null==e?Object.keys(n):e(n);for(let e=0;e<r.length;e++)t[r[e]]=n[r[e]];return t}function X(n,e,t){if(n===e)return!0;if(E(n,e)){const r=null==t?Object.keys(n):t(n);for(let t=0;t<r.length;t++)if(!w(n[r[t]],e[r[t]]))return!1;return!0}return!1}function F(n,e,t){if(n===e)return 0;if(E(n,e)){const r=null==t?Object.keys(n):t(n);for(let t=0;t<r.length;t++){const i=y(n[r[t]],e[r[t]]);if(0!==i)return i}return 0}return-1}function G(){}x.prototype.toString=function(){return"{"+Object.keys(this).map(n=>n+" = "+String(this[n])).join(";\n ")+"}"},x.prototype.GetHashCode=function(){return function(n){if(null==n)return 0;switch(typeof n){case"boolean":return n?1:0;case"number":return l(n);case"string":return c(n);default:return l(s.id(n))}}(this)},x.prototype.Equals=function(n){return this===n},H.prototype.toString=function(){return"["+Array.from(this).map(n=>String(n)).join("; ")+"]"},H.prototype.toJSON=function(){return Array.from(this)},H.prototype[Symbol.iterator]=function(){let n=this;return{next:()=>{const e=n;return n=n.tail,{done:null==e.tail,value:e.head}}}},H.prototype.GetHashCode=function(){return f(Array.from(this).map(h))},H.prototype.Equals=function(n){return 0===D(this,n)},H.prototype.CompareTo=function(n){return D(this,n)},P.prototype.toString=function(){const n=this.fields.length;return 0===n?this.name:1===n?this.name+" "+String(this.fields[0]):this.name+" ("+this.fields.map(n=>String(n)).join(",")+")"},P.prototype.toJSON=function(){return 0===this.fields.length?this.name:[this.name].concat(this.fields)},P.prototype.GetHashCode=function(){const n=this.fields.map(n=>h(n));return n.splice(0,0,l(this.tag)),f(n)},P.prototype.Equals=function(n){return this===n||E(this,n)&&this.tag===n.tag&&g(this.fields,n.fields)},P.prototype.CompareTo=function(n){return this===n?0:E(this,n)?this.tag===n.tag?M(this.fields,n.fields):this.tag<n.tag?-1:1:-1},G.prototype.toString=function(){return"{"+Object.keys(this).map(n=>n+" = "+String(this[n])).join(";\n ")+"}"},G.prototype.toJSON=function(){return O(this)},G.prototype.GetHashCode=function(){return f(Object.keys(this).map(n=>h(this[n])))},G.prototype.Equals=function(n){return X(this,n)},G.prototype.CompareTo=function(n){return F(this,n)};const B=b((function(n){this.contents=n}),G),R=b((function(n){this.stack=Error().stack,this.message=n}),x);function L(n){return Object.keys(n).filter(n=>"message"!==n&&"stack"!==n)}const K=b((function(){R.call(this)}),R);K.prototype.toString=function(){const n=L(this),e=n.length;return 0===e?this.message:1===e?this.message+" "+String(this[n[0]]):this.message+" ("+n.map(n=>String(this[n])).join(",")+")"},K.prototype.toJSON=function(){return O(this,L)},K.prototype.GetHashCode=function(){return f(L(this).map(n=>h(this[n])))},K.prototype.Equals=function(n){return X(this,n,L)},K.prototype.CompareTo=function(n){return F(this,n,L)};b((function(n,e,t){this.arg1=n,this.arg2=0|e,this.arg3=0|t,this.message="The match cases were incomplete"}),K),b((function(){}),x);class N{constructor(n,e,t,r,i,o){this.fullname=n,this.generics=e,this.constructor=t,this.fields=r,this.cases=i,this.enumCases=o}toString(){return function n(e){const t=null==e.generics||z(e)?[]:e.generics;return t.length>0?e.fullname+"["+t.map(e=>n(e)).join(",")+"]":e.fullname}(this)}Equals(n){return _(this,n)}CompareTo(n){return q(this,n)}}function j(n){return null!=n.generics?n.generics:[]}function _(n,e){return""===n.fullname?""===e.fullname&&d(V(n),V(e),([n,e],[t,r])=>n===t&&_(e,r)):n.fullname===e.fullname&&d(j(n),j(e),_)}function q(n,e){return n.fullname!==e.fullname?n.fullname<e.fullname?-1:1:S(j(n),j(e),q)}new N("System.Object"),new N("Microsoft.FSharp.Core.Unit"),new N("System.Char"),new N("System.String"),new N("System.Boolean"),new N("System.SByte"),new N("System.Byte"),new N("System.Int16"),new N("System.UInt16"),new N("System.Int32"),new N("System.UInt32"),new N("System.Single"),new N("System.Double"),new N("System.Decimal");function z(n){return n.fullname.endsWith("[]")}function V(n){if(null!=n.fields)return n.fields();throw new Error(`${n.fullname} is not an F# record type`)}const J=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const U=b((function(n,e){this.JustDown=n,this.Held=e}),G);const Y=new U(!1,!1);class Z{constructor(n){this.value=n}toString(){return String(this.value)}toJSON(){return this.value}GetHashCode(){return h(this.value)}Equals(n){return null!=n&&w(this.value,n instanceof Z?n.value:n)}CompareTo(n){return null==n?1:y(this.value,n instanceof Z?n.value:n)}}function $(n){return null==(n=void 0===n?null:n)||n instanceof Z?new Z(n):n}function Q(n,e){if(null==n){if(!e)throw new Error("Option has no value");return null}return n instanceof Z?n.value:n}function nn(n,e,t){return null!=n?null!=t?t(Q(n)):Q(n):e}b((function(n,e,t){P.call(this,n,e,t)}),P);const en=b((function(n,e,t){P.call(this,n,e,t)}),P);function tn(n,e){return 1===e.tag?(t=n(e.fields[0]),new en(1,"Error",t)):e;var t}var rn={GetHashCode(){return f([this.s,this.e].concat(this.c))},Equals(n){return!this.cmp(n)},CompareTo(n){return this.cmp(n)}},on="[big.js] ",an=on+"Invalid ",un=an+"decimal places",sn=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function cn(n,e){var t,r,i;if(0===e&&1/e<0)e="-0";else if(!sn.test(e+=""))throw Error(an+"number");for(n.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,(t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),i=e.length,r=0;r<t&&r<i&&"0"==e.charAt(r);)++r;if(r==i)n.c=[n.e=0];else for(n.e=t-r-1,n.c=[],t=0;r<i;)n.c[t++]=+e.charAt(r++);return n=ln(n,hn.DP,hn.RM)}function ln(n,e,t,r){var i=n.c,o=n.e+e+1;if(o<i.length){if(1===t)r=i[o]>=5;else if(2===t)r=i[o]>5||5==i[o]&&(r||o<0||void 0!==i[o+1]||1&i[o-1]);else if(3===t)r=r||!!i[0];else if(r=!1,0!==t)throw Error("[big.js] Invalid rounding mode");if(o<1)i.length=1,r?(n.e=-e,i[0]=1):i[0]=n.e=0;else{if(i.length=o--,r)for(;++i[o]>9;)i[o]=0,o--||(++n.e,i.unshift(1));for(o=i.length;!i[--o];)i.pop()}}else if(t<0||t>3||t!==~~t)throw Error("[big.js] Invalid rounding mode");return n}function fn(n,e,t,r){var i,o,a=n.constructor,u=!n.c[0];if(void 0!==t){if(t!==~~t||t<(3==e)||t>1e6)throw Error(3==e?an+"precision":un);for(t=r-(n=new a(n)).e,n.c.length>++r&&ln(n,t,a.RM),2==e&&(r=n.e+t+1);n.c.length<r;)n.c.push(0)}if(i=n.e,t=(o=n.c.join("")).length,2!=e&&(1==e||3==e&&r<=i||i<=a.NE||i>=a.PE))o=o.charAt(0)+(t>1?"."+o.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)o="0"+o;o="0."+o}else if(i>0)if(++i>t)for(i-=t;i--;)o+="0";else i<t&&(o=o.slice(0,i)+"."+o.slice(i));else t>1&&(o=o.charAt(0)+"."+o.slice(1));return n.s<0&&(!u||4==e)?"-"+o:o}rn.abs=function(){var n=new this.constructor(this);return n.s=1,n},rn.cmp=function(n){var e,t=this.constructor,r=new t(this),i=(n=new t(n),r.c),o=n.c,a=r.s,u=n.s,s=r.e,c=n.e;if(!i[0]||!o[0])return i[0]?a:o[0]?-u:0;if(a!=u)return a;if(e=a<0,s!=c)return s>c^e?1:-1;for(u=Math.max(i.length,o.length),a=0;a<u;a++)if((s=a<i.length?i[a]:0)!=(c=a<o.length?o[a]:0))return s>c^e?1:-1;return 0},rn.div=function(n){var e=this.constructor,t=new e(this),r=(n=new e(n),t.c),i=n.c,o=t.s==n.s?1:-1,a=e.DP;if(a!==~~a||a<0||a>1e6)throw Error(un);if(!i[0])throw Error("[big.js] Division by zero");if(!r[0])return new e(0*o);var u,s,c,l,f,h=i.slice(),d=u=i.length,g=r.length,w=r.slice(0,u),p=w.length,m=n,S=m.c=[],M=0,y=a+(m.e=t.e-n.e)+1;for(m.s=o,o=y<0?0:y,h.unshift(0);p++<u;)w.push(0);do{for(c=0;c<10;c++){if(u!=(p=w.length))l=u>p?1:-1;else for(f=-1,l=0;++f<u;)if(i[f]!=w[f]){l=i[f]>w[f]?1:-1;break}if(!(l<0))break;for(s=p==u?i:h;p;){if(w[--p]<s[p]){for(f=p;f&&!w[--f];)w[f]=9;--w[f],w[p]+=10}w[p]-=s[p]}for(;!w[0];)w.shift()}S[M++]=l?c:++c,w[0]&&l?w[p]=r[d]||0:w=[r[d]]}while((d++<g||void 0!==w[0])&&o--);return S[0]||1==M||(S.shift(),m.e--),M>y&&ln(m,a,e.RM,void 0!==w[0]),m},rn.eq=function(n){return!this.cmp(n)},rn.gt=function(n){return this.cmp(n)>0},rn.gte=function(n){return this.cmp(n)>-1},rn.lt=function(n){return this.cmp(n)<0},rn.lte=function(n){return this.cmp(n)<1},rn.minus=rn.sub=function(n){var e,t,r,i,o=this.constructor,a=new o(this),u=(n=new o(n),a.s),s=n.s;if(u!=s)return n.s=-s,a.plus(n);var c=a.c.slice(),l=a.e,f=n.c,h=n.e;if(!c[0]||!f[0])return f[0]?(n.s=-s,n):new o(c[0]?a:0);if(u=l-h){for((i=u<0)?(u=-u,r=c):(h=l,r=f),r.reverse(),s=u;s--;)r.push(0);r.reverse()}else for(t=((i=c.length<f.length)?c:f).length,u=s=0;s<t;s++)if(c[s]!=f[s]){i=c[s]<f[s];break}if(i&&(r=c,c=f,f=r,n.s=-n.s),(s=(t=f.length)-(e=c.length))>0)for(;s--;)c[e++]=0;for(s=e;t>u;){if(c[--t]<f[t]){for(e=t;e&&!c[--e];)c[e]=9;--c[e],c[t]+=10}c[t]-=f[t]}for(;0===c[--s];)c.pop();for(;0===c[0];)c.shift(),--h;return c[0]||(n.s=1,c=[h=0]),n.c=c,n.e=h,n},rn.mod=function(n){var e,t=this.constructor,r=new t(this),i=(n=new t(n),r.s),o=n.s;if(!n.c[0])throw Error("[big.js] Division by zero");return r.s=n.s=1,e=1==n.cmp(r),r.s=i,n.s=o,e?new t(r):(i=t.DP,o=t.RM,t.DP=t.RM=0,r=r.div(n),t.DP=i,t.RM=o,this.minus(r.times(n)))},rn.plus=rn.add=function(n){var e,t=this.constructor,r=new t(this),i=(n=new t(n),r.s),o=n.s;if(i!=o)return n.s=-o,r.minus(n);var a=r.e,u=r.c,s=n.e,c=n.c;if(!u[0]||!c[0])return c[0]?n:new t(u[0]?r:0*i);if(u=u.slice(),i=a-s){for(i>0?(s=a,e=c):(i=-i,e=u),e.reverse();i--;)e.push(0);e.reverse()}for(u.length-c.length<0&&(e=c,c=u,u=e),i=c.length,o=0;i;u[i]%=10)o=(u[--i]=u[i]+c[i]+o)/10|0;for(o&&(u.unshift(o),++s),i=u.length;0===u[--i];)u.pop();return n.c=u,n.e=s,n},rn.pow=function(n){var e=this.constructor,t=new e(this),r=new e(1),i=new e(1),o=n<0;if(n!==~~n||n<-1e6||n>1e6)throw Error(an+"exponent");for(o&&(n=-n);1&n&&(r=r.times(t)),n>>=1;)t=t.times(t);return o?i.div(r):r},rn.round=function(n,e){var t=this.constructor;if(void 0===n)n=0;else if(n!==~~n||n<-1e6||n>1e6)throw Error(un);return ln(new t(this),n,void 0===e?t.RM:e)},rn.sqrt=function(){var n,e,t,r=this.constructor,i=new r(this),o=i.s,a=i.e,u=new r(.5);if(!i.c[0])return new r(i);if(o<0)throw Error(on+"No square root");0===(o=Math.sqrt(i+""))||o===1/0?((e=i.c.join("")).length+a&1||(e+="0"),a=((a+1)/2|0)-(a<0||1&a),n=new r(((o=Math.sqrt(e))==1/0?"1e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+a)):n=new r(o),a=n.e+(r.DP+=4);do{t=n,n=u.times(t.plus(i.div(t)))}while(t.c.slice(0,a).join("")!==n.c.slice(0,a).join(""));return ln(n,r.DP-=4,r.RM)},rn.times=rn.mul=function(n){var e,t=this.constructor,r=new t(this),i=(n=new t(n),r.c),o=n.c,a=i.length,u=o.length,s=r.e,c=n.e;if(n.s=r.s==n.s?1:-1,!i[0]||!o[0])return new t(0*n.s);for(n.e=s+c,a<u&&(e=i,i=o,o=e,c=a,a=u,u=c),e=new Array(c=a+u);c--;)e[c]=0;for(s=u;s--;){for(u=0,c=a+s;c>s;)u=e[c]+o[s]*i[c-s-1]+u,e[c--]=u%10,u=u/10|0;e[c]=(e[c]+u)%10}for(u?++n.e:e.shift(),s=e.length;!e[--s];)e.pop();return n.c=e,n},rn.toExponential=function(n){return fn(this,1,n,n)},rn.toFixed=function(n){return fn(this,2,n,this.e+n)},rn.toPrecision=function(n){return fn(this,3,n,n-1)},rn.toString=function(){return fn(this)},rn.valueOf=rn.toJSON=function(){return fn(this,4)};var hn=function n(){function e(t){var r=this;if(!(r instanceof e))return void 0===t?n():new e(t);t instanceof e?(r.s=t.s,r.e=t.e,r.c=t.c.slice(),function(n){if((n=ln(n,28,0)).c.length>1&&!n.c[0]){let e=n.c.findIndex(n=>n);n.c=n.c.slice(e),n.e=n.e-e}}(r)):cn(r,t),r.constructor=e}return e.prototype=rn,e.DP=28,e.RM=1,e.NE=-29,e.PE=29,e.version="5.2.2",e}(),dn=hn,gn=dn;new dn(0),new dn(1),new dn(-1),new dn("79228162514264337593543950335"),new dn("-79228162514264337593543950335");var wn;function pn(n){return-2147483648===n?n:-n}!function(n){n[n.AllowHexSpecifier=512]="AllowHexSpecifier"}(wn||(wn={}));var mn=null;try{mn=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(n){}function Sn(n,e,t){this.low=0|n,this.high=0|e,this.unsigned=!!t}function Mn(n){return!0===(n&&n.__isLong__)}Sn.prototype.GetHashCode=function(){let n=this.unsigned?1:0;return n=(n<<5)+n^this.high,n=(n<<5)+n^this.low,n},Sn.prototype.Equals=function(n){return zn(this,n)},Sn.prototype.CompareTo=function(n){return Yn(this,n)},Sn.prototype.toString=function(n){return Nn(this,n)},Sn.prototype.toJSON=function(){return Nn(this)},Sn.prototype.__isLong__,Object.defineProperty(Sn.prototype,"__isLong__",{value:!0});var yn={},In={};function Tn(n,e){var t,r,i;return e?(i=0<=(n>>>=0)&&n<256)&&(r=In[n])?r:(t=Wn(n,(0|n)<0?-1:0,!0),i&&(In[n]=t),t):(i=-128<=(n|=0)&&n<128)&&(r=yn[n])?r:(t=Wn(n,n<0?-1:0,!1),i&&(yn[n]=t),t)}function Cn(n,e){if(isNaN(n))return e?Pn:Hn;if(e){if(n<0)return Pn;if(n>=bn)return Bn}else{if(n<=-xn)return Rn;if(n+1>=xn)return Gn}return n<0?Zn(Cn(-n,e)):Wn(n%En|0,n/En|0,e)}function Wn(n,e,t){return new Sn(n,e,t)}var An=Math.pow;function vn(n,e,t){if(0===n.length)throw Error("empty string");if("NaN"===n||"Infinity"===n||"+Infinity"===n||"-Infinity"===n)return Hn;if("number"==typeof e?(t=e,e=!1):e=!!e,(t=t||10)<2||36<t)throw RangeError("radix");var r=n.indexOf("-");if(r>0)throw Error("interior hyphen");if(0===r)return Zn(vn(n.substring(1),e,t));for(var i=Cn(An(t,8)),o=Hn,a=0;a<n.length;a+=8){var u=Math.min(8,n.length-a),s=parseInt(n.substring(a,a+u),t);if(u<8)o=$n(ne(o,Cn(An(t,u))),Cn(s));else o=$n(o=ne(o,i),Cn(s))}return o.unsigned=e,o}function kn(n,e){return"number"==typeof n?Cn(n,e):"string"==typeof n?vn(n,e):Wn(n.low,n.high,"boolean"==typeof e?e:n.unsigned)}var En=4294967296,bn=En*En,xn=bn/2,Dn=Tn(1<<24),Hn=Tn(0),Pn=Tn(0,!0),On=Tn(1),Xn=Tn(1,!0),Fn=Tn(-1),Gn=Wn(-1,2147483647,!1),Bn=Wn(-1,-1,!0),Rn=Wn(0,-2147483648,!1);function Ln(n){return n.unsigned?n.low>>>0:n.low}function Kn(n){return n.unsigned?(n.high>>>0)*En+(n.low>>>0):n.high*En+(n.low>>>0)}function Nn(n,e){if((e=e||10)<2||36<e)throw RangeError("radix");if(jn(n))return"0";if(_n(n)){if(zn(n,Rn)){var t=Cn(e),r=ee(n,t),i=Qn(ne(r,t),n);return Nn(r,e)+Ln(i).toString(e)}return"-"+Nn(Zn(n),e)}for(var o=Cn(An(e,6),n.unsigned),a=n,u="";;){var s=ee(a,o),c=(Ln(Qn(a,ne(s,o)))>>>0).toString(e);if(jn(a=s))return c+u;for(;c.length<6;)c="0"+c;u=""+c+u}}function jn(n){return 0===n.high&&0===n.low}function _n(n){return!n.unsigned&&n.high<0}function qn(n){return 1==(1&n.low)}function zn(n,e){return Mn(e)||(e=kn(e)),(n.unsigned===e.unsigned||n.high>>>31!=1||e.high>>>31!=1)&&(n.high===e.high&&n.low===e.low)}function Vn(n,e){return Yn(n,e)<0}function Jn(n,e){return Yn(n,e)>0}function Un(n,e){return Yn(n,e)>=0}function Yn(n,e){if(Mn(e)||(e=kn(e)),zn(n,e))return 0;var t=_n(n),r=_n(e);return t&&!r?-1:!t&&r?1:n.unsigned?e.high>>>0>n.high>>>0||e.high===n.high&&e.low>>>0>n.low>>>0?-1:1:_n(Qn(n,e))?-1:1}function Zn(n){return!n.unsigned&&zn(n,Rn)?Rn:$n(te(n),On)}function $n(n,e){Mn(e)||(e=kn(e));var t=n.high>>>16,r=65535&n.high,i=n.low>>>16,o=65535&n.low,a=e.high>>>16,u=65535&e.high,s=e.low>>>16,c=0,l=0,f=0,h=0;return f+=(h+=o+(65535&e.low))>>>16,l+=(f+=i+s)>>>16,c+=(l+=r+u)>>>16,c+=t+a,Wn((f&=65535)<<16|(h&=65535),(c&=65535)<<16|(l&=65535),n.unsigned)}function Qn(n,e){return Mn(e)||(e=kn(e)),$n(n,Zn(e))}function ne(n,e){if(jn(n))return n.unsigned?Pn:Hn;if(Mn(e)||(e=kn(e)),mn)return Wn(mn.mul(n.low,n.high,e.low,e.high),mn.get_high(),n.unsigned);if(jn(e))return n.unsigned?Pn:Hn;if(zn(n,Rn))return qn(e)?Rn:Hn;if(zn(e,Rn))return qn(n)?Rn:Hn;if(_n(n))return _n(e)?ne(Zn(n),Zn(e)):Zn(ne(Zn(n),e));if(_n(e))return Zn(ne(n,Zn(e)));if(Vn(n,Dn)&&Vn(e,Dn))return Cn(Kn(n)*Kn(e),n.unsigned);var t=n.high>>>16,r=65535&n.high,i=n.low>>>16,o=65535&n.low,a=e.high>>>16,u=65535&e.high,s=e.low>>>16,c=65535&e.low,l=0,f=0,h=0,d=0;return h+=(d+=o*c)>>>16,f+=(h+=i*c)>>>16,h&=65535,f+=(h+=o*s)>>>16,l+=(f+=r*c)>>>16,f&=65535,l+=(f+=i*s)>>>16,f&=65535,l+=(f+=o*u)>>>16,l+=t*c+r*s+i*u+o*a,Wn((h&=65535)<<16|(d&=65535),(l&=65535)<<16|(f&=65535),n.unsigned)}function ee(n,e){if(Mn(e)||(e=kn(e)),jn(e))throw Error("division by zero");var t,r,i;if(mn)return n.unsigned||-2147483648!==n.high||-1!==e.low||-1!==e.high?Wn((n.unsigned?mn.div_u:mn.div_s)(n.low,n.high,e.low,e.high),mn.get_high(),n.unsigned):n;if(jn(n))return n.unsigned?Pn:Hn;if(n.unsigned){if(e.unsigned||(e=function(n){return n.unsigned?n:Wn(n.low,n.high,!0)}(e)),Jn(e,n))return Pn;if(Jn(e,oe(n,1)))return Xn;i=Pn}else{if(zn(n,Rn))return zn(e,On)||zn(e,Fn)?Rn:zn(e,Rn)?On:zn(t=re(ee(ie(n,1),e),1),Hn)?_n(e)?On:Fn:i=$n(t,ee(r=Qn(n,ne(e,t)),e));if(zn(e,Rn))return n.unsigned?Pn:Hn;if(_n(n))return _n(e)?ee(Zn(n),Zn(e)):Zn(ee(Zn(n),e));if(_n(e))return Zn(ee(n,Zn(e)));i=Hn}for(r=n;Un(r,e);){t=Math.max(1,Math.floor(Kn(r)/Kn(e)));for(var o=Math.ceil(Math.log(t)/Math.LN2),a=o<=48?1:An(2,o-48),u=Cn(t),s=ne(u,e);_n(s)||Jn(s,r);)s=ne(u=Cn(t-=a,n.unsigned),e);jn(u)&&(u=On),i=$n(i,u),r=Qn(r,s)}return i}function te(n){return Wn(~n.low,~n.high,n.unsigned)}function re(n,e){return Mn(e)&&(e=Ln(e)),0==(e&=63)?n:e<32?Wn(n.low<<e,n.high<<e|n.low>>>32-e,n.unsigned):Wn(0,n.low<<e-32,n.unsigned)}function ie(n,e){return Mn(e)&&(e=Ln(e)),0==(e&=63)?n:e<32?Wn(n.low>>>e|n.high<<32-e,n.high>>e,n.unsigned):Wn(n.high>>e-32,n.high>=0?0:-1,n.unsigned)}function oe(n,e){if(Mn(e)&&(e=Ln(e)),0===(e&=63))return n;var t=n.high;return e<32?Wn(n.low>>>e|t<<32-e,t>>>e,n.unsigned):Wn(32===e?t:t>>>e-32,0,n.unsigned)}var ae=Sn;const ue=ne,se=Yn,ce=function(n,e,t){return t?function(n,e){return new Sn(n[0]|n[1]<<8|n[2]<<16|n[3]<<24,n[4]|n[5]<<8|n[6]<<16|n[7]<<24,e)}(n,e):function(n,e){return new Sn(n[4]<<24|n[5]<<16|n[6]<<8|n[7],n[0]<<24|n[1]<<16|n[2]<<8|n[3],e)}(n,e)},le=function(n,e){return e?function(n){var e=n.high,t=n.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]}(n):function(n){var e=n.high,t=n.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]}(n)},fe=Nn;class he{constructor(n){this.iter=n}MoveNext(){const n=this.iter.next();return this.current=n.value,!n.done}get Current(){return this.current}Reset(){throw new Error("JS iterators cannot be reset")}Dispose(){}}function de(n){return new he(n[Symbol.iterator]())}function ge(n){return{next:()=>n.MoveNext()?{done:!1,value:n.Current}:{done:!0,value:null}}}function we(n){return me(()=>{const e=n[Symbol.iterator]();let t={value:null};return ke(n=>{let r=!1;for(;!r;)if(null==n){const t=e.next();t.done?r=!0:n=t.value[Symbol.iterator]()}else{const e=n.next();e.done?n=null:(t={value:e.value},r=!0)}return null!=n&&null!=t?[t.value,n]:null},null)})}function pe(n,e){return we(Ce(n,e))}function me(n){return{[Symbol.iterator]:()=>n()[Symbol.iterator]()}}function Se(){return ke(()=>null,void 0)}function Me(n,e){let t;for(const r=e[Symbol.iterator]();t=r.next(),!t.done;)if(n(t.value))return!0;return!1}function ye(n,e,t){if(Array.isArray(t)||ArrayBuffer.isView(t))return t.reduce(n,e);{let r;for(let i=0,o=t[Symbol.iterator]();r=o.next(),!r.done;i++)e=n(e,r.value,i);return e}}function Ie(n,e){ye((e,t)=>(n(t),null),null,e)}function Te(n,e){ye((e,t,r)=>(n(null!=r?r:0,t),null),null,e)}function Ce(n,e){return me(()=>ke(e=>{const t=e.next();return t.done?null:[n(t.value),e]},e[Symbol.iterator]()))}function We(n,e,t){if(0===e)throw new Error("Step cannot be 0");return me(()=>ke(n=>e>0&&n<=t||e<0&&n>=t?[n,n+e]:null,n))}function Ae(n){return[n]}function ve(n,e,t){return ye((e,r)=>t.Add(e,n(r)),t.GetZero(),e)}function ke(n,e){return{[Symbol.iterator]:()=>{let t=e;return{next:()=>{const e=n(t);if(null!=e){const n=Q(e);if(null!=n)return t=n[1],{done:!1,value:n[0]}}return{done:!0,value:void 0}}}}}}const Ee=/(^|[^%])%([0+\- ]*)(\d+)?(?:\.(\d+))?(\w)/;function be(n){return"number"==typeof n||n instanceof ae||n instanceof gn}function xe(n,e){return n instanceof ae?se(n,e)<0:n instanceof gn?n.cmp(e)<0:n<e}function De(n,e){return n instanceof ae?ue(n,e):n instanceof gn?n.mul(e):n*e}function He(n,e){return n instanceof ae?String(n)+(0).toFixed(e).substr(1):n.toFixed(e)}function Pe(n,e){return n instanceof ae?String(n)+(0).toPrecision(e).substr(1):n.toPrecision(e)}function Oe(n,e){return n instanceof ae?String(n)+(0).toExponential(e).substr(1):n.toExponential(e)}function Xe(n){return n instanceof ae?fe(n.unsigned?n:ce(le(n),!0),16):(Number(n)>>>0).toString(16)}function Fe(n){return{input:n,cont:(e=n,n=>Ee.test(e)?function n(e,t){return(...r)=>{let i=e;for(const n of r)i=Be(i,n);return Ee.test(i)?n(i,t):t(i.replace(/%%/g,"%"))}}(e,n):n(e))};var e}function Ge(n){return n.cont(n=>n)}function Be(n,e){return n.replace(Ee,(n,t,r,i,o,a)=>{let u="";if(be(e))switch("x"!==a.toLowerCase()&&(xe(e,0)?(e=De(e,-1),u="-"):r.indexOf(" ")>=0?u=" ":r.indexOf("+")>=0&&(u="+")),o=null==o?null:parseInt(o,10),a){case"f":case"F":e=He(e,o=null!=o?o:6);break;case"g":case"G":e=null!=o?Pe(e,o):Pe(e);break;case"e":case"E":e=null!=o?Oe(e,o):Oe(e);break;case"x":e=Xe(e);break;case"X":e=Xe(e).toUpperCase();break;default:e=String(e)}if(i=parseInt(i,10),isNaN(i))e=u+e;else{const n=r.indexOf("0")>=0,t=r.indexOf("-")>=0,o=t||!n?" ":"0";e="0"===o?u+(e=Ke(e,i-u.length,o,t)):Ke(u+e,i,o,t)}return(t+e).replace(/%/g,"%%")})}function Re(n,e){if(n<0)throw new Error("String length must be non-negative");const t=new Array(n);for(let r=0;r<n;r++)t[r]=e(r);return t.join("")}function Le(n,e){return Array.isArray(e)?e.join(n):Array.from(e).join(n)}function Ke(n,e,t,r){t=t||" ",e-=n.length;for(let i=0;i<e;i++)n=r?n+t:t+n;return n}function Ne(n,e,t){if(e+(t||0)>n.length)throw new Error("Invalid startIndex and/or length");return null!=t?n.substr(e,t):n.substr(e)}const je=b((function(n,e){const t=new B(null);this.comparer=e,t.contents=this,this.hashMap=new Map([]),this["init@20-1"]=1,Ie((function(n){Je(t.contents,n[0],n[1])}),n)}));function _e(n,e){const t=0|n.comparer.GetHashCode(e),r=o(n.hashMap,t,null);return r[0]?[!0,t,r[1].findIndex((function(t){return n.comparer.Equals(e,t[0])}))]:[!1,t,-1]}function qe(n,e){const t=_e(n,e);switch(t[0]&&t[2]>-1?0:1){case 0:return k(n.hashMap,t[1])[t[2]];case 1:return null}}function ze(n){n.hashMap.clear()}function Ve(n){return 0|ve((function(n){return n.length}),n.hashMap.values(),{GetZero:()=>0,Add:(n,e)=>n+e})}function Je(n,e,t){const r=_e(n,e);switch(r[0]&&r[2]>-1?0:1){case 0:{let n;throw n=Ge(Fe("An item with the same key has already been added. Key: %A"))(e),new Error(n)}case 1:if(r[0]){Ft([e,t],k(n.hashMap,r[1]))}else n.hashMap.set(r[1],[[e,t]])}}function Ue(n,e){const t=_e(n,e);switch(t[0]&&t[2]>-1?0:1){case 0:return k(n.hashMap,t[1]).splice(t[2],1),!0;case 1:return!1}}je.prototype[Symbol.iterator]=function(){const n=this;return ge(de(me((function(){return pe((function(n){return Ce((function(n){return n}),n)}),n.hashMap.values())}))))},je.prototype.Add=function(n){Je(this,n[0],n[1])},je.prototype.Clear=function(){ze(this)},je.prototype.Contains=function(n){const e=qe(this,n[0]);switch(null!=e&&w(e[1],n[1])?0:1){case 0:return!0;case 1:return!1}},je.prototype.CopyTo=function(n,e){Te((function(t,r){n[e+t]=r}),this)},Object.defineProperty(je.prototype,"Count",{get:function(){return 0|Ve(this)}}),Object.defineProperty(je.prototype,"IsReadOnly",{get:function(){return!1}}),je.prototype.Remove=function(n){const e=this,t=qe(e,n[0]);if(null!=t){if(w(t[1],n[1])){Ue(e,n[0])}return!0}return!1},Object.defineProperty(je.prototype,"size",{get:function(){return 0|Ve(this)}}),je.prototype.clear=function(){ze(this)},je.prototype.delete=function(n){return Ue(this,n)},je.prototype.entries=function(){return Ce((function(n){return n}),this)},je.prototype.get=function(n){return function(n,e){const t=qe(n,e);if(null!=t){return t[1]}throw new Error("The item was not found in collection")}(this,n)},je.prototype.has=function(n){return function(n,e){const t=_e(n,e);switch(t[0]&&t[2]>-1?0:1){case 0:return!0;case 1:return!1}}(this,n)},je.prototype.keys=function(){return Ce((function(n){return n[0]}),this)},je.prototype.set=function(n,e){return function(n,e,t){const r=_e(n,e);switch(r[0]&&r[2]>-1?0:1){case 0:k(n.hashMap,r[1])[r[2]]=[e,t];break;case 1:if(r[0]){Ft([e,t],k(n.hashMap,r[1]))}else n.hashMap.set(r[1],[[e,t]])}}(this,n,e),this},je.prototype.values=function(){return Ce((function(n){return n[1]}),this)};const Ye=b((function(n,e,...t){P.call(this,n,e,...t)}),P);function Ze(n){return function n(e,t){n:for(;;){const r=e,i=t;switch(i.tag){case 1:return r+1|0;case 2:e=n(r+1,i.fields[2]),t=i.fields[3];continue n;default:return 0|r}break}}(0,n)}function $e(n,e,t){n:for(;;){const r=n,i=e,o=t;switch(o.tag){case 1:if(0===(0|r.Compare(i,o.fields[0])))return o.fields[1];throw new Error("key not found");case 2:{const a=0|r.Compare(i,o.fields[0]);if(a<0){n=r,e=i,t=o.fields[2];continue n}if(0===a)return o.fields[1];n=r,e=i,t=o.fields[3];continue n}default:throw new Error("key not found")}break}}function Qe(n,e,t){n:for(;;){const r=n,i=e,o=t;switch(o.tag){case 1:return 0===r.Compare(i,o.fields[0]);case 2:{const a=0|r.Compare(i,o.fields[0]);if(a<0){n=r,e=i,t=o.fields[2];continue n}if(0===a)return!0;n=r,e=i,t=o.fields[3];continue n}default:return!1}break}}const nt=b((function(n,e){this.stack=n,this.started=e}),G);function et(n){for(;;){const e=n;if(null==e.tail)return new H;if(1===e.head.tag)return e;2!==e.head.tag?n=e.tail:n=new H(e.head.fields[2],new H(new Ye(1,"MapOne",e.head.fields[0],e.head.fields[1]),new H(e.head.fields[3],e.tail)))}}function tt(n){return new nt(et(new H(n,new H)),!1)}function rt(n){if(n.started){const e=n.stack;if(null==e.tail)return function(){throw new Error("enumeration already finished")}();if(1===e.head.tag)return[e.head.fields[0],e.head.fields[1]];throw new Error("Please report error: Map iterator, unexpected stack for current")}return function(){throw new Error("enumeration not started")}()}const it=b((function(n){this.s=n,this.i=tt(this.s)}));function ot(n){return function(n){return this instanceof it?it.call(this,n):new it(n)}(n)}function at(n){return ke((function(n){return n.MoveNext()?[n.Current,n]:null}),ot(n))}Object.defineProperty(it.prototype,"Current",{get:function(){return rt(this.i)}}),it.prototype.MoveNext=function(){return function(n){if(n.started){const e=n.stack;if(null==e.tail)return!1;if(1===e.head.tag)return n.stack=et(e.tail),!(null==n.stack.tail);throw new Error("Please report error: Map iterator, unexpected stack for moveNext")}return n.started=!0,!(null==n.stack.tail)}(this.i)},it.prototype.Reset=function(){this.i=tt(this.s)},it.prototype.Dispose=function(){};const ut=b((function(n,e){this.comparer=n,this.tree=e}));function st(n){return n.tree}function ct(n,e){return $e(n.comparer,e,n.tree)}function lt(n){return Ze(n.tree)}function ft(n,e){return Qe(n.comparer,e,n.tree)}ut.prototype.toString=function(){return"map ["+Le("; ",Ce((function(n){return Ge(Fe("(%A, %A)"))(n[0])(n[1])}),this))+"]"},ut.prototype.GetHashCode=function(){const n=function(n,e){return(n<<1)+e+631};let e=0;const t=ot(st(this));for(;t.MoveNext();){const r=t.Current;e=n(e,h(r[0])),e=n(e,h(r[1]))}return 0|Math.abs(e)},ut.prototype.Equals=function(n){return 0===this.CompareTo(n)},ut.prototype[Symbol.iterator]=function(){return ge(ot(this.tree))},ut.prototype.CompareTo=function(n){const e=this;let t=0,r=!1;const o=ot(st(e));try{const a=ot(st(n));try{for(;!r&&0===t;){const n=[o.MoveNext(),a.MoveNext()];if(n[0])if(n[1]){const n=o.Current,r=a.Current,i=0|e.comparer.Compare(n[0],r[0]);t=0!==i?i:y(n[1],r[1])}else t=1;else n[1]?t=-1:r=!0}return 0|t}finally{i(a)&&a.Dispose()}}finally{i(o)&&o.Dispose()}},Object.defineProperty(ut.prototype,"size",{get:function(){return 0|lt(this)}}),ut.prototype.clear=function(){throw new Error("Map cannot be mutated")},ut.prototype.delete=function(n){throw new Error("Map cannot be mutated")},ut.prototype.entries=function(){return at(st(this))},ut.prototype.get=function(n){return ct(this,n)},ut.prototype.has=function(n){return ft(this,n)},ut.prototype.keys=function(){return Ce((function(n){return n[0]}),at(st(this)))},ut.prototype.set=function(n,e){throw new Error("Map cannot be mutated")},ut.prototype.values=function(){return Ce((function(n){return n[1]}),at(st(this)))};const ht=b((function(n,e){const t=new B(null);this.comparer=e,t.contents=this,this.hashMap=new Map([]),this["init@21-2"]=1,Ie((function(n){mt(t.contents,n)}),n)}));function dt(n,e){return this instanceof ht?ht.call(this,n,e):new ht(n,e)}function gt(n,e){const t=0|n.comparer.GetHashCode(e),r=o(n.hashMap,t,null);return r[0]?[!0,t,r[1].findIndex((function(t){return n.comparer.Equals(e,t)}))]:[!1,t,-1]}function wt(n){n.hashMap.clear()}function pt(n){return 0|ve((function(n){return n.length}),n.hashMap.values(),{GetZero:()=>0,Add:(n,e)=>n+e})}function mt(n,e){const t=gt(n,e);switch(t[0]&&t[2]>-1?0:1){case 0:return!1;case 1:if(t[0]){Ft(e,k(n.hashMap,t[1]));return!0}return n.hashMap.set(t[1],[e]),!0}}function St(n,e){const t=gt(n,e);switch(t[0]&&t[2]>-1?0:1){case 0:return!0;case 1:return!1}}function Mt(n,e){const t=gt(n,e);switch(t[0]&&t[2]>-1?0:1){case 0:return k(n.hashMap,t[1]).splice(t[2],1),!0;case 1:return!1}}ht.prototype[Symbol.iterator]=function(){const n=this;return ge(de(me((function(){return pe((function(n){return Ce((function(n){return n}),n)}),n.hashMap.values())}))))},ht.prototype.Add=function(n){mt(this,n)},ht.prototype.Clear=function(){wt(this)},ht.prototype.Contains=function(n){return St(this,n)},ht.prototype.CopyTo=function(n,e){Te((function(t,r){n[e+t]=r}),this)},Object.defineProperty(ht.prototype,"Count",{get:function(){return 0|pt(this)}}),Object.defineProperty(ht.prototype,"IsReadOnly",{get:function(){return!1}}),ht.prototype.Remove=function(n){return Mt(this,n)},Object.defineProperty(ht.prototype,"size",{get:function(){return 0|pt(this)}}),ht.prototype.add=function(n){mt(this,n);return this},ht.prototype.add_=function(n){return mt(this,n)},ht.prototype.clear=function(){wt(this)},ht.prototype.delete=function(n){return Mt(this,n)},ht.prototype.has=function(n){return St(this,n)},ht.prototype.keys=function(){return Ce((function(n){return n}),this)},ht.prototype.values=function(){return Ce((function(n){return n}),this)},ht.prototype.entries=function(){return Ce((function(n){return[n,n]}),this)};const yt=b((function(n,e,...t){P.call(this,n,e,...t)}),P);function It(n){return new yt(2,"SetOne",n)}function Tt(n,e,t,r){return new yt(1,"SetNode",n,e,t,r)}const Ct=b((function(n,e){this.stack=n,this.started=e}),G);function Wt(n){for(;;){const e=n;if(null==e.tail)return new H;if(2===e.head.tag)return e;1!==e.head.tag?n=e.tail:n=new H(e.head.fields[1],new H(It(e.head.fields[0]),new H(e.head.fields[2],e.tail)))}}function At(n){return new Ct(Wt(new H(n,new H)),!1)}function vt(n){if(n.started){const e=n.stack;if(null==e.tail)return function(){throw new Error("Enumeration already started")}();if(2===e.head.tag)return e.head.fields[0];throw new Error("Please report error: Set iterator, unexpected stack for current")}return function(){throw new Error("Enumeration not started")}()}const kt=b((function(n){this.s=n,this.i=At(this.s)}));function Et(n){return function(n){return this instanceof kt?kt.call(this,n):new kt(n)}(n)}function bt(n,e,t){return 0===e.tag?0===t.tag?0:-1:0===t.tag?1:0|function(n,e,t){n:for(;;){const L=n,K=e,N=t;var r,i,o,a,u,s,c,l,f,h,d,g,w,p,m,S,M,y,I,T,C,W,A,v,k,E,b,x,D,P,O,X,F,G,B,R;switch(null!=K.tail?null!=N.tail?2===N.head.tag?2===K.head.tag?(r=4,a=K.head.fields[0],u=N.head.fields[0],s=K.tail,c=N.tail):1===K.head.tag?0===K.head.fields[1].tag?(r=6,w=K.head.fields[1],p=K.head.fields[0],m=K.head.fields[2],S=N.head.fields[0],M=K.tail,y=N.tail):(r=9,b=K.head.fields[0],x=K.head.fields[1],D=K.head.fields[2],P=K.tail):(r=10,O=N.head.fields[0],X=N.tail):1===N.head.tag?0===N.head.fields[1].tag?2===K.head.tag?(r=5,l=K.head.fields[0],f=N.head.fields[0],h=N.head.fields[2],d=K.tail,g=N.tail):1===K.head.tag?0===K.head.fields[1].tag?(r=7,I=K.head.fields[0],T=K.head.fields[2],C=N.head.fields[0],W=N.head.fields[2],A=K.tail,v=N.tail):(r=9,b=K.head.fields[0],x=K.head.fields[1],D=K.head.fields[2],P=K.tail):(r=11,F=N.head.fields[0],G=N.head.fields[1],B=N.head.fields[2],R=N.tail):2===K.head.tag?(r=8,k=K.head.fields[0],E=K.tail):1===K.head.tag?(r=9,b=K.head.fields[0],x=K.head.fields[1],D=K.head.fields[2],P=K.tail):(r=11,F=N.head.fields[0],G=N.head.fields[1],B=N.head.fields[2],R=N.tail):2===K.head.tag?(r=8,k=K.head.fields[0],E=K.tail):1===K.head.tag?(r=9,b=K.head.fields[0],x=K.head.fields[1],D=K.head.fields[2],P=K.tail):(r=3,i=K.tail,o=N.tail):r=2:r=null!=N.tail?1:0,r){case 0:return 0;case 1:return-1;case 2:return 1;case 3:n=L,e=i,t=o;continue n;case 4:{const r=0|L.Compare(a,u);if(0!==r)return 0|r;n=L,e=s,t=c;continue n}case 5:{const r=0|L.Compare(l,f);if(0!==r)return 0|r;n=L,e=new H(new yt(0,"SetEmpty"),d),t=new H(h,g);continue n}case 6:{const r=0|L.Compare(p,S);if(0!==r)return 0|r;n=L,e=new H(m,M),t=new H(w,y);continue n}case 7:{const r=0|L.Compare(I,C);if(0!==r)return 0|r;n=L,e=new H(T,A),t=new H(W,v);continue n}case 8:n=L,e=new H(new yt(0,"SetEmpty"),new H(It(k),E)),t=N;continue n;case 9:n=L,e=new H(x,new H(Tt(b,new yt(0,"SetEmpty"),D,0),P)),t=N;continue n;case 10:n=L,e=K,t=new H(new yt(0,"SetEmpty"),new H(It(O),X));continue n;case 11:n=L,e=K,t=new H(G,new H(Tt(F,new yt(0,"SetEmpty"),B,0),R));continue n}break}}(n,new H(e,new H),new H(t,new H))}Object.defineProperty(kt.prototype,"Current",{get:function(){return vt(this.i)}}),kt.prototype.MoveNext=function(){return function(n){if(n.started){const e=n.stack;if(null==e.tail)return!1;if(2===e.head.tag)return n.stack=Wt(e.tail),!(null==n.stack.tail);throw new Error("Please report error: Set iterator, unexpected stack for moveNext")}return n.started=!0,!(null==n.stack.tail)}(this.i)},kt.prototype.Reset=function(){this.i=At(this.s)},kt.prototype.Dispose=function(){};const xt=b((function(n,e){this.comparer=n,this.tree=e}));function Dt(n){return n.comparer}function Ht(n){return n.tree}function Pt(n,e){return dt(n,e)}xt.prototype.toString=function(){return"set ["+Le("; ",Ce((function(n){return String(n)}),this))+"]"},xt.prototype.GetHashCode=function(){let n=0;const e=Et(Ht(this));for(;e.MoveNext();){n=((0|n)<<1)+(0|h(e.Current))+631}return 0|Math.abs(n)},xt.prototype.Equals=function(n){return 0===bt(Dt(this),Ht(this),Ht(n))},xt.prototype.CompareTo=function(n){return 0|bt(Dt(this),Ht(this),Ht(n))},xt.prototype[Symbol.iterator]=function(){return ge(Et(Ht(this)))};function Ot(n,e,t){if(ArrayBuffer.isView(e)){const r=0|e.length,i=new t(r);for(let t=0;t<=r-1;t++)i[t]=n(e[t]);return i}return e.map((function(e){return n(e)}))}function Xt(n,e){var t;const r=Array.isArray(n)?n:Array.from(n);switch(0|r.length){case 0:return new e(0);case 1:return r[0];default:if(t=r[0],ArrayBuffer.isView(t)){let n=0,t=0;for(let n=0;n<=r.length-1;n++){t+=r[n].length}const i=new e(t);for(let e=0;e<=r.length-1;e++){const t=r[e];for(let e=0;e<=t.length-1;e++)i[n]=t[e],n+=1}return i}return r[0].concat(...r.slice(1))}}function Ft(n,e){e.push(n)}function Gt(n,e){return e.from(n)}function Bt(n,e,t){return function(n,e,t,r){for(;;){const i=n,o=e,a=t,u=r;if(null==u.tail)return a;n=i,e=o+1,t=i(o,a,u.head),r=u.tail}}(n,0,e,t)}function Rt(n,e,t){for(;;){const r=n,i=e,o=t;if(null==o.tail)return i;n=r,e=r(i,o.head),t=o.tail}}function Lt(n){return Rt((function(n,e){return new H(e,n)}),new H,n)}function Kt(n,e,t){return Rt((function(e,t){return n(t,e)}),t,Lt(e))}function Nt(n){return Lt(ye((function(n,e){return new H(e,n)}),new H,n))}function jt(n){return Rt((function(n,e){return n+1}),0,n)}function _t(n,e){return Rt((function(n,e){return new H(e,n)}),e,Lt(n))}function qt(n,e){return Lt(Rt((function(e,t){return new H(n(t),e)}),new H,e))}function zt(n,e){return Lt(Bt((function(e,t,r){return new H(n(e,r),t)}),new H,e))}function Vt(n,e){Rt((function(e,t){n(t)}),null,e)}function Jt(n,e){Bt((function(e,t,r){n(e,r)}),null,e)}function Ut(n){let e=new H;for(let t=function(n){if(r(n))return n.length;{let e=0;for(const t of n)e++;return e}}(n)-1;t>=0;t--)e=new H(n[t],e);return e}function Yt(n,e){return function(n,e,t){n:for(;;){const r=n,i=e,o=t;if(null!=o.tail){const a=r(i,o.head);if(null==a){n=r,e=i+1,t=o.tail;continue n}return a}return null}}(n,0,e)}function Zt(n,e){return Yt((function(e,t){return n(t)}),e)}function $t(n,e){return Yt((function(e,t){return n(e,t)?$(t):null}),e)}function Qt(n,e){return Yt((function(e,t){return n(t)?$(t):null}),e)}function nr(n,e){const t=$t(n,e);if(null!=t){return Q(t)}throw new Error("List did not contain any matching elements")}function er(n,e){return nr((function(e,t){return n===e}),e)}function tr(n,e){return Lt(Rt((function(e,t){return n(t)?new H(t,e):e}),new H,e))}function rr(n,e){if(null!=e.tail)return Rt(n,e.head,e.tail);throw new Error("List was empty")}function ir(n,e){return Rt((function(e,t){return!!e&&n(t)}),!0,e)}function or(n,e){for(;;){const t=n,r=e;if(null==r.tail)return!1;if(t(r.head))return!0;n=t,e=r.tail}}function ar(n,e,t){let r;const i=Gt(e,Array);return i.sort((function(e,r){return-1*t.Compare(n(e),n(r))})),r=i,Ut(r)}function ur(n,e,t){const r=Pt([],t);return tr((function(e){return a(n(e),r)}),e)}const sr=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const cr=b((function(n,e,t,r){this.ImageFileName=n,this.ImageTransparency=e,this.ImageWidth=t,this.ImageHeight=r}),G);const lr=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const fr=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const hr=b((function(n,e){this.ImageMetadata=n,this.HostImageRef=e}),G);const dr=b((function(n,e){this.FontImageMetadata=n,this.FontCharWidth=0|e}),G);const gr=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const wr=b((function(n,e,t,r,i,o,a){this.FontImage=n,this.MagnifyX=0|e,this.MagnifyY=0|t,this.SrcCharWidth=0|r,this.SrcCharHeight=0|i,this.CharWidth=0|o,this.CharHeight=0|a}),G);const pr=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const mr=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const Sr=Math.fround(320),Mr=(Math.fround(200),new gr(0,"FontID",0)),yr=new gr(0,"FontID",1),Ir=new gr(0,"FontID",2),Tr=new gr(0,"FontID",3),Cr=new gr(0,"FontID",4),Wr=new lr(0,"ImageID",0),Ar=new lr(0,"ImageID",1),vr=new lr(0,"ImageID",2),kr=new lr(0,"ImageID",3),Er=new lr(0,"ImageID",4),br=new lr(0,"ImageID",5),xr=new lr(0,"ImageID",6),Dr=new lr(0,"ImageID",7),Hr=new lr(0,"ImageID",8),Pr=new lr(0,"ImageID",9),Or=new lr(0,"ImageID",10),Xr=new lr(0,"ImageID",11),Fr=new lr(0,"ImageID",12),Gr=new lr(0,"ImageID",13),Br=new lr(0,"ImageID",14),Rr=new lr(0,"ImageID",15),Lr=new lr(0,"ImageID",16),Kr=new lr(0,"ImageID",17),Nr=new lr(0,"ImageID",18),jr=new lr(0,"ImageID",19),_r=new lr(0,"ImageID",20),qr=new lr(0,"ImageID",21),zr=new lr(0,"ImageID",22),Vr=new lr(0,"ImageID",23),Jr=new lr(0,"ImageID",24),Ur=new lr(0,"ImageID",25),Yr=new lr(0,"ImageID",26),Zr=new lr(0,"ImageID",27),$r=new lr(0,"ImageID",28),Qr=new lr(0,"ImageID",29),ni=new lr(0,"ImageID",30),ei=new lr(0,"ImageID",31),ti=new lr(0,"ImageID",32),ri=new lr(0,"ImageID",33),ii=new lr(0,"ImageID",34),oi=new lr(0,"ImageID",35),ai=new lr(0,"ImageID",36),ui=new lr(0,"ImageID",37),si=new lr(0,"ImageID",38),ci=new lr(0,"ImageID",39),li=new lr(0,"ImageID",40),fi=new lr(0,"ImageID",41),hi=new lr(0,"ImageID",42),di=new lr(0,"ImageID",43),gi=new lr(0,"ImageID",44),wi=new lr(0,"ImageID",45),pi=new lr(0,"ImageID",46),mi=new lr(0,"ImageID",47),Si=new lr(0,"ImageID",48),Mi=(new lr(0,"ImageID",49),new lr(0,"ImageID",50)),yi=new lr(0,"ImageID",51),Ii=new lr(0,"ImageID",52),Ti=new lr(0,"ImageID",53),Ci=new lr(0,"ImageID",54),Wi=new lr(0,"ImageID",55),Ai=new lr(0,"ImageID",56),vi=new lr(0,"ImageID",57),ki=new lr(0,"ImageID",58),Ei=new lr(0,"ImageID",59),bi=new lr(0,"ImageID",60),xi=new lr(0,"ImageID",61),Di=new lr(0,"ImageID",62),Hi=new lr(0,"ImageID",63),Pi=new lr(0,"ImageID",64),Oi=new lr(0,"ImageID",65),Xi=new lr(0,"ImageID",66),Fi=new lr(0,"ImageID",67),Gi=new lr(0,"ImageID",68),Bi=new lr(0,"ImageID",69),Ri=new lr(0,"ImageID",70),Li=new lr(0,"ImageID",71),Ki=new lr(0,"ImageID",72),Ni=new lr(0,"ImageID",73),ji=new lr(0,"ImageID",74),_i=new lr(0,"ImageID",75),qi=new lr(0,"ImageID",76),zi=new lr(0,"ImageID",77),Vi=new lr(0,"ImageID",78),Ji=new lr(0,"ImageID",79),Ui=new lr(0,"ImageID",80),Yi=new lr(0,"ImageID",81),Zi=new lr(0,"ImageID",82),$i=new lr(0,"ImageID",83),Qi=new lr(0,"ImageID",84),no=new lr(0,"ImageID",85),eo=new lr(0,"ImageID",86),to=new lr(0,"ImageID",87),ro=Math.fround(16),io=b((function(n,e,t){this.RetroScreenTitle=n,this.RetroScreenWidth=e,this.RetroScreenHeight=t}),G);function oo(n,e,t,r){return new cr(e,n,t,r)}function ao(n,e,t,r){return new dr(oo(new sr(1,"MagentaColourKeyImage"),n,e,r),t)}const uo=Ut([ao("MilitaryFontRed.png",296,8,8),ao("MilitaryFontYellow.png",296,8,8),ao("MilitaryFontBlue.png",296,8,8),ao("MilitaryFontBlack.png",296,8,8),ao("MilitaryFontSymbols.png",296,8,8)]),so=Ut([oo(new sr(0,"OpaqueImage"),"CliffsTile.png",89,200),oo(new sr(1,"MagentaColourKeyImage"),"Title.png",297,20),oo(new sr(0,"OpaqueImage"),"Map.png",320,160),oo(new sr(1,"MagentaColourKeyImage"),"AlliedFleetSymbol.png",21,21),oo(new sr(1,"MagentaColourKeyImage"),"EnemyFleetSymbol.png",20,20),oo(new sr(0,"OpaqueImage"),"SecretPassage.png",320,160),oo(new sr(1,"MagentaColourKeyImage"),"Mine.png",6,8),oo(new sr(1,"MagentaColourKeyImage"),"Ship0.png",40,13),oo(new sr(1,"MagentaColourKeyImage"),"Ship1.png",34,18),oo(new sr(1,"MagentaColourKeyImage"),"Ship2.png",31,21),oo(new sr(1,"MagentaColourKeyImage"),"Ship3.png",26,26),oo(new sr(1,"MagentaColourKeyImage"),"Ship4.png",12,36),oo(new sr(1,"MagentaColourKeyImage"),"Torpedo0.png",8,2),oo(new sr(1,"MagentaColourKeyImage"),"Torpedo22degrees.png",8,5),oo(new sr(1,"MagentaColourKeyImage"),"ShipExplode0.png",25,25),oo(new sr(1,"MagentaColourKeyImage"),"ShipExplode1.png",50,37),oo(new sr(1,"MagentaColourKeyImage"),"ShipExplode2.png",50,49),oo(new sr(1,"MagentaColourKeyImage"),"ShipExplode3.png",50,49),oo(new sr(1,"MagentaColourKeyImage"),"Plane0.png",6,2),oo(new sr(1,"MagentaColourKeyImage"),"Plane1.png",18,6),oo(new sr(1,"MagentaColourKeyImage"),"Plane2.png",31,10),oo(new sr(1,"MagentaColourKeyImage"),"Plane3.png",49,19),oo(new sr(1,"MagentaColourKeyImage"),"Plane4.png",72,26),oo(new sr(1,"MagentaColourKeyImage"),"Plane4BankingLeft.png",62,21),oo(new sr(1,"MagentaColourKeyImage"),"Plane4BankingRight.png",62,21),oo(new sr(1,"MagentaColourKeyImage"),"Plane5.png",73,22),oo(new sr(1,"MagentaColourKeyImage"),"Plane5BankingLeft.png",66,20),oo(new sr(1,"MagentaColourKeyImage"),"Plane5BankingRight.png",66,20),oo(new sr(1,"MagentaColourKeyImage"),"Plane6.png",71,27),oo(new sr(1,"MagentaColourKeyImage"),"Plane6BankingLeft.png",69,26),oo(new sr(1,"MagentaColourKeyImage"),"Plane6BankingRight.png",69,26),oo(new sr(1,"MagentaColourKeyImage"),"PlaneExplode0.png",45,23),oo(new sr(1,"MagentaColourKeyImage"),"PlaneExplode1.png",51,26),oo(new sr(1,"MagentaColourKeyImage"),"PlaneExplode2.png",35,19),oo(new sr(1,"MagentaColourKeyImage"),"Splash0.png",12,9),oo(new sr(1,"MagentaColourKeyImage"),"PlaneBomb0.png",2,2),oo(new sr(1,"MagentaColourKeyImage"),"PlaneBomb1.png",4,4),oo(new sr(1,"MagentaColourKeyImage"),"PlaneBomb2.png",6,6),oo(new sr(1,"MagentaColourKeyImage"),"PlaneBomb3.png",10,10),oo(new sr(1,"MagentaColourKeyImage"),"PlaneBomb4.png",12,12),oo(new sr(1,"MagentaColourKeyImage"),"SeaBattleBackground0.png",320,160),oo(new sr(1,"MagentaColourKeyImage"),"SeaBattleBackground1.png",320,160),oo(new sr(1,"MagentaColourKeyImage"),"SeaBattleBackground2.png",320,160),oo(new sr(1,"MagentaColourKeyImage"),"SeaBattleBackground3.png",320,160),oo(new sr(1,"MagentaColourKeyImage"),"EnemyShip0.png",12,15),oo(new sr(1,"MagentaColourKeyImage"),"EnemyShip1.png",32,16),oo(new sr(1,"MagentaColourKeyImage"),"EnemyShip2.png",67,16),oo(new sr(1,"MagentaColourKeyImage"),"EnemyShip3.png",12,15),oo(new sr(1,"MagentaColourKeyImage"),"EnemyShip4.png",34,16),oo(new sr(0,"OpaqueImage"),"TankBattleMissile.png",12,1),oo(new sr(0,"OpaqueImage"),"TileBarricade.png",16,16),oo(new sr(0,"OpaqueImage"),"TileBridge.png",16,16),oo(new sr(0,"OpaqueImage"),"TileMine.png",16,16),oo(new sr(0,"OpaqueImage"),"TileSand.png",16,16),oo(new sr(0,"OpaqueImage"),"TileTower.png",16,16),oo(new sr(0,"OpaqueImage"),"TileWater.png",16,16),oo(new sr(1,"MagentaColourKeyImage"),"EnemyTankGun1.png",24,12),oo(new sr(1,"MagentaColourKeyImage"),"TankFacingLeft0.png",24,12),oo(new sr(1,"MagentaColourKeyImage"),"TankFacingUpLeft0.png",24,14),oo(new sr(1,"MagentaColourKeyImage"),"TankFacingDownLeft0.png",24,14),oo(new sr(1,"MagentaColourKeyImage"),"TankFacingLeft1.png",24,12),oo(new sr(1,"MagentaColourKeyImage"),"TankFacingUpLeft1.png",24,14),oo(new sr(1,"MagentaColourKeyImage"),"TankFacingDownLeft1.png",24,14),oo(new sr(0,"OpaqueImage"),"FinalBossBackground.png",320,160),oo(new sr(1,"MagentaColourKeyImage"),"FinalBoss0.png",207,43),oo(new sr(1,"MagentaColourKeyImage"),"FinalBoss1.png",152,42),oo(new sr(1,"MagentaColourKeyImage"),"FinalBoss2.png",94,42),oo(new sr(1,"MagentaColourKeyImage"),"FinalBoss3.png",94,42),oo(new sr(1,"MagentaColourKeyImage"),"FinalBoss4.png",94,42),oo(new sr(1,"MagentaColourKeyImage"),"FinalBoss5.png",94,42),oo(new sr(1,"MagentaColourKeyImage"),"FinalBossSurrender0.png",16,35),oo(new sr(1,"MagentaColourKeyImage"),"FinalBossSurrender1.png",16,35),oo(new sr(1,"MagentaColourKeyImage"),"FinalBossActiveTarget.png",4,4),oo(new sr(1,"MagentaColourKeyImage"),"FinalBossTarget.png",4,4),oo(new sr(1,"MagentaColourKeyImage"),"ShipGunNozzle.png",16,8),oo(new sr(0,"OpaqueImage"),"ShipGunStem.png",12,1),oo(new sr(1,"MagentaColourKeyImage"),"ShipGunBullet.png",16,8),oo(new sr(0,"OpaqueImage"),"IntermissionBackground.png",320,200),oo(new sr(0,"OpaqueImage"),"VictoryScreen.png",320,200),oo(new sr(1,"MagentaColourKeyImage"),"ColonelReceivingMedal.png",70,130),oo(new sr(1,"MagentaColourKeyImage"),"ColonelSaluting.png",72,130),oo(new sr(1,"MagentaColourKeyImage"),"ColonelStanding.png",50,130),oo(new sr(1,"MagentaColourKeyImage"),"SoldierSaluting.png",54,120),oo(new sr(1,"MagentaColourKeyImage"),"SoldierStanding.png",54,120),oo(new sr(1,"MagentaColourKeyImage"),"Medal.png",7,16),oo(new sr(1,"MagentaColourKeyImage"),"PresidentPresentingMedal.png",66,130),oo(new sr(1,"MagentaColourKeyImage"),"PresidentSaluting.png",62,130),oo(new sr(1,"MagentaColourKeyImage"),"PresidentStanding.png",39,130)]),co=new H,lo=b((function(n,e){this.NewPlayerName=n,this.NewPlayerScore=e}),G);const fo=b((function(n,e,t){this.PlayerName=n,this.PlayerScore=e,this.PlayerScoreString=t}),G);function ho(n){return n.PlayerScore}function go(n){let e;var t,r;return t=ho,r={Compare:m},e=rr((function(n,e){return r.Compare(t(e),t(n))>0?e:n}),n),ho(e)}function wo(n,e){if(w(n,new H))return!1;{let i,o;return t=ho,r={Compare:m},o=rr((function(n,e){return r.Compare(t(e),t(n))>0?n:e}),n),i=ho(o),e>=i}var t,r}function po(n,e){if(wo(e,n.NewPlayerScore)){let t,r;return r=function(n,e,t){let r;const i=Gt(e,Array);return i.sort((function(e,r){return t.Compare(n(e),n(r))})),r=i,Ut(r)}(ho,new H(new fo(n.NewPlayerName.trim(),n.NewPlayerScore,n.NewPlayerScore.toString()),e),{Compare:m}),t=function(n){if(null!=n.tail)return n.tail;throw new Error("List was empty")}(r),ar(ho,t,{Compare:m})}return e}function mo(n,e){return qt((function(e){return function(n,e,t){const r=(0|n.length)+(0|e.length)+2|0;return r>t?"":n+" "+Re(t-r|0,(function(n){return"."}))+" "+e}(e.PlayerName,e.PlayerScoreString,n)}),e)}const So=b((function(n,e){this.Score=n,this.HiScore=e}),G);function Mo(n,e){if(0!==n){const t=e.Score+n;return new So(t,T(m,t,e.HiScore))}return e}const yo=b((function(n,e,t,r){this.Name=n,this.SelectorIndex=0|e,this.MaxNameLength=0|t,this.Complete=r}),G);const Io=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const To="ABCDEFGHIJKLMNOPQRSTUVWXYZ .X ";function Co(n,e){const t=To.length-1|0,r=t-1|0;switch(n.tag){case 1:{const n=0|(e.SelectorIndex===t?0:e.SelectorIndex+1);return new yo(e.Name,n,e.MaxNameLength,e.Complete)}case 2:{const n=e.Name.length===e.MaxNameLength,t=n?e.Name:e.SelectorIndex===r?0===e.Name.length?e.Name:Ne(e.Name,0,e.Name.length-1):e.Name+To[e.SelectorIndex];return new yo(t,e.SelectorIndex,e.MaxNameLength,n)}default:{const n=0|(0===e.SelectorIndex?t:e.SelectorIndex-1);return new yo(e.Name,n,e.MaxNameLength,e.Complete)}}}function Wo(n,e){const t=0|n.length,r=e-(0|~~(t/2))|0,i=0|(r<0?r+t:r);return Ne(n,i)+Ne(n,0,i)}function Ao(n){return Ut(["ENTER YOUR NAME","","",(e=n.Name,t=n.MaxNameLength,r=".",Ke(e,t,r,!0)),"",""," V",Wo(To,n.SelectorIndex)]);var e,t,r}const vo=b((function(){}));function ko(){return this instanceof vo?vo.call(this):new vo}const Eo=b((function(n,e,t,r){ko.call(this),this["Model@"]=n,this["DrawFunc@"]=e,this["FrameFunc@"]=t,this["SoundEffectCommands@"]=r}),vo);function bo(n,e,t,r){return this instanceof Eo?Eo.call(this,n,e,t,r):new Eo(n,e,t,r)}function xo(n){return n["Model@"]}function Do(n){return A(3,n["DrawFunc@"])}function Ho(n){return A(4,n["FrameFunc@"])}function Po(n){return n["SoundEffectCommands@"]}function Oo(n){return null==Po(n).tail?n:bo(xo(n),W(3,Do(n)),W(4,Ho(n)),new H)}function Xo(n,e,t,r){return Oo(n)}Eo.prototype.Draw=function(n,e){Do(this)(n)(xo(this))(e)},Eo.prototype.Frame=function(n,e,t){return Ho(this)(this)(n)(e)(t)},Eo.prototype.Sounds=function(){return Po(this)};const Fo=C([]),Go=C([]),Bo=C([]);const Ro=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const Lo=b((function(n,e,...t){P.call(this,n,e,...t)}),P);function Ko(n,e,t,r){return n(new Lo(0,"DrawImageWithTopLeftAtInt",e,t,r))}function No(n,e,t,r,i,o){return n(new Lo(2,"DrawStretchedImageWithTopLeftAt",e,t,r,i,o))}function jo(n,e,t,r){let i;i=[r.ImageMetadata.ImageWidth,r.ImageMetadata.ImageHeight];const o=e-(0|~~(i[0]/2)),a=t-(0|~~(i[1]/2));return n(new Lo(2,"DrawStretchedImageWithTopLeftAt",o,a,r,i[0],i[1]))}function _o(n,e,t,r,i,o){const a=0|r.length,u=i/a,s=Math.abs(~~(o/u))%a|0;s<a&&jo(n,e,t,r[s])}function qo(n,e,t,r,i,o){return n(new Lo(1,"DrawFilledRectangle",e,t,r,i,o))}function zo(n,e,t,r,i){const o=~~r*i.SrcCharWidth|0;return n(new Lo(3,"DrawSubImageStretchedToTarget",o,0,i.SrcCharWidth,i.SrcCharHeight,e,t,i.CharWidth,i.CharHeight,i.FontImage))}function Vo(n,e,t,r,i,o,a){!function(n,e,t,r,i,o,a,u){const s=function(n){return n.length*e};let c=0|(1===a.tag?r-~~(s(o)/2):2===a.tag?r-s(o):r);const l=0|(1===u.tag?i-~~(t/2):2===u.tag?i-t:i);Ie((function(t){const r=function(e){n(e,c,l)};t>="0"&&t<="9"?r(t.charCodeAt(0)-48):t>="A"&&t<="Z"?r(t.charCodeAt(0)-55):t>="a"&&t<="z"?r(t.charCodeAt(0)-87):"."===t&&r(36),c+=e}),o.split(""))}((function(t,r,i){zo(n,r,i,t>>>0,e)}),e.CharWidth,e.CharHeight,i,o,a,t,r)}function Jo(n,e,t,r,i,o,a){Vo(n,Go()[e.fields[0]],t,r,i,o,a)}function Uo(n,e,t,r,i,o,a,u){return function(n,e,t,r,i,o,a,u){let s=0|o,c=0|a,l=u;for(;l>0;)zo(n,s,c,i,e),l-=1,s+=t,c+=r;return[s,c]}(n,Go()[e.fields[0]],t,r,i,o,a,u)}function Yo(n,e,t,r,i,o,a,u){!function(n,e,t,r,i,o,a,u){if(null==u.tail);else{let s;s=e.CharHeight;const c=0|T(m,s,a),l=(jt(u)-1)*c+s|0,f=0|(1===r.tag?o-~~(l/2):2===r.tag?o-l:o);Jt((function(r,o){const a=f+c*r|0;Vo(n,e,t,new mr(0,"TopAlign"),i,a,o)}),u)}}(n,Go()[e.fields[0]],t,r,i,o,a,u)}function Zo(n,e){let t;let r;t=~~(e*Math.fround(5))%89-89|0,r=Fo()[Wr.fields[0]];for(let e=1;e<=5;e++)Ko(n,t,0,r),t+=89}const $o=b((function(n,e,t,r,i){this.Left=n,this.Right=e,this.Up=t,this.Down=r,this.Fire=i}),G);new $o(Y,Y,Y,Y,Y);function Qo(n){const e=n(new J(0,"WebBrowserKeyCode",38)),t=n(new J(0,"WebBrowserKeyCode",40)),r=n(new J(0,"WebBrowserKeyCode",37)),i=n(new J(0,"WebBrowserKeyCode",39)),o=n(new J(0,"WebBrowserKeyCode",90));return new $o(r,i,e,t,o)}function na(n){return 2*n}const ea=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const ta=b((function(n,e,t,r,i){this.Scoreboard=n,this.ScoreAndHiScore=e,this.EnterYourNameModel=t,this.MemoizedText=r,this.WhereToAfterCtor=i}),G);function ra(n,e,t){Zo(n,t),Yo(n,Tr,new pr(1,"CentreAlign"),new mr(1,"MiddleAlign"),160,100,10,e.MemoizedText)}function ia(n,e,t,r){let i;i=Qo(e);const o=xo(n),a=(u=o.EnterYourNameModel,(s=i).Fire.JustDown?Co(new Io(2,"SelectLetter"),u):s.Left.JustDown?Co(new Io(0,"RotateLeft"),u):s.Right.JustDown?Co(new Io(1,"RotateRight"),u):null);var u,s,c,l,f;if(null!=a){const e=a;if(e.Complete){let n;return c=e,l=o.ScoreAndHiScore.Score,f=o.Scoreboard,n=po(new lo(c.Name,l),f),o.WhereToAfterCtor(n,t)}{const t=new ta(o.Scoreboard,o.ScoreAndHiScore,e,Ao(e),o.WhereToAfterCtor),r=Ho(n);return bo(t,W(3,Do(n)),W(4,r),new H)}}return Oo(n)}function oa(n,e,t,r){if(wo(e,n.Score)){const r=new yo("",0,12,!1);return bo(new ta(e,n,r,Ao(r),t),ra,ia,new H)}return t(e,r)}const aa=b((function(n,e,t){this.ScoreAndHiScore=n,this.HiScoreText=e,this.WhereAfter=t}),G);function ua(n,e,t){qo(n,0,0,320,200,new Ro(0,"SolidColour",0)),Jo(n,yr,new pr(1,"CentreAlign"),new mr(1,"MiddleAlign"),160,100,"GAME OVER"),Jo(n,Ir,new pr(1,"CentreAlign"),new mr(1,"MiddleAlign"),160,125,e.HiScoreText)}function sa(n,e,t,r){const i=xo(n);let o;return o=Qo(e),o.Fire.JustDown?i.WhereAfter(i.ScoreAndHiScore,t):Oo(n)}const ca=b((function(n,e,t,r,i,o){this.ScoreAndHiScore=n,this.ScoreText=e,this.HiScoreText=t,this.NextAnimStageTime=r,this.AnimationStage=i,this.WhereToAfterCtor=o}),G);const la=Math.fround(1),fa=Ut(["----|--x","----|--x","----|P-x","----|PCx","----|-Cx","----|---","----|---"]),ha=Ut(["---P|---","123P|---","123P|---","123P|---","123-|---"]),da=Ut(["---P|---","-23P|---","-23P|---","-23P|---","-23-|---","1---|---","1--P|---","123P|---","123P|---","123P|---","123-|---"]),ga=Ut(["----|---","----|---","----|---","----|---"]),wa=_t(fa,_t(ha,ga)),pa=_t(fa,_t(da,ga));function ma(n,e,t){Ko(n,0,0,Fo()[Vi.fields[0]]),null!=e.AnimationStage.tail?function(n,e){const t="x"===e[7],r="C"===e[6],i="P"===e[5],o="P"===e[3],a="3"===e[2],u="2"===e[1],s="1"===e[0],c=Math.fround(100),l=Math.fround(80),f=Math.fround(256),h=Math.fround(192),d=Math.fround(128),g=Math.fround(64),w=o?eo:i?no:to,p=a?Ui:r?Ji:Yi,m=t?i||r?(f+h)/Math.fround(2):f:h+Math.fround(10),S=u?Zi:$i,M=s?Zi:$i,y=function(e,t,r){jo(n,t,e,Fo()[r.fields[0]])};y(c,f,w),y(c,h,p),y(l,m,Qi),y(c,d,S),y(c,g,M)}(n,e.AnimationStage.head):(Jo(n,Tr,new pr(1,"CentreAlign"),new mr(1,"MiddleAlign"),160,75,"CONGRATULATIONS"),Jo(n,Mr,new pr(1,"CentreAlign"),new mr(1,"MiddleAlign"),160,100,"MISSION COMPLETE"),Jo(n,Ir,new pr(1,"CentreAlign"),new mr(1,"MiddleAlign"),160,125,e.ScoreText),Jo(n,Ir,new pr(1,"CentreAlign"),new mr(1,"MiddleAlign"),160,150,e.HiScoreText))}function Sa(n,e,t,r){let i;i=Qo(e);const o=xo(n);if(i.Fire.JustDown)return o.WhereToAfterCtor(o.ScoreAndHiScore,t);{const e=null!=o.AnimationStage.tail&&t>o.NextAnimStageTime?[t+la,o.AnimationStage.tail]:[o.NextAnimStageTime,o.AnimationStage],r=new ca(o.ScoreAndHiScore,o.ScoreText,o.HiScoreText,e[0],e[1],o.WhereToAfterCtor),i=Ho(n);return bo(r,W(3,Do(n)),W(4,i),new H)}}function Ma(n,e,t){return bo(new ca(n,"FINAL SCORE   "+n.Score.toString(),"HI SCORE   "+n.HiScore.toString(),t+la,t%Math.fround(4)<Math.fround(1)?pa:wa,e),ma,Sa,new H)}const ya=b((function(n,e){this.ptx=n,this.pty=e}),G);const Ia=b((function(n,e){this.modx=n,this.mody=e}),G);const Ta=b((function(n,e,t,r){this.Left=n,this.Top=e,this.Right=t,this.Bottom=r}),G);b((function(n,e){this.dimx=n,this.dimy=e}),G);function Ca(n,e){return y(n.ptx,e.ptx)<0}function Wa(n,e){return y(n.ptx,e.ptx)>0}function Aa(n,e){return y(e.ptx,n.Left)>=0&&y(e.ptx,n.Right)<=0&&y(e.pty,n.Top)>=0&&y(e.pty,n.Bottom)<=0}b((function(n,e,...t){P.call(this,n,e,...t)}),P);function va(n,e,t){const r=e(t);let i;return i=Qt((function(n){const t=e(n);return w(r,t)}),n),null==i}function ka(n,e){return ir(n,e)?e:tr(n,e)}const Ea=b((function(n,e,...t){P.call(this,n,e,...t)}),P);function ba(n,e,t,r,i){const o=(t.ptx-e.ptx)/i,a=(t.pty-e.pty)/i;return function(t){const u=t-r;if(u>=Math.fround(0)){if(u<=i){const t=n(u,i),r=e.ptx+o*t,s=e.pty+a*t;return new Ea(1,"MOMVisibleAtPosition",new ya(r,s))}return new Ea(2,"MOMDisappeared")}return new Ea(0,"MOMYetToAppear")}}const xa=b((function(n,e,t,r){this.PositionGetter=n,this.StartPosition=e,this.FinalPosition=t,this.EndGameTime=r}),G);function Da(n,e,t){return new xa(function(n,e,t){const r=e+t;return function(t){return t>=e?t<=r?new Ea(1,"MOMVisibleAtPosition",n):new Ea(2,"MOMDisappeared"):new Ea(0,"MOMYetToAppear")}}(n,e,t),n,n,e+t)}function Ha(n,e,t,r,i){return new xa(ba(n,e,t,r,i),e,t,r+i)}function Pa(n,e){const t=e.PositionGetter(n);switch(t.tag){case 0:return e.StartPosition;case 2:return e.FinalPosition;default:return t.fields[0]}}function Oa(n,e){return n<=e.EndGameTime}const Xa=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const Fa=b((function(n,e,t,r){this.FlickBookDuration=n,this.FlickBookImages=e,this.VisibilityBeforeStart=t,this.VisibilityAfterEnd=r}),G);const Ga=b((function(n,e,t){this.FlickBookType=n,this.FlickBookStartTime=e,this.FlickBookMechanicsObject=t}),G);function Ba(n){return n.FlickBookStartTime}function Ra(n,e){return Pa(n,e.FlickBookMechanicsObject)}function La(n,e,t){return ka((function(t){return r=n,i=e(t),Oa(r,i.FlickBookMechanicsObject);var r,i}),t)}function Ka(n,e){return La(n,(function(n){return n}),e)}function Na(n,e,t){const r=t-e.FlickBookStartTime,i=0|e.FlickBookType.FlickBookImages.length,o=e.FlickBookMechanicsObject.PositionGetter(t);switch(o.tag){case 1:{const t=e.FlickBookType.FlickBookDuration/i,a=0|Math.abs(~~(r/t));a<i&&jo(n,o.fields[0].ptx,o.fields[0].pty,e.FlickBookType.FlickBookImages[a]);break}case 2:w(e.FlickBookType.VisibilityAfterEnd,new Xa(0,"Visible"))&&i>0&&jo(n,e.FlickBookMechanicsObject.FinalPosition.ptx,e.FlickBookMechanicsObject.FinalPosition.pty,e.FlickBookType.FlickBookImages[e.FlickBookType.FlickBookImages.length-1]);break;default:w(e.FlickBookType.VisibilityBeforeStart,new Xa(0,"Visible"))&&i>0&&jo(n,e.FlickBookMechanicsObject.StartPosition.ptx,e.FlickBookMechanicsObject.StartPosition.pty,e.FlickBookType.FlickBookImages[0])}}function ja(n,e,t,r){Vt((function(t){Na(n,e(t),r)}),t)}function _a(n,e,t){ja(n,(function(n){return n}),e,t)}const qa=b((function(n){this.TargetLocation=n}),G);const za=b((function(n){this.TargetsOnFinalBoss=n}),G);const Va=Ut([[Math.fround(169),Math.fround(50)],[Math.fround(134),Math.fround(71)],[Math.fround(194),Math.fround(90)],[Math.fround(123),Math.fround(111)],[Math.fround(221),Math.fround(68)],[Math.fround(74),Math.fround(108)],[Math.fround(249),Math.fround(116)],[Math.fround(163),Math.fround(83)],[Math.fround(104),Math.fround(70)],[Math.fround(231),Math.fround(96)]]);const Ja=b((function(n,e){this.ShellMechanicsObject=n,this.ShellStartTime=e}),G);const Ua=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const Ya=b((function(n,e,t,r,i,o,a,u,s,c){this.GunType=n,this.GunLeftExtent=e,this.GunRightExtent=t,this.GunStepRatePerSecond=r,this.HighestShellY=i,this.GunRepeatTime=o,this.GunShellDuration=a,this.GunLowestElevation=u,this.GunHighestElevation=s,this.GunElevationStepRate=c}),G);const Za=b((function(n,e,t,r,i){this.GunTraits=n,this.GunCentreX=e,this.GunElevation=t,this.Shells=r,this.LastFireTime=i}),G);function $a(n,e,t,r,i){const o=(a=r,new Ya(n,Math.fround(20),Math.fround(300),Math.fround(80),Math.fround(0),Math.fround(.5),Math.fround(.699999988079071),Math.fround(5),Math.fround(80),a));var a;return new Za(o,e,t,new H,i-o.GunRepeatTime)}function Qa(n){const e=ro*Math.fround(.6000000238418579);return[n-e,n+e]}function nu(n,e){const t=e.GunElevation/Math.fround(10),r=~~(Math.fround(9.5)+Math.fround(.15199999511241913)*t),i=~~(Math.fround(15.5)+Math.fround(.10400000214576721)*t);return[i,r,n-i,n-(i+r)]}function eu(n,e,t,r){const i=function(r){const i=nu(e,t),o=r-(6,6,6),a=r-(8,8,8);No(n,o,i[2],Fo()[_i.fields[0]],12,0|~~(i[0]+Math.fround(.5))),No(n,a,i[3],Fo()[ji.fields[0]],16,0|~~(i[1]+Math.fround(.5)))};if(1===t.GunTraits.GunType.tag){const n=Qa(t.GunCentreX);i(n[0]),i(n[1])}else i(t.GunCentreX);Vt((function(e){const i=e.ShellMechanicsObject.PositionGetter(r);if(1===i.tag){const a=Math.fround(1)-(o=t.GunTraits,(r-e.ShellStartTime)/o.GunShellDuration),u=a*Math.fround(12)+Math.fround(4),s=a*Math.fround(5)+Math.fround(1),c=i.fields[0].ptx-u/Math.fround(2),l=i.fields[0].pty-s/Math.fround(2);No(n,c,l,Fo()[qi.fields[0]],0|~~(u+Math.fround(.5)),0|~~(s+Math.fround(.5)))}var o}),t.Shells)}function tu(n,e,t,r,i){const o=n.Up.Held&&n.Down.Held?i.GunElevation:n.Up.Held?T(m,i.GunTraits.GunLowestElevation,i.GunElevation-i.GunTraits.GunElevationStepRate*t):n.Down.Held?I(m,i.GunTraits.GunHighestElevation,i.GunElevation+i.GunTraits.GunElevationStepRate*t):i.GunElevation,a=n.Left.Held&&n.Right.Held?i.GunCentreX:n.Left.Held?T(m,i.GunTraits.GunLeftExtent,i.GunCentreX-i.GunTraits.GunStepRatePerSecond*t):n.Right.Held?I(m,i.GunTraits.GunRightExtent,i.GunCentreX+i.GunTraits.GunStepRatePerSecond*t):i.GunCentreX;let u;const s=e-i.LastFireTime;if(n.Fire.JustDown&&s>i.GunTraits.GunRepeatTime){const n=function(n){return function(n,e,t,r){const i=nu(e,t),o=new ya(n,i[3]),a=new ya(n,function(n,e,t){const r=n.GunHighestElevation-t,i=(e-n.HighestShellY)/n.GunHighestElevation;return n.HighestShellY+r*i}(t.GunTraits,i[3],t.GunElevation));return new Ja(Ha((function(n,e){let t;let r,i,o;return t=n/e,o=function(n){let e,t;return t=Math.fround(1)-n,e=t*t,Math.fround(1)-e}(t),i=e*o,r=i,r}),o,a,r,t.GunTraits.GunShellDuration),r)}(n,r,i,e)};if(1===i.GunTraits.GunType.tag){const t=Qa(i.GunCentreX);u=[new H(n(t[0]),new H(n(t[1]),i.Shells)),e]}else{u=[new H(n(i.GunCentreX),i.Shells),e]}}else u=[i.Shells,i.LastFireTime];return new Za(i.GunTraits,a,o,u[0],u[1])}function ru(n,e){let t;var r,i;return r=function(n){return n.ShellMechanicsObject},i=n,t=ka((function(n){const e=r(n);return Oa(i,e)}),e.Shells),new Za(e.GunTraits,e.GunCentreX,e.GunElevation,t,e.LastFireTime)}const iu=b((function(n,e){this.AdditionalExplosionsList=n,this.AdditionalScore=e}),G);function ou(n,e,t,r,i,o,a){let u;if(u=tr((function(n){return t(n[0],n[1])}),Nt(function(n,e){let t=!0;const r=[];return pe(n=>t?(t=!1,Ce(e=>(r.push(e),[n,e]),e)):r.map(e=>[n,e]),n)}(n,e))),null==u.tail)return[n,e,new H,0];{let t,s,c,l,f,d;t=Kt((function(n,e){return[new H(n[0],e[0]),new H(n[1],e[1])]}),u,[new H,new H]),s=ur(r,t[0],{Equals:w,GetHashCode:h}),c=ur(i,t[1],{Equals:w,GetHashCode:h}),l=tr((function(n){return va(s,r,n)}),n),f=tr((function(n){return va(c,i,n)}),e);const g=new iu(new H,0),p=function(n,e,t){const r=n(t);return new iu(new H(r[0],e.AdditionalExplosionsList),e.AdditionalScore+r[1])};let m,S;if(null==o)m=g;else{m=Rt(W(2,v(2,p,[o])),g,s)}if(null==a)S=m;else{S=Rt(W(2,v(2,p,[a])),m,c)}return d=[S.AdditionalExplosionsList,S.AdditionalScore],[l,f,d[0],d[1]]}}const au=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const uu=b((function(n,e,t,r,i,o){this.BackgroundFont=n,this.BackgroundCharIndex=e,this.ForegroundFont=t,this.ForegroundCharIndex=r,this.SpacingX=i,this.SpacingY=o}),G);const su=b((function(n,e){this.BarTotal=n,this.BarValue=e}),G);function cu(n,e,t,r,i){const o=I(m,i.BarTotal,i.BarValue),a=Uo(n,r.BackgroundFont,r.SpacingX,r.SpacingY,r.BackgroundCharIndex,e,t,o);Uo(n,r.ForegroundFont,r.SpacingX,r.SpacingY,r.ForegroundCharIndex,a[0],a[1],i.BarTotal-o)}const lu=new uu(Cr,4,Cr,2,8,0),fu=new uu(Cr,3,Cr,1,8,0),hu=new uu(Cr,5,Cr,6,8,0),du=new uu(Cr,7,Cr,7,8,0),gu=b((function(n,e,t,r,i,o,a,u){this.ScoreAndHiScore=n,this.ShipsPending=e,this.ShipsThrough=t,this.Tanks=r,this.Damage=i,this.MaxDamage=o,this.PlaneIntel=a,this.Elevation=u}),G);function wu(n,e,t){const r=e+4|0,i=r+12|0,o=r+24|0;var a,u,s,c,l,f,h,d,g,w,p,m,S,M,y,I,T,C;if(Jo(n,yr,new pr(0,"LeftAlign"),new mr(0,"TopAlign"),4,r,"SCORE"),a=n,u=Mr,s=new pr(0,"LeftAlign"),c=new mr(0,"TopAlign"),l=68,f=r,h=t.ScoreAndHiScore.Score,Jo(a,u,s,c,l,f,h.toString()),Jo(n,yr,new pr(0,"LeftAlign"),new mr(0,"TopAlign"),4,i,"SHIPS"),cu(n,68,i,lu,new su((d=t).ShipsThrough+d.ShipsPending,d.ShipsThrough)),t.MaxDamage>0&&(Jo(n,yr,new pr(0,"LeftAlign"),new mr(0,"TopAlign"),4,o,"DAMAGE"),cu(n,68,o,hu,new su((g=t).MaxDamage,g.Damage))),Jo(n,yr,new pr(0,"LeftAlign"),new mr(0,"TopAlign"),160,r,"TANKS"),cu(n,208,r,fu,new su((w=t).Tanks,w.Tanks)),Jo(n,yr,new pr(0,"LeftAlign"),new mr(0,"TopAlign"),160,i,"ELEVATION"),p=n,m=Ir,S=new pr(0,"LeftAlign"),M=new mr(0,"TopAlign"),y=256,I=i,T=t.Elevation,Jo(p,m,S,M,y,I,Ge(Fe("%.1f"))(T)),null==t.PlaneIntel);else{const e=t.PlaneIntel;Jo(n,yr,new pr(0,"LeftAlign"),new mr(0,"TopAlign"),160,o,"INTEL"),cu(n,208,o,du,new su(C=e,C))}}function pu(n,e){return qo(n,0,e,320,200-e,new Ro(0,"SolidColour",0))}const mu=Math.fround(3),Su=Math.fround(160),Mu=new ya(Math.fround(160),Math.fround(20)),yu=Math.fround(4),Iu=Math.fround(20),Tu=Math.fround(.75),Cu=Math.fround(.5),Wu=Math.fround(30),Au=Math.fround(30);function vu(n){return Ot((function(n){return Fo()[n.fields[0]]}),n,Array)}const ku=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const Eu=b((function(n,e,t,r,i,o,a,u,s,c,l,f){this.FinalBossTargets=n,this.ScoreAndHiScore=e,this.TanksRemaining=t,this.ScreenStartTime=r,this.GunAim=i,this.AlliedState=o,this.Explosions=a,this.BossGunFlickBook=u,this.WhereToGoOnGameOver=s,this.WhereToOnVictory=c,this.WhereToOnTankDestroyed=l,this.MapNumber=0|f}),G);function bu(n,e){const t=new Fa(Tu,vu([Br,Rr,Lr,Kr]),new Xa(0,"Visible"),new Xa(0,"Visible")),r=Da(n,e,Tu);return new Ga(t,e,r)}function xu(n,e,t,r,i){const o=ou(n,e,(function(n,t){return!!w(t.TargetLocation,function(n){if(null!=n.tail)return n.head;throw new Error("List was empty")}(e).TargetLocation)&&(!Oa(i,n.ShellMechanicsObject)&&(Math.abs(t.TargetLocation.ptx-n.ShellMechanicsObject.FinalPosition.ptx)<mu&&Math.abs(t.TargetLocation.pty-n.ShellMechanicsObject.FinalPosition.pty)<mu))}),(function(n){return n.ShellStartTime}),(function(n){return n.TargetLocation.ptx}),(function(n){let e;return e=Pa(i,n.ShellMechanicsObject),[bu(e,i),2e3]}),null);return[o[0],o[1],_t(o[2],t),Mo(o[3],r)]}function Du(n,e,t){let r;r=Fo()[Hi.fields[0]];const i=function(){Ko(n,0,0,r)},o=function(t){eu(n,r.ImageMetadata.ImageHeight,e.GunAim,t)};if(1===e.AlliedState.tag){i();const r=t-e.ScreenStartTime;_o(n,Mu.ptx,Mu.pty,vu([Ri,Li]),Cu,r),_a(n,e.Explosions,t),o(t)}else if(2===e.AlliedState.tag)qo(n,0,0,320,200,new Ro(0,"SolidColour",0)),Jo(n,Mr,new pr(1,"CentreAlign"),new mr(1,"MiddleAlign"),160,100,"TANK DESTROYED");else if(3===e.AlliedState.tag);else{i(),function(e,t){for(;;){const r=e,i=t;if(null==i.tail)break;{const o=r?Ki:Ni;jo(n,i.head.TargetLocation.ptx,i.head.TargetLocation.pty,Fo()[o.fields[0]]),e=!1,t=i.tail}}}(!0,e.FinalBossTargets.TargetsOnFinalBoss),Na(n,e.BossGunFlickBook,t),_a(n,e.Explosions,t),o(t)}const a=new gu(e.ScoreAndHiScore,0,0,e.TanksRemaining,0,0,null,e.GunAim.GunElevation);pu(n,r.ImageMetadata.ImageHeight),wu(n,r.ImageMetadata.ImageHeight,a)}function Hu(n,e,t,r,i,o,a,u){return new Eu(t,n,e,u,$a(new Ua(0,"SingleBarrelGun"),Su,Au,Wu,u),new ku(0,"AlliedTankInPlay"),new H,new Ga(new Fa(Iu,vu([Pi,Oi,Xi,Fi,Gi,Bi]),new Xa(0,"Visible"),new Xa(0,"Visible")),u,Da(Mu,u,Iu)),i,o,a,r)}function Pu(n,e,t,r){const i=function(n,e,t,r){let i;var o,a;switch(i=Qo(e),1===n.AlliedState.tag||2===n.AlliedState.tag?(o=1,a=n.AlliedState.fields[0]):o=3===n.AlliedState.tag?2:0,o){case 0:{const e=t-n.ScreenStartTime;if(null==n.FinalBossTargets.TargetsOnFinalBoss.tail){const e=new ku(1,"WonScreen",t);return new Eu(n.FinalBossTargets,n.ScoreAndHiScore,n.TanksRemaining,n.ScreenStartTime,n.GunAim,e,n.Explosions,n.BossGunFlickBook,n.WhereToGoOnGameOver,n.WhereToOnVictory,n.WhereToOnTankDestroyed,n.MapNumber)}if(e>Iu){const e=new ku(2,"TankIsShot",t);return new Eu(n.FinalBossTargets,n.ScoreAndHiScore,n.TanksRemaining,n.ScreenStartTime,n.GunAim,e,n.Explosions,n.BossGunFlickBook,n.WhereToGoOnGameOver,n.WhereToOnVictory,n.WhereToOnTankDestroyed,n.MapNumber)}{let e,o;e=Ka(t,n.Explosions),o=0|Fo()[Hi.fields[0]].ImageMetadata.ImageHeight;const a=tu(i,t,r,o,n.GunAim),u=xu(a.Shells,n.FinalBossTargets.TargetsOnFinalBoss,e,n.ScoreAndHiScore,t);let s;return s=ru(t,new Za(a.GunTraits,a.GunCentreX,a.GunElevation,u[0],a.LastFireTime)),new Eu(new za(u[1]),u[3],n.TanksRemaining,n.ScreenStartTime,s,n.AlliedState,u[2],n.BossGunFlickBook,n.WhereToGoOnGameOver,n.WhereToOnVictory,n.WhereToOnTankDestroyed,n.MapNumber)}}case 1:if(t-a>yu){const e=new ku(3,"FinalBossScreenOver"),t=n.TanksRemaining-1;return new Eu(n.FinalBossTargets,n.ScoreAndHiScore,t,n.ScreenStartTime,n.GunAim,e,n.Explosions,n.BossGunFlickBook,n.WhereToGoOnGameOver,n.WhereToOnVictory,n.WhereToOnTankDestroyed,n.MapNumber)}return n;case 2:return n}}(xo(n),e,t,r);switch(1===i.AlliedState.tag||2===i.AlliedState.tag?0:3===i.AlliedState.tag?1:0){case 0:{const e=Ho(n);return bo(i,W(3,Do(n)),W(4,e),new H)}case 1:return null==i.FinalBossTargets.TargetsOnFinalBoss.tail?i.WhereToOnVictory(i.ScoreAndHiScore,t):i.TanksRemaining>0?i.WhereToOnTankDestroyed(i.MapNumber+1,i.TanksRemaining,i.ScoreAndHiScore,i.FinalBossTargets,t):i.WhereToGoOnGameOver(i.ScoreAndHiScore)}}const Ou=b((function(n,e,...t){P.call(this,n,e,...t)}),P);function Xu(n,e){let t;return t=function(n,e){let t=new H,r=new H,i=e;for(;null!=i.tail;)if(null!=i.tail){const e=i.tail,o=n(i.head);switch(o.tag){case 1:r=new H(o.fields[0],r);break;case 2:break;default:t=new H(o.fields[0],t)}i=e}return[t,r]}(n,e),[Lt(t[0]),Lt(t[1])]}const Fu=[["T----------X-------------WWWW------WW-WW---","X-T--------X-T-T----------WW-----WWW-WWWW--","X----------X------W-------W->------WWW--WW-","X----------X------WW-T->--W----------------","X------X---X---T--WWW----------------------","->-WWW-X---X-----WWWW--------\x3e-----WW------","----\x3e--X--------WWWW--------------WWW------","--T-T--X------\x3e--------T--XX-----WWW---WWWW","T------X-----------------XXXX-----------WWW"],["WW-------X-----WWWWW-*---X---WWWWWWWWW-X","W--XXXXXXXXXX---W-W-W*->-X----W-WWW-W--X","W----------\x3e-------=======----------T--X","WW---XXXXXXXX----X--**>--X--X----X->X---","==--X--=====---\x3e-X--*-------X-------X--X","WW-X-----X->-----X-----**X>-X----X-----X","==------X>----------***--X-------X--T--X","W-T------X---\x3e----WW*--\x3e-X------XXX----X","W-XXXX---X------XXXX*----X-------X-----X"],["XXX--XX--XXXXXXXXXXXXX----X-WW---T-------WWWW","--X-X--XX--WWW--WWWW------X-W--T---*----WWWW-","---X--------WWWWW---------X-------***----W>W-","-----\x3e--------WWWWW-------X---XXX*****---WWWW","->-----------WWWWWW---X>--XT-----\x3e-------====","-----\x3e------\x3e-W====---X-------XXX*****---WWWW","---X------\x3e-=====WWW--X>----------***---\x3e====","--X-X--XX------WW-----X--------T---*-----WWW-","XXX--XX--XXXXXXXXXXXXXX---WWW----T-----WWWWW-"],["-WWWWW-X--X***--T-----X----WWWWWWWWWWWW--WW","W-WWW--X>-X***---WWT--X----WWWW-WWWWWW-WW--","----T--X--X***>-------X---===-----W--W-----","-X->X-----=-------X---X>----WWW==----------","----X--X--X>--\x3e---X>--X----=========-------","-X-----X-----------X>-------WWW==----------","-X--T--X--X***--T--X------WW>---------W----","XXX----X>-X***-T-T-X-------WWWWWWWWWWWWW---","-X-----X--X***-----X---*---WW****WWW*WW*WWW"]],Gu=b((function(n,e){this.etx=0|n,this.ety=0|e}),G);const Bu=b((function(n,e,t){this.TilesHorizontally=0|n,this.TilesArray=e,this.EnemyTanks=t}),G);function Ru(n){switch(n){case"*":return Ii;case"-":return Ti;case"=":return yi;case">":return Ti;case"T":return Ci;case"W":return Wi;case"X":return Mi;default:return null}}function Lu(n){return e=function(n){let e;return e=Ru(n),null!=e},!Me(n=>!e(n),n.split(""));var e}function Ku(n){if(n.length<9)return new en(1,"Error","Map matrix file has insufficient rows.");if(function(n){if(n.length>=9){return ir((function(e){return n[e].length===n[0].length}),Nt(We(0,1,8)))}return!1}(n)){if(function(n){if(n.length>=9){return n.slice(0,9).every(Lu)}return!1}(n)){let t;return t=Ot((function(n){return"-----"+n+"-----"}),n.slice(0,9),Array),new en(0,"Ok",new Bu(t[0].length,(e=t,Xt(me((function(){return Ce((function(n){let t;return t=Ce((function(n){let e;return e=Ru(n),nn(e,Ti)}),e[n].split("")),r=t,Array.from(r);var r}),We(0,1,8))})),Array)),function(n){if(n.length>0){const e=0|n[0].length;return Nt(me((function(){return pe((function(t){const r=n[t];return pe((function(n){return">"===r[n]?Ae(new Gu(n,t)):Se()}),We(0,1,e-1))}),We(0,1,8))})))}return new H}(t)))}return new en(1,"Error","The map matrix contains illegal characters.")}return new en(1,"Error","The map matrix rows must all be the same length.");var e}function Nu(n){let e;return e=Ku(Fu[n]),tn((function(e){return Ge(Fe("TankMapDefinitions.[%d]: Error: %s"))(n)(e)}),e)}const ju=b((function(n,e,t,r){this.TilesHorizontally=0|n,this.TilesVertically=0|e,this.TileWidthPixels=t,this.TileHeightPixels=r}),G);const _u=b((function(n,e,t,r){this.WindowLeft=n,this.WindowTop=e,this.WindowWidth=t,this.WindowHeight=r}),G);const qu=b((function(n,e){this.OffsetX=n,this.OffsetY=e}),G);function zu(n,e,t,r){const i=function(n,e){if(e<=0){const t=0|~~(pn(e)/n);return[e+n*t|0,t]}return[e,0]},o=i(n.TileWidthPixels,t.OffsetX),a=i(n.TileHeightPixels,t.OffsetY);if(e.WindowWidth>0&&e.WindowHeight>0){const t=e.WindowLeft+e.WindowWidth|0,i=e.WindowTop+e.WindowHeight|0;let u=e.WindowTop+a[0]|0,s=0|a[1];for(;u<i&&s<n.TilesVertically;){let i=e.WindowLeft+o[0]|0,a=0|o[1];for(;i<t&&a<n.TilesHorizontally;)r(i,u,a,s),i+=n.TileWidthPixels,a+=1;u+=n.TileHeightPixels,s+=1}}}const Vu=b((function(n,e,t,r,i){this.BackgroundImage=n,this.Font=e,this.MessageText=t,this.ScreenWidthInt=r,this.ScreenHeightInt=i}),G);function Ju(n,e,t){Ko(n,0,0,e.BackgroundImage),Vo(n,e.Font,new pr(1,"CentreAlign"),new mr(1,"MiddleAlign"),~~(e.ScreenWidthInt/2),~~(e.ScreenHeightInt/2),e.MessageText)}const Uu=b((function(n,e,t,r){this.FrozenGameState=n,this.TimeFiddler=e,this.UnfreezeGameTime=t,this.PostFreezeCtor=r}),G);function Yu(n,e,t){const r=e.TimeFiddler(t);e.FrozenGameState.Draw(n,r)}function Zu(n,e,t,r){const i=xo(n);return t<i.UnfreezeGameTime?Oo(n):i.PostFreezeCtor((o=i.FrozenGameState,bo(null,(function(n,e,t){o.Draw(n,t)}),Xo,new H)),t);var o}function $u(n){return function(e){return function(e){return n(e)}}}function Qu(n,e,t,r){return bo(new Uu(r,(function(n){return e}),e+n,t),Yu,Zu,new H)}function ns(n,e){const t=(r=Fo()[zi.fields[0]],i=Go()[yr.fields[0]],bo(new Vu(r,i,"GET READY",320,200),Ju,Xo,new H));var r,i;return Qu(Math.fround(4),e,n,t)}const es=Math.fround(60),ts=Math.fround(188),rs=(es+ts)/Math.fround(2),is=Sr-Math.fround(16),os=Math.fround(12),as=Math.fround(3),us=Math.fround(12),ss=Math.fround(1),cs=Math.fround(3),ls=Math.fround(4),fs=(Math.fround(120),Math.fround(15)),hs=Math.fround(2.5),ds=Math.fround(.20000000298023224),gs=Math.fround(.75),ws=Math.fround(7);function ps(n){return Ot((function(n){return Fo()[n.fields[0]]}),n,Array)}function ms(n,e){return new Ga(new Fa(gs,ps([Br,Rr,Lr,Kr]),new Xa(1,"Hidden"),new Xa(1,"Hidden")),e,Da(n,e,gs))}const Ss=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const Ms=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const ys=b((function(n,e){this.etmx=n,this.etmy=e}),G);const Is=b((function(n,e,t,r,i,o,a){this.ScreenStartTime=n,this.TileMatrixTraits=e,this.LevelMap=t,this.GameOverOnTankBattleScreen=r,this.TankCompletedCourseSuccessfully=i,this.TankMapsList=o,this.MapNumber=0|a}),G);const Ts=b((function(n,e,t,r,i,o,a,u){this.Constants=n,this.ScoreAndHiScore=e,this.TanksRemaining=t,this.AlliedState=r,this.Decoratives=i,this.AlliedMissiles=o,this.EnemyMissiles=a,this.EnemyTankLocations=u}),G);function Cs(){return new Fa(Math.fround(3),[Fo()[Fr.fields[0]]],new Xa(1,"Hidden"),new Xa(1,"Hidden"))}function Ws(n,e,t){switch(t.tag){case 2:case 0:return new Ta(n-Math.fround(8),e-Math.fround(6),n+Math.fround(8),e+Math.fround(6));default:return new Ta(n-Math.fround(8),e-Math.fround(4),n+Math.fround(8),e+Math.fround(4))}}function As(n,e){let t;return t=0|~~(e*Math.fround(5)),16*pn(n)+320+t|0}function vs(n,e,t){return(0|pn(As(n,e)))+(0|~~(t+Math.fround(.5)))|0}function ks(n,e,t){let r;let i;r=0|As(n,t);return i=52,new ya(r+e.etmx,52+e.etmy)}function Es(n,e,t,r){const i=Ws(is,n,e),o=new _u(0|~~(i.Left+Math.fround(.5)),0|~~(i.Top+Math.fround(.5)),0|~~(i.Right-i.Left+Math.fround(.5)),0|~~(i.Bottom-i.Top+Math.fround(.5))),a=new qu(As(r.LevelMap.TilesHorizontally,t)-o.WindowLeft,0|~~(-(i.Top-(52,52))+Math.fround(.5)));let u=!0;return zu(r.TileMatrixTraits,o,a,(function(n,e,t,i){const o=r.LevelMap.TilesArray[i*r.LevelMap.TilesHorizontally+t];var a;u=!!u&&(!!w(a=o,Ti)||w(a,yi))})),!u}function bs(n){switch(n.tag){case 0:return ps([ki,xi]);case 2:return ps([Ei,Di]);default:return ps([vi,bi])}}function xs(n,e,t,r){let i;const o=0|As(n,e);let a;i=o;a=52,Vt((function(n){t(n.etmx+i,n.etmy+52)}),r)}function Ds(n,e,t){var r;const i=t-e.Constants.ScreenStartTime;let o;o=Fo()[Ai.fields[0]];const a=function(){Zo(n,i),function(n,e,t){const r=new _u(0,52,320,144),i=new qu(As(e.LevelMap.TilesHorizontally,t),0);zu(e.TileMatrixTraits,r,i,(function(t,r,i,o){let a;const u=e.LevelMap.TilesArray[o*e.LevelMap.TilesHorizontally+i];a=Fo()[u.fields[0]],Ko(n,t,r,a)})),zu(e.TileMatrixTraits,r,i,(function(t,r,i,o){let a;const u=e.LevelMap.TilesArray[o*e.LevelMap.TilesHorizontally+i];a=Fo()[u.fields[0]],Ko(n,t,r,a)})),zu(e.TileMatrixTraits,r,i,(function(t,r,i,o){let a;const u=e.LevelMap.TilesArray[o*e.LevelMap.TilesHorizontally+i];a=Fo()[u.fields[0]],Ko(n,t,r,a)}))}(n,e.Constants,i),_a(n,e.AlliedMissiles,i),_a(n,e.EnemyMissiles,i),xs(e.Constants.LevelMap.TilesHorizontally,i,(function(e,t){jo(n,e,t,o)}),e.EnemyTankLocations)},u=function(){_a(n,e.Decoratives,i)},s=Math.fround(0);switch(1===e.AlliedState.tag?1:2===e.AlliedState.tag||3===e.AlliedState.tag?2:0){case 0:{a();const t=i-e.Constants.ScreenStartTime;_o(n,is,e.AlliedState.fields[0],bs(e.AlliedState.fields[1]),ds,t),u();break}case 1:a(),u()}!function(n,e,t,r){const i=e+2|0;let o;o=Ge(Fe("SCORE  %d     TANKS  %d"))(t)(r),Jo(n,Tr,new pr(1,"CentreAlign"),new mr(0,"TopAlign"),160,i,o)}(n,(r=0|~~(s+Math.fround(.5)),r),e.ScoreAndHiScore.Score,e.TanksRemaining)}function Hs(n,e,t,r,i,o,a){const u=function(n,e){const t=0|jt(n);if(t<1)throw new Error("List of tank battle maps should never be empty");return er(e%t,n)}(r,t),s=new ju(u.TilesHorizontally,9,16,16),c=new Is(a,s,u,i,o,r,t);return new Ts(c,n,e,new Ms(0,"AlliedTankInPlay",rs,new Ss(1,"TankFacingLeft")),new H,new H,new H,qt((function(n){return new ys(16*n.etx+8|0,16*n.ety+8|0)}),u.EnemyTanks))}function Ps(n,e,t,r){if(e.Fire.JustDown&&function(n,e,t){let r;var i;if(r=null!=(i=n).tail?i.head.FlickBookStartTime:null,null!=r){return t-r>=e}return!0}(t,hs,r)){return new H((i=is-os,o=n-as,a=r,new Ga(Cs(),a,Ha((function(n,e){return n}),new ya(i,o),new ya(i-Sr,o),a,hs))),t)}return t;var i,o,a}function Os(n,e,t,r,i){const o=Ws(is,r,i),a=Fo()[Ai.fields[0]].ImageMetadata;let u=!1;return xs(n,e,(function(n,e){if(u)u=!0;else{let t;const r=n-a.ImageWidth/Math.fround(2),i=e-a.ImageHeight/Math.fround(2);t=new Ta(r,i,r+a.ImageWidth,i+a.ImageHeight),u=function(n,e){return!(y(n.Left,e.Right)>=0||y(n.Right,e.Left)<=0||y(n.Top,e.Bottom)>=0||y(n.Bottom,e.Top)<=0)}(t,o)}}),t),u}function Xs(n,e){let t;return t=Pa(e,n.FlickBookMechanicsObject),ms(t,e)}function Fs(n,e,t){return function(n,e){const t=n.ptx+us,r=n.pty-ss;return new Ga(Cs(),e,Ha((function(n,e){return n}),new ya(t,r),new ya(t+Sr,r),e,hs))}(ks(e,n,t),t)}function Gs(n,e,t,r,i,o){switch(n.tag){case 2:case 1:return[n,e];case 0:{const u=function(n,e,t){const r=t*fs;switch(e.tag){case 2:return I(m,n+r,ts);case 1:return n;default:return T(m,n-r,es)}}(n.fields[0],n.fields[1],t),s=(a=r).Up.Held&&a.Down.Held?new Ss(1,"TankFacingLeft"):a.Up.Held?new Ss(0,"TankFacingUpLeft"):a.Down.Held?new Ss(2,"TankFacingDownLeft"):new Ss(1,"TankFacingLeft");if(Es(u,s,o,i)){const n=new H(ms(new ya(is,u),o),e);return[new Ms(1,"AlliedTankExploding",o),n]}return[new Ms(0,"AlliedTankInPlay",u,s),e]}default:return[n,e]}var a}function Bs(n,e,t,r,i){switch(n.tag){case 3:case 1:return[e,n,t,r];case 0:{const o=function(n,e,t,r,i){const o=ou(n,new H(e,new H),t,r,(function(n){return 1}),i,null),a=null==o[1].tail?new au(0,"PlayerDestroyed"):new au(1,"PlayerSurvives");return[o[0],a,o[2],o[3]]}(e,n.fields[0],(function(n,e){return function(n,e,t){const r=new ya(is,t);let i;return i=Ra(n,e),Math.abs(r.ptx-i.ptx)<ws&&Math.abs(r.pty-i.pty)<ws}(i,n,e)}),Ba,(function(n){return[Xs(n,i),0]}));let a,u;return a=_t(o[2],t),u=Mo(o[3],r),0===o[1].tag?[o[0],new Ms(1,"AlliedTankExploding",i),a,u]:[o[0],n,a,u]}default:return[e,n,t,r]}}b((function(n,e,...t){P.call(this,n,e,...t)}),P);function Rs(n,e,t,r){let i,o;switch(i=Qo(e),2===n.AlliedState.tag||3===n.AlliedState.tag?0:1){case 0:o=n;break;case 1:{const e=t-n.Constants.ScreenStartTime,a=0|vs(n.Constants.LevelMap.TilesHorizontally,e,is);let u,s,c;u=Ka(e,n.Decoratives),s=Ka(e,n.AlliedMissiles),c=Ka(e,n.EnemyMissiles);const l=function(n,e,t){switch(n.tag){case 2:case 0:return[n,e];case 1:return t-n.fields[0]>ls?[new Ms(3,"AlliedTankDestroyed"),e-1]:[n,e];default:return[n,e]}}(function(n,e){switch(n.tag){case 2:case 1:return n;case 0:return e<64?new Ms(2,"AlliedTankReachedFort"):n;default:return n}}(n.AlliedState,a),n.TanksRemaining,e),f=Gs(l[0],u,r,i,n.Constants,e),h=ou(function(n,e,t,r){switch(n.tag){case 2:case 1:return t;case 0:return Ps(n.fields[0],e,t,r);default:return t}}(f[0],i,s,e),n.EnemyTankLocations,(function(t,r){return function(n,e,t,r){const i=ks(n,r,e);let o;return o=Ra(e,t),Math.abs(i.ptx-o.ptx)<ws&&Math.abs(i.pty-o.pty)<ws}(n.Constants.LevelMap.TilesHorizontally,e,t,r)}),Ba,(function(n){return n}),(function(n){return[Xs(n,e),1e3]}),null);let d,g;d=_t(h[2],f[1]),g=Mo(h[3],n.ScoreAndHiScore);const w=Bs(f[0],c,d,g,e),p=function(n,e,t,r,i){switch(n.tag){case 2:case 1:return[n,e];case 0:if(Os(r,i,t,n.fields[0],n.fields[1])){return[new Ms(1,"AlliedTankExploding",i),new H(ms(new ya(is,n.fields[0]),i),e)]}return[n,e];default:return[n,e]}}(w[1],w[2],h[1],n.Constants.LevelMap.TilesHorizontally,e),m=function(n,e,t,r){var i;let o,a,u,s;if(a=vs(n,r,Math.fround(0)),o=a,s=vs(n,r,Sr),u=s,i=r-cs,r-(null!=t.tail?t.head.FlickBookStartTime:i)>=cs){let i,a;a=ka((function(n){return n.etmx>=o&&n.etmx<=u}),e);const s=0|jt(a);if(s>0){i=er(~~r%s|0,a)}else i=null;if(null!=i){return new H(Fs(i,n,r),t)}return t}return t}(n.Constants.LevelMap.TilesHorizontally,h[1],w[0],e);o=new Ts(n.Constants,w[3],l[1],p[0],p[1],h[0],m,h[1]);break}}return o}const Ls=b((function(n,e,...t){P.call(this,n,e,...t)}),P);function Ks(n,e,t,r){const i=Rs(xo(n),e,t,r);switch(function(n){switch(3===n.AlliedState.tag?1:0===n.AlliedState.tag||1===n.AlliedState.tag?2:0){case 0:return new Ls(1,"TankCompletedCourseSuccessfully");case 1:return n.TanksRemaining>0?new Ls(3,"RestartTankBattle"):new Ls(2,"TankBattleGameOver");case 2:return new Ls(0,"StayOnTankBattleScreen")}}(i).tag){case 2:return i.Constants.GameOverOnTankBattleScreen(i.ScoreAndHiScore);case 0:{const e=Ho(n);return bo(i,W(3,Do(n)),W(4,e),new H)}case 3:{const e=Hs(i.ScoreAndHiScore,i.TanksRemaining,i.Constants.MapNumber,i.Constants.TankMapsList,i.Constants.GameOverOnTankBattleScreen,i.Constants.TankCompletedCourseSuccessfully,t);return ns((function(t,r){const i=Ho(n),o=Do(n);return bo(e,W(3,o),W(4,i),new H)}),t)}default:return i.Constants.TankCompletedCourseSuccessfully(i.TanksRemaining,i.ScoreAndHiScore,t)}}const Ns=Math.fround(20),js=Math.fround(.30000001192092896),_s=Math.fround(.30000001192092896),qs=new ya(Math.fround(97),Math.fround(129)),zs=Math.fround(2),Vs=new Ta(Math.fround(134),Math.fround(35),Math.fround(147),Math.fround(47)),Js=new Ta(Math.fround(86),Math.fround(75),Math.fround(238),Math.fround(139)),Us=new Ta(Math.fround(58),Math.fround(130),Math.fround(68),Math.fround(141));function Ys(n,e,t){let r;const i=function(n,e){const t=function(e,t){return e.Held&&t.Held?Math.fround(0):e.Held?-n:t.Held?n:Math.fround(0)};return new Ia(t(e.Left,e.Right),t(e.Up,e.Down))}(js,e);return r=new ya(n.ptx+i.modx,n.pty+i.mody),o=r,or((function(n){return Aa(n,o)}),t)?r:n;var o}function Zs(n,e){var t;const r=Aa(Js,i=e)?i:qs;var i,o,a,u,s,c;if(t=Math.fround(1),Math.abs(r.ptx-n.ptx)<t&&Math.abs(r.pty-n.pty)<t)return n;{let e;return a=_s,u=n,e=new Ia((s=(o=r).ptx-u.ptx)>a?a:s<Math.fround(0)?-a:Math.fround(0),(c=o.pty-u.pty)>a?a:c<Math.fround(0)?-a:Math.fround(0)),new ya(n.ptx+e.modx,n.pty+e.mody)}}const $s=new ya(Math.fround(135),Math.fround(120)),Qs=Ut([new Ta(Math.fround(86),Math.fround(75),Math.fround(156),Math.fround(139)),new Ta(Math.fround(68),Math.fround(130),Math.fround(91),Math.fround(141)),Us]),nc=b((function(n,e,t,r){this.ScoreAndHiScore=n,this.ShipsThrough=e,this.Location=t,this.BeachLandingCtor=r}),G);function ec(n,e,t){let r;r=Fo()[vr.fields[0]],Ko(n,0,0,r),jo(n,e.Location.ptx,e.Location.pty,Fo()[kr.fields[0]]),pu(n,r.ImageMetadata.ImageHeight);const i=new gu(e.ScoreAndHiScore,0,e.ShipsThrough,na(e.ShipsThrough),0,0,null,Math.fround(0));wu(n,r.ImageMetadata.ImageHeight,i)}function tc(n,e,t,r){let i;i=Qo(e);const o=xo(n),a=Ys(o.Location,i,Qs);if(Aa(Us,a)){let e;return e=$u(o.BeachLandingCtor),Qu(zs,t,W(2,e),n)}{const e=new nc(o.ScoreAndHiScore,o.ShipsThrough,a,o.BeachLandingCtor),t=Ho(n);return bo(e,W(3,Do(n)),W(4,t),new H)}}const rc=Math.fround(3),ic=Math.fround(6),oc=b((function(n,e,...t){P.call(this,n,e,...t)}),P);function ac(n){return n<=Math.fround(45)?n:Math.fround(90)-n}function uc(n){let e,t;e=ac(n);const r=Math.fround(0),i=Math.fround(45),o=Math.fround(1);let a,u;t=e*((Math.fround(0)-o)/(i-r))+o,a=t*t;const s=Math.fround(0),c=Math.fround(1),l=Math.fround(100);return u=a*((Math.fround(148)-l)/(c-s))+l,u+Math.fround(.5)}const sc=b((function(n,e,t,r,i){this.CentreX=n,this.BaseY=e,this.ShipImage=t,this.SinkStartTime=r,this.ElevationToHit=i}),G);function cc(n,e,t){return new sc(n,uc(t),e,null,t)}function lc(){return Ut([cc(Math.fround(29),Fo()[gi.fields[0]],Math.fround(44)),cc(Math.fround(143),Fo()[wi.fields[0]],Math.fround(39.5)),cc(Math.fround(198),Fo()[pi.fields[0]],Math.fround(36.5)),cc(Math.fround(248),Fo()[mi.fields[0]],Math.fround(41)),cc(Math.fround(288),Fo()[Si.fields[0]],Math.fround(32.5))])}function fc(n,e){return ka((function(e){return function(n,e){if(null!=e.SinkStartTime){return n-e.SinkStartTime<=ic}return!0}(n,e)}),e)}function hc(n,e,t){Vt((function(e){let r,i;if(null!=e.SinkStartTime){const n=e.SinkStartTime;r=I(m,t-n,ic)/ic*e.ShipImage.ImageMetadata.ImageHeight}else r=Math.fround(0);i=e.ShipImage.ImageMetadata.ImageWidth;const o=e.ShipImage.ImageMetadata.ImageHeight-~~(r+Math.fround(.5))|0,a=e.CentreX-e.ShipImage.ImageMetadata.ImageWidth/Math.fround(2),u=e.BaseY-(e.ShipImage.ImageMetadata.ImageHeight-r);let s;s=o;const c=new Lo(3,"DrawSubImageStretchedToTarget",0,0,i,o,a,u,e.ShipImage.ImageMetadata.ImageWidth,s,e.ShipImage);n(c)}),e)}function dc(n){let e,t;let r;e=Fo()[li.fields[0]],t=e.ImageMetadata.ImageWidth,r=e.ImageMetadata.ImageHeight;const i=new Fa(rc,[Fo()[fi.fields[0]],Fo()[hi.fields[0]],Fo()[hi.fields[0]],Fo()[di.fields[0]],Fo()[di.fields[0]]],new Xa(1,"Hidden"),new Xa(1,"Hidden")),o=Da(new ya(t/Math.fround(2),r/Math.fround(2)),n,rc);return new Ga(i,n,o)}function gc(n){Jo(n,Tr,new pr(1,"CentreAlign"),new mr(1,"MiddleAlign"),160,75,"STAGE COMPLETE")}function wc(n){Jo(n,Tr,new pr(1,"CentreAlign"),new mr(1,"MiddleAlign"),160,75,"SHIP DESTROYED")}const pc=b((function(n,e){this.ToDoTime=n,this.ToDoData=e}),G);function mc(n,e){return new pc(n,e)}const Sc=b((function(n,e,...t){P.call(this,n,e,...t)}),P);function Mc(n,e,t){const r=function(n,e){return n>=e.ToDoTime};if(or(v(1,r,[n]),t[1])){let o,a;return a=Lt(t[1]),o=Rt((function(t,i){if(r(n,i)){const r=e(t[0],i.ToDoData,n);return 1===r.tag?[r.fields[0],_t(r.fields[1],t[1])]:[r.fields[0],t[1]]}return[t[0],new H(i,t[1])]}),[t[0],new H],a),[(i=o)[0],Lt(i[1])]}return[t[0],t[1]];var i}const yc=Math.fround(30),Ic=Math.fround(160),Tc=Math.fround(4),Cc=(Math.fround(.75),Math.fround(6),Math.fround(.20000000298023224)),Wc=Math.fround(3.5),Ac=Math.fround(.30000001192092896),vc=Math.fround(155),kc=Math.fround(140),Ec=Math.fround(4),bc=Math.fround(10),xc=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const Dc=b((function(n){this.HitShipX=n}),G);const Hc=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const Pc=b((function(n,e,t,r,i,o,a,u,s,c,l,f,h,d,g,w){this.ScoreAndHiScore=n,this.ShipsRemaining=e,this.GunAim=t,this.AlliedState=r,this.AlliedCountToSink=0|i,this.EnemyShips=o,this.Decoratives=a,this.SkyExplosion=u,this.PendingIncoming=s,this.PendingDamage=c,this.PendingHits=l,this.PendingMessageTexts=f,this.PendingScoreChanges=h,this.MessageText=d,this.WhereToGoOnGameOver=g,this.WhereToOnCourseCompletion=w}),G);function Oc(n){return Ot((function(n){return Fo()[n.fields[0]]}),n,Array)}function Xc(n,e,t){const r=new Fa(Cc,Oc([ii]),new Xa(1,"Hidden"),new Xa(1,"Hidden")),i=Da(new ya(e,t),n,Cc);return new Ga(r,n,i)}function Fc(n,e){return Qt((function(n){const t=n.ShipImage.ImageMetadata.ImageWidth/Math.fround(2);return null==n.SinkStartTime&&Math.abs(n.CentreX-e)<t}),n)}function Gc(n,e,t,r){const i=n.BaseY-n.ShipImage.ImageMetadata.ImageHeight,o=t?vc:kc,a=new Fa(Math.fround(.699999988079071),Oc([oi,ai]),new Xa(1,"Hidden"),new Xa(1,"Hidden")),u=new Fa(Math.fround(.699999988079071),Oc([si,ci]),new Xa(1,"Hidden"),new Xa(1,"Hidden")),s=r+a.FlickBookDuration+Ac,c=s+u.FlickBookDuration,l=c+Wc,f=new Ga(a,r,Ha((function(n,e){let t;let r,i,o;var a;return t=n/e,o=(a=t)*a,i=e*o,r=i,r}),new ya(n.CentreX,i),new ya(n.CentreX,Math.fround(-10)),r,a.FlickBookDuration)),h=new Ga(u,s,Ha((function(n,e){let t;let r,i,o;var a;return t=n/e,o=(a=t)*a,i=e*o,r=i,r}),new ya(n.CentreX,Math.fround(-100)),new ya(n.CentreX,o),s,u.FlickBookDuration)),d=t?e:new H(Xc(c,n.CentreX,o),e);return[new H(f,new H(h,d)),c,l]}function Bc(n,e){let t;t=0|Fo()[ii.fields[0]].ImageMetadata.ImageHeight;const r=uc(n.GunElevation)-t/Math.fround(2);return Xc(e,n.GunCentreX,r)}const Rc=b((function(n,e,...t){P.call(this,n,e,...t)}),P);function Lc(n,e,t,r){var i,o,a,u,s,c,l;if(n.Fire.JustDown){const n=r+e.GunTraits.GunShellDuration*Math.fround(2);let f;if(f=Fc(t,e.GunCentreX),null!=f){const t=f,r=function(n,e){const t=~~ac(n.GunElevation)-~~e.ElevationToHit|0;return 0===t?new Rc(0,"DirectHit"):t<0?new Rc(2,"TooNearBy",pn(t)):new Rc(1,"TooFarBy",t)}(e,t),h=2===r.tag?[null,(o=100*Math.abs(r.fields[0])|0,a=Ge(Fe("%dM SHORT")),i=a(o),mc(n,i)),null]:1===r.tag?[null,(s=100*Math.abs(r.fields[0])|0,c=Ge(Fe("%dM LONG")),u=c(s),mc(n,u)),null]:[(l=new Dc(t.CentreX),mc(n,l)),mc(n,"DIRECT HIT"),mc(n,2e3)],d=2===r.tag?Bc(e,n):(r.tag,null);return[h[0],h[1],h[2],d]}return[null,null,null,Bc(e,n)]}return[null,null,null,null]}function Kc(n,e,t){let r;r=Fo()[li.fields[0]];const i=function(t){eu(n,r.ImageMetadata.ImageHeight,e.GunAim,t)},o=function(){Ko(n,0,0,r),_a(n,e.SkyExplosion,t),hc(n,e.EnemyShips,t),_a(n,e.Decoratives,t)};2===e.AlliedState.tag?(o(),i(t),gc(n)):1===e.AlliedState.tag?(o(),wc(n)):3===e.AlliedState.tag||(o(),i(t));const a=new gu(e.ScoreAndHiScore,0,e.ShipsRemaining,na(e.ShipsRemaining),5-(e.AlliedCountToSink>>>0),5,null,e.GunAim.GunElevation);Jo(n,Tr,new pr(1,"CentreAlign"),new mr(1,"MiddleAlign"),160,15,e.MessageText),pu(n,r.ImageMetadata.ImageHeight),wu(n,r.ImageMetadata.ImageHeight,a)}function Nc(n,e,t,r){let i;if(i=Qo(e),2===n.AlliedState.tag){if(t-n.AlliedState.fields[0]>Tc){const e=new oc(3,"AirOrSeaBattleScreenOver");return new Pc(n.ScoreAndHiScore,n.ShipsRemaining,n.GunAim,e,n.AlliedCountToSink,n.EnemyShips,n.Decoratives,n.SkyExplosion,n.PendingIncoming,n.PendingDamage,n.PendingHits,n.PendingMessageTexts,n.PendingScoreChanges,n.MessageText,n.WhereToGoOnGameOver,n.WhereToOnCourseCompletion)}return n}if(1===n.AlliedState.tag){if(t-n.AlliedState.fields[0]>Tc){if(n.ShipsRemaining>1){const e=new oc(0,"AlliedShipInPlay"),t=n.ShipsRemaining-1;return new Pc(n.ScoreAndHiScore,t,n.GunAim,e,n.AlliedCountToSink,n.EnemyShips,n.Decoratives,n.SkyExplosion,n.PendingIncoming,n.PendingDamage,n.PendingHits,n.PendingMessageTexts,n.PendingScoreChanges,n.MessageText,n.WhereToGoOnGameOver,n.WhereToOnCourseCompletion)}{const e=new oc(3,"AirOrSeaBattleScreenOver");return new Pc(n.ScoreAndHiScore,0,n.GunAim,e,n.AlliedCountToSink,n.EnemyShips,n.Decoratives,n.SkyExplosion,n.PendingIncoming,n.PendingDamage,n.PendingHits,n.PendingMessageTexts,n.PendingScoreChanges,n.MessageText,n.WhereToGoOnGameOver,n.WhereToOnCourseCompletion)}}return n}if(3===n.AlliedState.tag)return n;if(null==n.EnemyShips.tail){const e=new oc(2,"WonScreen",t);return new Pc(n.ScoreAndHiScore,n.ShipsRemaining,n.GunAim,e,n.AlliedCountToSink,n.EnemyShips,n.Decoratives,n.SkyExplosion,n.PendingIncoming,n.PendingDamage,n.PendingHits,n.PendingMessageTexts,n.PendingScoreChanges,n.MessageText,n.WhereToGoOnGameOver,n.WhereToOnCourseCompletion)}{let e,o,a,u;e=Ka(t,n.SkyExplosion),o=Ka(t,n.Decoratives),a=fc(t,n.EnemyShips),u=0|Fo()[li.fields[0]].ImageMetadata.ImageHeight;const s=tu(i,t,r,u,n.GunAim);let c,l,f,h,d,g;c=Mc(t,(function(n,e,t){return function(n,e,t,r,i,o){var a,u,s;if(null!=n.tail){if(null!=n.head.SinkStartTime)return new Sc(1,"PendingDoneWithAdditionalToDos",[n,e,t,r],new H((a=new Hc(0,"IncomingChange",null),mc(o+Ec,a)),new H));{const t=1===r,i=Gc(n.head,e,t,o),a=t?new H((u=new xc(0,"DamageChange",null),mc(i[1],u)),new H):new H,c=r-1|0;return new Sc(1,"PendingDoneWithAdditionalToDos",[n,i[0],a,c],new H((s=new Hc(0,"IncomingChange",null),mc(i[2],s)),new H))}}return new Sc(0,"PendingDone",[n,e,t,r])}(n[0],n[1],n[2],n[3],0,t)}),[[a,o,n.PendingDamage,n.AlliedCountToSink],n.PendingIncoming]),l=Mc(t,(function(n,e,t){return new Sc(0,"PendingDone",[new oc(1,"ShipSinking",t),new H(dc(t),new H),5])}),[[n.AlliedState,e,c[0][3]],c[0][2]]),f=Mc(t,(function(n,e,t){return new Sc(0,"PendingDone",(r=t,i=e.HitShipX,qt((function(n){if(n.CentreX===i&&null==n.SinkStartTime){const e=r;return new sc(n.CentreX,n.BaseY,n.ShipImage,e,n.ElevationToHit)}return n}),n)));var r,i}),[c[0][0],n.PendingHits]),h=Mc(t,(function(n,e,t){return new Sc(0,"PendingDone",e)}),[n.MessageText,n.PendingMessageTexts]),d=Mc(t,(function(n,e,t){return new Sc(0,"PendingDone",Mo(e,n))}),[n.ScoreAndHiScore,n.PendingScoreChanges]),g=ru(t,s);const w=Lc(i,g,f[0],t),p=function(n,e){if(null!=n){return new H(Q(n),e)}return e},m=p(w[0],f[1]),S=p(w[1],h[1]),M=p(w[2],d[1]),y=p(w[3],c[0][1]);return new Pc(d[0],n.ShipsRemaining,g,l[0][0],l[0][2],f[0],y,l[0][1],c[1],l[1],m,S,M,h[0],n.WhereToGoOnGameOver,n.WhereToOnCourseCompletion)}}function jc(n,e,t,r){const i=Nc(xo(n),e,t,r);switch(1===i.AlliedState.tag||2===i.AlliedState.tag?0:3===i.AlliedState.tag?1:0){case 0:{const e=Ho(n);return bo(i,W(3,Do(n)),W(4,e),new H)}case 1:return i.ShipsRemaining>0?i.WhereToOnCourseCompletion(i.ShipsRemaining,i.ScoreAndHiScore,t):i.WhereToGoOnGameOver(i.ScoreAndHiScore)}}function _c(n,e,t,r,i){var o,a,u;return bo((o=t,a=r,u=i,new Pc(n,e,$a(new Ua(1,"DoubleBarrelGun"),Ic,yc,bc,u),new oc(0,"AlliedShipInPlay"),5,lc(),new H,new H,new H(mc(u,new Hc(0,"IncomingChange",null)),new H),new H,new H,new H,new H,"",o,a)),Kc,jc,new H)}const qc=Math.fround(30),zc=Math.fround(160),Vc=Math.fround(6),Jc=Math.fround(4),Uc=Math.fround(.75),Yc=Math.fround(6),Zc=Math.fround(3),$c=Math.fround(5),Qc=Math.fround(1),nl=Math.fround(150),el=Math.fround(30);function tl(n){return Ot((function(n){return Fo()[n.fields[0]]}),n,Array)}const rl=b((function(n,e){this.PlaneFlickBookInstance=n,this.PlaneHasReleasedBombs=e}),G);const il=b((function(n,e,t,r,i,o,a,u,s,c,l,f,h,d){this.ScoreAndHiScore=n,this.ShipsRemaining=e,this.Planes=t,this.PlaneBombs=r,this.PlanesRemaining=i,this.GunAim=o,this.AlliedState=a,this.SkyExplosion=u,this.Explosions=s,this.EnemyShips=c,this.Damage=l,this.LastSortieAt=f,this.WhereToGoOnGameOver=h,this.WhereToOnCourseCompletion=d}),G);function ol(n){return n.PlaneFlickBookInstance}function al(n,e){const t=new Fa(Uc,tl([ei,ti,ri]),new Xa(1,"Hidden"),new Xa(0,"Visible")),r=Da(n,e,Uc);return new Ga(t,e,r)}function ul(n,e,t,r,i){const o=ou(n,e,(function(n,e){return function(n,e,t){if(Oa(n,e.ShellMechanicsObject))return!1;{let r,i;return i=ol(t),r=Ra(n,i),Math.abs(r.ptx-e.ShellMechanicsObject.FinalPosition.ptx)<Vc&&Math.abs(r.pty-e.ShellMechanicsObject.FinalPosition.pty)<Vc}}(i,n,e)}),(function(n){return n.ShellStartTime}),(function(n){return n.PlaneFlickBookInstance.FlickBookStartTime}),(function(n){let e;return e=Pa(i,n.ShellMechanicsObject),[al(e,i),2e3]}),null);return[o[0],o[1],_t(o[2],t),Mo(o[3],r)]}function sl(n,e,t){const r=0|Fo()[li.fields[0]].ImageMetadata.ImageHeight,i=function(t){eu(n,r,e.GunAim,t)},o=function(){Ko(n,0,0,Fo()[li.fields[0]]),_a(n,e.SkyExplosion,t),hc(n,e.EnemyShips,t),ja(n,ol,e.Planes,t),_a(n,e.PlaneBombs,t),_a(n,e.Explosions,t)};2===e.AlliedState.tag?(o(),i(t),gc(n)):1===e.AlliedState.tag?(o(),wc(n)):3===e.AlliedState.tag||(o(),i(t));const a=new gu(e.ScoreAndHiScore,e.ShipsRemaining,0,na(e.ShipsRemaining),e.Damage,5,~~((e.PlanesRemaining+3)/4),e.GunAim.GunElevation);pu(n,r),wu(n,r,a)}function cl(n){const e=~~n%4|0;return 0===e?[function(){return new Fa(Yc,tl([Nr,jr,_r,qr,Vr,Yr,Qr]),new Xa(1,"Hidden"),new Xa(0,"Visible"))},Math.fround(-50)]:1===e?[function(){return new Fa(Yc,tl([Nr,jr,_r,qr,Jr,Zr,ni]),new Xa(1,"Hidden"),new Xa(0,"Visible"))},Math.fround(50)]:[function(){return new Fa(Yc,tl([Nr,jr,_r,qr,zr,Ur,$r]),new Xa(1,"Hidden"),new Xa(0,"Visible"))},Math.fround(0)]}function ll(n){const e=cl(n),t=~~n%24*10+40,r=t+e[1];return new rl(new Ga(e[0](),n,Ha((function(n,e){let t;let r,i,o;var a;return t=n/e,o=(a=t)*a,i=e*o,r=i,r}),new ya(t,Math.fround(90)),new ya(r,Math.fround(-14)),n,Yc)),!1)}function fl(n,e){let t;t=Ra(e,n.PlaneFlickBookInstance);const r=new ya(t.ptx,nl);return new Ga(new Fa(Qc,tl([oi,ai,ui,si,ci]),new Xa(1,"Hidden"),new Xa(0,"Visible")),e,Ha((function(n,e){let t;let r,i,o;var a;return t=n/e,o=(a=t)*a,i=e*o,r=i,r}),t,r,e,Qc))}function hl(n,e,t){return Rt((function(e,t){if(t.PlaneHasReleasedBombs)return[e[0],new H(t,e[1])];if(n-t.PlaneFlickBookInstance.FlickBookStartTime>=Zc){return[new H(fl(t,n),e[0]),new H(new rl(t.PlaneFlickBookInstance,!0),e[1])]}return[e[0],new H(t,e[1])]}),[e,new H],t)}function dl(n,e,t,r){let i;if(i=Qo(e),2===n.AlliedState.tag){if(t-n.AlliedState.fields[0]>Jc){const e=new oc(3,"AirOrSeaBattleScreenOver");return new il(n.ScoreAndHiScore,n.ShipsRemaining,n.Planes,n.PlaneBombs,n.PlanesRemaining,n.GunAim,e,n.SkyExplosion,n.Explosions,n.EnemyShips,n.Damage,n.LastSortieAt,n.WhereToGoOnGameOver,n.WhereToOnCourseCompletion)}return n}if(1===n.AlliedState.tag){if(t-n.AlliedState.fields[0]>Jc){if(n.ShipsRemaining>1){const e=new oc(0,"AlliedShipInPlay"),t=n.ShipsRemaining-1,r=new H;return new il(n.ScoreAndHiScore,t,n.Planes,n.PlaneBombs,n.PlanesRemaining,n.GunAim,e,r,n.Explosions,n.EnemyShips,0,n.LastSortieAt,n.WhereToGoOnGameOver,n.WhereToOnCourseCompletion)}{const e=new oc(3,"AirOrSeaBattleScreenOver"),t=new H;return new il(n.ScoreAndHiScore,0,n.Planes,n.PlaneBombs,n.PlanesRemaining,n.GunAim,e,t,n.Explosions,n.EnemyShips,n.Damage,n.LastSortieAt,n.WhereToGoOnGameOver,n.WhereToOnCourseCompletion)}}return n}if(3===n.AlliedState.tag)return n;if(0===n.PlanesRemaining&&null==n.Planes.tail){const e=new oc(2,"WonScreen",t);return new il(n.ScoreAndHiScore,n.ShipsRemaining,n.Planes,n.PlaneBombs,n.PlanesRemaining,n.GunAim,e,n.SkyExplosion,n.Explosions,n.EnemyShips,n.Damage,n.LastSortieAt,n.WhereToGoOnGameOver,n.WhereToOnCourseCompletion)}{let e;let c,l,f;e=0|Fo()[li.fields[0]].ImageMetadata.ImageHeight,c=Ka(t,n.Explosions),l=Ka(t,n.SkyExplosion),f=La(t,ol,n.Planes);const h=0|jt(n.PlaneBombs);let d;d=Ka(t,n.PlaneBombs);const g=0|jt(d),w=n.Damage+(h-g>>>0),p=tu(i,t,r,e,n.GunAim),m=hl(t,d,f),S=(o=t,a=n.PlanesRemaining,u=n.LastSortieAt,s=m[1],a>0&&o>u+$c&&jt(s)<3?[a-1,o,new H(ll(o),s)]:[a,u,s]),M=w>=5?[new oc(1,"ShipSinking",t),new H(dc(t),new H)]:[n.AlliedState,l],y=ul(p.Shells,S[2],c,n.ScoreAndHiScore,t);let I;return I=ru(t,new Za(p.GunTraits,p.GunCentreX,p.GunElevation,y[0],p.LastFireTime)),new il(y[3],n.ShipsRemaining,y[1],m[0],S[0],I,M[0],M[1],y[2],n.EnemyShips,w,S[1],n.WhereToGoOnGameOver,n.WhereToOnCourseCompletion)}var o,a,u,s}function gl(n,e,t,r){const i=dl(xo(n),e,t,r);switch(1===i.AlliedState.tag||2===i.AlliedState.tag?0:3===i.AlliedState.tag?1:0){case 0:{const e=Ho(n);return bo(i,W(3,Do(n)),W(4,e),new H)}case 1:return i.ShipsRemaining>0?i.WhereToOnCourseCompletion(i.ShipsRemaining,i.ScoreAndHiScore,t):i.WhereToGoOnGameOver(i.ScoreAndHiScore)}}function wl(n,e,t,r,i,o){return bo(function(n,e,t,r,i,o){let a;a=1===n.tag?20:40;const u=$a(new Ua(1,"DoubleBarrelGun"),zc,qc,el,o),s=new oc(0,"AlliedShipInPlay"),c=new H,l=new H,f=lc();return new il(e,t,new H,new H,a,u,s,l,c,f,0,Math.fround(0),r,i)}(n,e,t,r,i,o),sl,gl,new H)}const pl=new ya(Math.fround(124),Math.fround(75)),ml=new H(new Ta(Math.fround(86),Math.fround(75),Math.fround(276),Math.fround(139)),new H),Sl=b((function(n,e,t,r,i){this.ScoreAndHiScore=n,this.ShipsThrough=e,this.AlliedFleetCentre=t,this.EnemyFleetCentre=r,this.BattleCtor=i}),G);function Ml(n,e,t){let r;r=Fo()[vr.fields[0]],Ko(n,0,0,r),jo(n,e.AlliedFleetCentre.ptx,e.AlliedFleetCentre.pty,Fo()[kr.fields[0]]),jo(n,e.EnemyFleetCentre.ptx,e.EnemyFleetCentre.pty,Fo()[Er.fields[0]]),pu(n,r.ImageMetadata.ImageHeight);const i=new gu(e.ScoreAndHiScore,0,e.ShipsThrough,na(e.ShipsThrough),0,0,null,Math.fround(0));wu(n,r.ImageMetadata.ImageHeight,i)}function yl(n,e,t,r){let i;i=Qo(e);const o=xo(n),a=Ys(o.AlliedFleetCentre,i,ml),u=Zs(o.EnemyFleetCentre,a);if(Math.abs(u.ptx-a.ptx)<Ns&&Math.abs(u.pty-a.pty)<Ns){let e;return e=$u(o.BattleCtor),Qu(zs,t,W(2,e),n)}{const e=new Sl(o.ScoreAndHiScore,o.ShipsThrough,a,u,o.BattleCtor),t=Ho(n);return bo(e,W(3,Do(n)),W(4,t),new H)}}const Il=Math.fround(4),Tl=Math.fround(4),Cl=Math.fround(10),Wl=Math.fround(3),Al=Math.fround(.75);function vl(){return new Fa(Al,Ot((function(n){return Fo()[n.fields[0]]}),[Br,Rr,Lr,Kr],Array),new Xa(1,"Hidden"),new Xa(1,"Hidden"))}const kl=b((function(n,e,t){this.ShipsStillToNavigate=n,this.ShipsSuccess=e,this.ScoreAndHiScore=t}),G);const El=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const bl=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const xl=b((function(n,e,t){this.ShipRotation=n,this.ShipSpeed=e,this.ShipCentre=t}),G);const Dl=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const Hl=b((function(n){this.MineLocation=n}),G);const Pl=b((function(n,e,t){this.TorpedoLaunchDetail=n,this.TorpedoPositionGetter=e,this.TorpedoIsHorizontal=t}),G);const Ol=b((function(n,e,t,r,i,o,a){this.FleetStats=n,this.LiveTorpedos=e,this.Mines=t,this.Animations=r,this.Ship=i,this.WhereToGoOnGameOver=o,this.WhereToOnCourseCompletion=a}),G);function Xl(n,e){return e.Left.JustDown?function(n){switch(n.tag){case 1:return new El(0,"FacingLeft");case 2:return new El(1,"Facing1");case 3:return new El(2,"Facing2");case 4:return new El(3,"Facing3");default:return new El(0,"FacingLeft")}}(n):e.Right.JustDown?function(n){switch(n.tag){case 1:return new El(2,"Facing2");case 2:return new El(3,"Facing3");case 3:case 4:return new El(4,"FacingUp");default:return new El(1,"Facing1")}}(n):n}function Fl(n,e){return e.Up.JustDown?function(n){switch(n.tag){case 1:return new bl(2,"ShipMedium");case 2:case 3:return new bl(3,"ShipFast");default:return new bl(1,"ShipSlow")}}(n):e.Down.JustDown?function(n){switch(n.tag){case 1:return new bl(0,"ShipStationary");case 2:return new bl(1,"ShipSlow");case 3:return new bl(2,"ShipMedium");default:return new bl(0,"ShipStationary")}}(n):n}function Gl(n){switch(n.tag){case 1:return Math.fround(.9229999780654907);case 2:return Math.fround(.7070000171661377);case 3:return Math.fround(.382999986410141);case 4:return Math.fround(0);default:return Math.fround(1)}}function Bl(n){switch(n.tag){case 1:return Math.fround(.382999986410141);case 2:return Math.fround(.7070000171661377);case 3:return Math.fround(.9229999780654907);case 4:return Math.fround(1);default:return Math.fround(0)}}function Rl(n,e,t){let r;return r=function(n){switch(n.tag){case 1:return Math.fround(.20000000298023224);case 2:return Math.fround(.4000000059604645);case 3:return Math.fround(.6000000238418579);default:return Math.fround(0)}}(t),new ya(n.ptx+Gl(e)*-r,n.pty-Bl(e)*r)}const Ll=Ut([[.2,.352],[.404,.338],[.556,.196],[.294,.606],[.7,.336],[.264,.808],[.564,.688],[.812,.512],[.908,.662],[.87,.832]]);function Kl(){return qt((function(n){return function(n,e){var t,r;let i,o;return o=Fo()[br.fields[0]],i=[(t=o.ImageMetadata.ImageWidth,t),(r=o.ImageMetadata.ImageHeight,r)],new Hl(new ya(n*i[0],e*i[1]))}(n[0],n[1])}),Ll)}const Nl=Ut([[[.086,.214],[.318,.082],Math.fround(5),Math.fround(1)],[[.086,.214],[.616,.214],Math.fround(4.099999904632568),Math.fround(2.5)],[[.132,.39],[.454,.126],Math.fround(6.199999809265137),Math.fround(2)],[[.132,.39],[.826,.39],Math.fround(5.300000190734863),Math.fround(3)],[[.17,.592],[.776,.312],Math.fround(7),Math.fround(3.5)],[[.17,.592],[.958,.592],Math.fround(7.099999904632568),Math.fround(2)],[[.206,.79],[.846,.41],Math.fround(7.199999809265137),Math.fround(3.5)],[[.206,.79],[.984,.79],Math.fround(8.300000190734863),Math.fround(1)],[[.382,.102],[.138,.336],Math.fround(6),Math.fround(1)],[[.698,.204],[.078,.204],Math.fround(6.400000095367432),Math.fround(2.5)],[[.698,.204],[.152,.49],Math.fround(6.5),Math.fround(2.5)],[[.884,.454],[.13,.454],Math.fround(7.599999904632568),Math.fround(1.5)],[[.962,.608],[.26,.914],Math.fround(7.699999809265137),Math.fround(3)],[[.962,.608],[.178,.608],Math.fround(7.800000190734863),Math.fround(1)]]);function jl(n,e,t,r,i){var o,a;let u,s;s=Fo()[br.fields[0]],u=[(o=s.ImageMetadata.ImageWidth,o),(a=s.ImageMetadata.ImageHeight,a)];const c=n[0]*u[0],l=e[0]*u[0],f=n[1]*u[1],h=e[1]*u[1],d=i+r;return new Pl([n,e,t,r],ba((function(n,e){return n}),new ya(c,f),new ya(l,h),d,t),f===h)}function _l(n,e){return jl(n.TorpedoLaunchDetail[0],n.TorpedoLaunchDetail[1],n.TorpedoLaunchDetail[2],n.TorpedoLaunchDetail[3],e)}function ql(){var n,e;let t,r;return r=Fo()[br.fields[0]],t=[(n=r.ImageMetadata.ImageWidth,n),(e=r.ImageMetadata.ImageHeight,e)],new xl(new El(0,"FacingLeft"),new bl(0,"ShipStationary"),new ya(Math.fround(.8859999775886536)*t[0],Math.fround(.9380000233650208)*t[1]))}function zl(n,e,t,r){const i=Math.fround(10),o=Gl(e),a=Bl(e),u=function(n,e){return new ya(n.ptx+o*e,n.pty+a*e)},s=t(r,u(n,i*Math.fround(1))),c=t(s,n);return t(c,u(n,i*Math.fround(-1)))}function Vl(n,e,t){return zl(n.ShipCentre,n.ShipRotation,(function(n,r){return!!n||Math.abs(e.ptx-r.ptx)<t&&Math.abs(e.pty-r.pty)<t}),!1)}function Jl(n,e){return new Ga(vl(),e,Da(n,e,Al))}function Ul(n,e,t,r){switch(t.tag){case 1:case 3:return[e,t];case 0:{let i;return i=Rt((function(n,e){return i=Vl(t.fields[0],e.MineLocation,Tl)?e.MineLocation:null,o=n[1],a=n[0],u=r,null==i?[a,o]:[new H(Jl(i,u),a),new Dl(2,"ShipExploding",u)];var i,o,a,u}),[e,t],n),[i[0],i[1]]}default:return[e,t]}}const Yl=[Math.fround(0),Ut([[Math.fround(.02199999988079071),Math.fround(0)],[Math.fround(.13199999928474426),Math.fround(.3799999952316284)],[Math.fround(.22200000286102295),Math.fround(.8899999856948853)],[Math.fround(.3199999928474426),Math.fround(1)]])],Zl=[Math.fround(1),Ut([[Math.fround(.23999999463558197),Math.fround(0)],[Math.fround(.335999995470047),Math.fround(.11599999666213989)],[Math.fround(.6959999799728394),Math.fround(.20000000298023224)],[Math.fround(1),Math.fround(.7260000109672546)],[Math.fround(1),Math.fround(1)]])];function $l(n,e,t){var r,i;let o,a;a=Fo()[br.fields[0]],o=[(r=a.ImageMetadata.ImageWidth,r),(i=a.ImageMetadata.ImageHeight,i)];const u=t/o[1];let s,c;return c=Zt((function(n){return u<n[0][1]||u>n[1][1]?null:(e=n[0][1],t=n[0][0],r=n[1][1],i=n[1][0],t+(i-t)/(r-e)*(u-e));var e,t,r,i}),function(n){const e=function(n,e,t){for(;;){const r=n,i=e,o=t;if(null==r.tail)return Ut(i);{let a=i;Ft([o,r.head],a),n=r.tail,e=i,t=r.head}}};var t,r,i,o;switch(null!=n.tail&&null!=n.tail.tail?(t=1,r=n.head,i=n.tail.head,o=n.tail.tail):t=0,t){case 0:return new H;case 1:{const n=[];return Ft([r,i],n),v(2,e,[o])(n)(i)}}}(e)),s=nn(c,n),new ya(s*o[0],t)}function Ql(n,e,t,r){return zl(n.ShipCentre,n.ShipRotation,(function(n,i){if(null==n){const n=$l(t,r,i.pty);return e(i,n)?i:null}return n}),null)}function nf(n,e){switch(n.tag){case 1:case 3:return n;case 0:return n.fields[0].ShipCentre.pty<Cl?new Dl(1,"ShipGotThrough",e,n.fields[0]):n;default:return n}}function ef(n,e,t){let r,i,o,a;var u,s;switch(r=Fo()[xr.fields[0]],i=Fo()[Fr.fields[0]],o=Fo()[Gr.fields[0]],a=Fo()[br.fields[0]],Ko(n,0,0,a),pu(n,a.ImageMetadata.ImageHeight),Vt((function(e){jo(n,e.MineLocation.ptx,e.MineLocation.pty,r)}),e.Mines),Vt((function(e){const r=e.TorpedoPositionGetter(t);switch(r.tag){case 2:break;case 1:{const t=e.TorpedoIsHorizontal?i:o;jo(n,r.fields[0].ptx,r.fields[0].pty,t);break}}}),e.LiveTorpedos),2===e.Ship.tag?u=0:1===e.Ship.tag?(u=1,s=e.Ship.fields[1]):0===e.Ship.tag?(u=1,s=e.Ship.fields[0]):u=0,u){case 1:jo(n,s.ShipCentre.ptx,s.ShipCentre.pty,function(n){const e=1===n.tag?Hr:2===n.tag?Pr:3===n.tag?Or:4===n.tag?Xr:Dr;return Fo()[e.fields[0]]}(s.ShipRotation))}_a(n,e.Animations,t);const c=new gu(e.FleetStats.ScoreAndHiScore,e.FleetStats.ShipsStillToNavigate,e.FleetStats.ShipsSuccess,na(e.FleetStats.ShipsSuccess),0,0,null,Math.fround(0));wu(n,a.ImageMetadata.ImageHeight,c)}function tf(n,e,t,r,i){const o=new kl(e,0,n),a=(u=i,zt((function(n,e){return jl(e[0],e[1],e[2],e[3],u)}),Nl));var u;const s=new Dl(0,"ShipInPlay",ql()),c=new H;return new Ol(o,a,Kl(),c,s,t,r)}function rf(n,e,t){const r=function(n,e,t){const r=new kl(n.ShipsStillToNavigate-1,e,t);return[r,0===r.ShipsStillToNavigate?new Dl(3,"SecretPassageScreenOver"):new Dl(0,"ShipInPlay",ql())]};if(!function(n,e){var t,r;switch(n.tag){case 0:t=0;break;case 2:case 1:t=1,r=n.fields[0];break;default:t=0}switch(t){case 0:return!1;case 1:return e>r+Wl}}(e,t))return[n,e];switch(e.tag){case 3:throw new Error("should not happen");case 2:return r(n,n.ShipsSuccess,n.ScoreAndHiScore);case 1:return r(n,n.ShipsSuccess+1,Mo(3e3,n.ScoreAndHiScore));default:throw new Error("should not happen")}}function of(n,e,t){let r;if(r=Qo(e),3===n.Ship.tag)return n;{const e=function(n,e){var t,r,i;switch(n.tag){case 2:return n;case 1:return new Dl(1,"ShipGotThrough",n.fields[0],(t=Rl(n.fields[1].ShipCentre,n.fields[1].ShipRotation,n.fields[1].ShipSpeed),new xl(n.fields[1].ShipRotation,n.fields[1].ShipSpeed,t)));case 3:return n;default:return new Dl(0,"ShipInPlay",(r=Rl(n.fields[0].ShipCentre,n.fields[0].ShipRotation,n.fields[0].ShipSpeed),i=Fl(n.fields[0].ShipSpeed,e),new xl(Xl(n.fields[0].ShipRotation,e),i,r)))}}(n.Ship,r);let o,a;i=t,o=qt((function(n){return 2===n.TorpedoPositionGetter(i).tag?_l(n,i):n}),n.LiveTorpedos),a=Ka(t,n.Animations);const u=function(n,e,t,r){switch(t.tag){case 1:case 3:return[n,e,t];case 0:{let i;return i=Rt((function(n,e){let i;const o=e.TorpedoPositionGetter(r);switch(o.tag){case 2:i=null;break;case 1:i=Vl(t.fields[0],o.fields[0],Il)?o.fields[0]:null;break;default:i=null}if(null==i)return[new H(e,n[0]),n[1],n[2]];{const t=i;return[new H(_l(e,r),n[0]),new H(Jl(t,r),n[1]),new Dl(2,"ShipExploding",r)]}}),[new H,e,t],n),[i[0],i[1],i[2]]}default:return[n,e,t]}}(o,a,e,t),s=Ul(n.Mines,u[1],u[2],t),c=function(n,e,t){switch(e.tag){case 1:case 3:return[n,e];case 0:{let r;if(r=nn(Ql(e.fields[0],Ca,Yl[0],Yl[1]),Ql(e.fields[0],Wa,Zl[0],Zl[1])),null!=r){return[new H(Jl(r,t),n),new Dl(2,"ShipExploding",t)]}return[n,e]}default:return[n,e]}}(s[0],s[1],t),l=nf(c[1],t),f=rf(n.FleetStats,l,t);return new Ol(f[0],u[0],n.Mines,c[0],f[1],n.WhereToGoOnGameOver,n.WhereToOnCourseCompletion)}var i}function af(n,e,t,r){const i=of(xo(n),e,t);switch(1===i.Ship.tag||2===i.Ship.tag?0:3===i.Ship.tag?1:0){case 0:{const e=Ho(n);return bo(i,W(3,Do(n)),W(4,e),new H)}case 1:return i.FleetStats.ShipsSuccess>0?i.WhereToOnCourseCompletion(i.FleetStats.ShipsSuccess,i.FleetStats.ScoreAndHiScore,t):i.WhereToGoOnGameOver(i.FleetStats.ScoreAndHiScore)}}const uf=Math.fround(2),sf=new ya(Math.fround(290),Math.fround(15)),cf=Ut([new Ta(Math.fround(38),Math.fround(7),Math.fround(310),Math.fround(19)),new Ta(Math.fround(125),Math.fround(19),Math.fround(310),Math.fround(35)),new Ta(Math.fround(133),Math.fround(35),Math.fround(310),Math.fround(41)),new Ta(Math.fround(168),Math.fround(41),Math.fround(310),Math.fround(50)),new Ta(Math.fround(200),Math.fround(49),Math.fround(310),Math.fround(139)),new Ta(Math.fround(86),Math.fround(75),Math.fround(276),Math.fround(139)),Vs,Us]),lf=b((function(n,e,t,r,i){this.ScoreAndHiScore=n,this.AlliedFleetCentre=e,this.EnemyFleetCentre=t,this.SecretPassageCtor=r,this.EngageEnemyCtor=i}),G);function ff(n,e,t){let r;r=Fo()[vr.fields[0]],Ko(n,0,0,r),jo(n,e.AlliedFleetCentre.ptx,e.AlliedFleetCentre.pty,Fo()[kr.fields[0]]),jo(n,e.EnemyFleetCentre.ptx,e.EnemyFleetCentre.pty,Fo()[Er.fields[0]]),pu(n,r.ImageMetadata.ImageHeight);const i=new gu(e.ScoreAndHiScore,0,10,na(10),0,0,null,Math.fround(0));wu(n,r.ImageMetadata.ImageHeight,i)}function hf(n,e,t,r){let i;i=Qo(e);const o=xo(n),a=Ys(o.AlliedFleetCentre,i,cf),u=Zs(o.EnemyFleetCentre,a);if(Aa(Vs,a)){let e,r,i;return i=$u(o.SecretPassageCtor),r=function(n){return ns(W(2,i),n)},e=$u(r),Qu(uf,t,W(2,e),n)}if(Math.abs(u.ptx-a.ptx)<Ns&&Math.abs(u.pty-a.pty)<Ns){let e,r,i;return i=$u(o.EngageEnemyCtor),r=function(n){return ns(W(2,i),n)},e=$u(r),Qu(uf,t,W(2,e),n)}{const e=new lf(o.ScoreAndHiScore,a,u,o.SecretPassageCtor,o.EngageEnemyCtor),t=Ho(n);return bo(e,W(3,Do(n)),W(4,t),new H)}}const df=Math.fround(2),gf=b((function(n,e,t,r,i){this.Scoreboard=n,this.ScreenStartTime=e,this.HiScore=t,this.ScoreboardMemo=r,this.NextScreenConstructor=i}),G);function wf(n,e){return e>n.ScreenStartTime+df}function pf(n,e,t){Zo(n,t/Math.fround(4)),jo(n,Math.fround(160),Math.fround(68),Fo()[Ar.fields[0]]),Yo(n,Tr,new pr(1,"CentreAlign"),new mr(0,"TopAlign"),160,94,20,e.ScoreboardMemo),wf(e,t)&&Jo(n,Tr,new pr(1,"CentreAlign"),new mr(1,"MiddleAlign"),160,180,"USE CURSOR KEYS ... Z TO FIRE")}function mf(n,e,t,r){let i;i=Qo(e);const o=xo(n);return i.Fire.JustDown&&wf(o,t)?o.NextScreenConstructor(new So(0,o.HiScore)):Oo(n)}let Sf=new H;function Mf(n,e){return oa(n,Sf,(function(n,e){return Sf=n,xf(e)}),e)}function yf(n){return t=Mf,bo(new aa(e=n,"HI SCORE   "+e.HiScore.toString(),t),ua,sa,new H);var e,t}function If(n,e){return Ma(n,Mf,e)}function Tf(n,e,t,r,i){return bo(Hu(t,e,r,n,yf,If,Cf,i),Du,Pu,new H)}function Cf(n,e,t,r,i){const o=function(){let n,e;return e=qt(Nu,Nt(We(0,1,3))),n=Xu((function(n){return 1===n.tag?new Ou(1,"SecondList",n.fields[0]):new Ou(0,"FirstList",n.fields[0])}),e),null==n[1].tail?new en(0,"Ok",n[0]):new en(1,"Error",Le("\n",n[1]))}();if(0===o.tag)return a=t,u=e,s=n,c=o.fields[0],bo(Hs(a,u,s,c,yf,(function(e,t,i){return Tf(n,e,t,r,i)}),i),Ds,Ks,new H);throw new Error("Failed to parse the tank battle level definitions.");var a,u,s,c}function Wf(n,e,t){const r=new za(qt((function(n){return new qa(new ya(n[0],n[1]))}),Va));return function(n,e,t){return bo(new nc(n,e,$s,t),ec,tc,new H)}(e,n,(function(t){return Cf(0,na(n),e,r,t)}))}function Af(n,e,t){return _c(e,n,yf,Wf,t)}function vf(n,e,t,r){return wl(n,t,e,yf,Af,r)}function kf(n,e,t){return bo(new Sl(e,n,pl,qs,(function(t){return vf(new ea(1,"WeakerEnemy"),n,e,t)})),Ml,yl,new H)}function Ef(n,e){return bo(tf(n,10,yf,kf,e),ef,af,new H)}function bf(n){return bo(new lf(n,sf,qs,(function(e){return Ef(n,e)}),(function(e){return vf(new ea(0,"StrongEnemy"),10,n,e)})),ff,hf,new H)}function xf(n){const e=go(Sf);return r=bf,bo(new gf(t=Sf,n,e,mo(30,t),r),pf,mf,new H);var t,r}function Df(n,e){return Sf=function(n,e,t){let r;return r=zt((function(n,r){const i=e+(n>>>0)*t;return new fo(r,i,i.toString())}),n),ar(ho,r,{Compare:m})}(Ut(["Bob","Scott","Lara","J"]),1e4,5e3),xf(e)}const Hf=b((function(n){this.SoundFileName=n}),G);b((function(n,e,...t){P.call(this,n,e,...t)}),P);const Pf=b((function(n,e,...t){P.call(this,n,e,...t)}),P);const Of=b((function(n,e){this.SoundMetadata=n,this.HostSoundRef=e}),G);b((function(n,e,...t){P.call(this,n,e,...t)}),P);const Xf=new J(0,"WebBrowserKeyCode",80),Ff=b((function(n,e,t,r,i){this.WebBrowserKeyCode=n,this.ThisKeyScanCode=e,this.MutHeld=t,this.MutJustPressed=r,this.MutWaitingRelease=i}),G);function Gf(n,e){return new Ff(n,e,!1,!1,!1)}function Bf(n){return new U(n.MutJustPressed,n.MutHeld)}const Rf=b((function(n,e,t){this.MutableKeyStatesList=n,this.PauseKey=e,this.GameIsPaused=t}),G);function Lf(n,e){let t;if(t=Qt((function(n){return w(n.ThisKeyScanCode,e)}),n.MutableKeyStatesList),null==t)return w(e,n.PauseKey.ThisKeyScanCode)?n.PauseKey:null;return t}function Kf(n,e){const t=Lf(n,e);if(null!=t){const e=t;return e.MutWaitingRelease||(w(e.ThisKeyScanCode,n.PauseKey.ThisKeyScanCode)&&((r=n).GameIsPaused=!r.GameIsPaused),e.MutHeld=!0,e.MutJustPressed=!0,e.MutWaitingRelease=!0),!0}return!1;var r}function Nf(n,e){const t=Lf(n,e);if(null!=t){const n=t;return n.MutHeld=!1,n.MutWaitingRelease=!1,!0}return!1}b((function(n,e){this.Fonts=n,this.Images=e}),G);function jf(n,e,t,r,i,o){const a=[];!function o(u){if(null!=u.tail){const i=n(u.head),s=0|e(u.head),c=0|r(u.head),l=0|t(u.head);loadImageThenDo(i,!0,(function(n){Ft(function(n,e){const t=0|n.ImageMetadata.ImageHeight;return new wr(n,1,1,e,t,e,t)}(new hr(new cr(i,new sr(1,"MagentaColourKeyImage"),s,c),new fr(0,"HostImageRef",IFsharpImageToTexture(n))),l),a),o(u.tail)}))}else i(a.slice())}(o)}function _f(n,e,t,r,i){InitialiseWebGl2Interface(n.RetroScreenWidth,n.RetroScreenHeight,n.RetroScreenTitle),jf((function(n){return n.FontImageMetadata.ImageFileName}),(function(n){return n.FontImageMetadata.ImageWidth}),(function(n){return n.FontCharWidth}),(function(n){return n.FontImageMetadata.ImageHeight}),(function(n){!function(n,e,t,r,i,o){const a=[];!function o(u){if(null!=u.tail){const i=n(u.head),s=e(u.head),c=0|t(u.head),l=0|r(u.head);loadImageThenDo(i,s,(function(n){Ft(new hr(new cr(i,s?new sr(1,"MagentaColourKeyImage"):new sr(0,"OpaqueImage"),c,l),new fr(0,"HostImageRef",IFsharpImageToTexture(n))),a),o(u.tail)}))}else i(a.slice())}(o)}((function(n){return n.ImageFileName}),(function(n){return 1===n.ImageTransparency.tag}),(function(n){return n.ImageWidth}),(function(n){return n.ImageHeight}),(function(e){!function(n,e,t){const r=[];!function t(i){if(null!=i.tail){const e=n(i.head);loadSoundThenDo(e,(function(n){Ft(new Of(new Hf(e),new Pf(0,"HostSoundRef",n)),r),t(i.tail)}))}else e(r.slice())}(t)}((function(n){return n.SoundFileName}),(function(t){i(e,n,t)}),r)}),e)}),t)}function qf(n){switch(n.tag){case 2:{let e,t,r,i,o,a,u,s;e=n.fields[2].ImageMetadata.ImageWidth,t=n.fields[2].ImageMetadata.ImageHeight,r=n.fields[2].ImageMetadata.ImageWidth,i=n.fields[2].ImageMetadata.ImageHeight,o=~~(n.fields[0]+Math.fround(.5)),a=~~(n.fields[1]+Math.fround(.5)),u=n.fields[3],s=n.fields[4],r>0&&i>0&&u>0&&s>0&&IFsharpDrawImagePortion(n.fields[2].HostImageRef.fields[0],e,t,0,0,r,i,o,a,u,s);break}case 3:{let e,t,r,i,o,a;e=n.fields[8].ImageMetadata.ImageWidth,t=n.fields[8].ImageMetadata.ImageHeight,r=~~(n.fields[4]+Math.fround(.5)),i=~~(n.fields[5]+Math.fround(.5)),o=n.fields[6],a=n.fields[7],n.fields[2]>0&&n.fields[3]>0&&o>0&&a>0&&IFsharpDrawImagePortion(n.fields[8].HostImageRef.fields[0],e,t,n.fields[0],n.fields[1],n.fields[2],n.fields[3],r,i,o,a);break}case 1:{let a,u,s,c;a=n.fields[2],u=n.fields[3],s=n.fields[0],c=n.fields[1],e=s,t=c,r=a,i=u,o=n.fields[4].fields[0],IFsharpDrawRectangle(e,t,r,i,((16711680&o)>>>0>>>16)/256,((65280&o)>>>0>>>8)/256,((255&o)>>>0)/256);break}default:{let e,t,r,i;e=n.fields[2].ImageMetadata.ImageWidth,t=n.fields[2].ImageMetadata.ImageHeight,r=n.fields[0],i=n.fields[1],IFsharpDrawImageOneToOne(n.fields[2].HostImageRef.fields[0],e,t,r,i)}}var e,t,r,i,o}function zf(n,e,t,r,i,o){var a,u;let s;a=i,u=o,Fo(r),Go(a),Bo(u);const c=e();if(0!==c.tag)throw new Error(c.fields[0]);s=c.fields[0];const l=Math.fround(0),f=Math.fround(.019999999552965164);let h=t(s,l);const d=(g=80,p=qt((function(n){return[n.fields[0],new J(0,"WebBrowserKeyCode",n.fields[0])]}),n),new Rf(qt((function(n){return Gf(n[1],n[0])}),p),Gf(Xf,g),!1));var g,p;const m=function(n,e){document.addEventListener(n,(function(n){e(d,~~n.keyCode)&&n.preventDefault()}))};m("keydown",Kf),m("keyup",Nf),document.getElementById("loaderScreen").classList.add("hidden"),document.getElementById("gameScreen").classList.remove("hidden");let S=0;window.setInterval((function(){let n;let e;var t;S+=1,n=S/Math.fround(50),h.Draw(qf,n),e=h.Frame((function(n){return function(n,e){let t;return t=Qt((function(n){return w(n.WebBrowserKeyCode,e)}),n.MutableKeyStatesList),null==t?w(e,n.PauseKey.WebBrowserKeyCode)?Bf(n.PauseKey):Y:Bf(t)}(d,n)}),n,f),Vt((function(n){var e;e=n.fields[0].HostSoundRef,playSound(e.fields[0])}),e.Sounds()),or((function(n){return n.MutJustPressed}),(t=d).MutableKeyStatesList)&&Vt((function(n){n.MutJustPressed=!1}),t.MutableKeyStatesList),h=e}),20,null)}function Vf(){const n=Ut([new J(0,"WebBrowserKeyCode",37),new J(0,"WebBrowserKeyCode",39),new J(0,"WebBrowserKeyCode",38),new J(0,"WebBrowserKeyCode",40),new J(0,"WebBrowserKeyCode",90)]);_f(new io("Pac Man",320,200),so,uo,co,(function(e,t,r){zf(n,(function(){return new en(0,"Ok",1)}),Df,e,t,r)}))}Vf(),t.d(e,"WebMain",(function(){return Vf}))}]);